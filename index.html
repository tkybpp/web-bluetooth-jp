<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Web Bluetooth</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure);  }
 *        .example::before { content: "Example " counter(example); }
 *        .issue::before   { content: "Issue "   counter(issue);   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

  /* Style for algorithms */
  ol.algorithm ol:not(.algorithm),
  .algorithm > ol ol:not(.algorithm) {
    border-left: 0.5em solid #DEF;
  }

  /* Style for switch/case <dl>s */
  dl.switch > dd > ol.only,
  dl.switch > dd > .only > ol {
    margin-left: 0;
  }
  dl.switch > dd > ol.algorithm,
  dl.switch > dd > .algorithm > ol {
    margin-left: -2em;
  }
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue); } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example); } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
  .toc > li li li       { font-size:   95%;    }
  .toc > li li li li    { font-size:   90%;    }
  .toc > li li li li li { font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
   <meta content="Bikeshed 1.0.0" name="generator">
<style>
   .argument-list { display: inline-block; vertical-align: top; }
   /* Show self-links for various elements. This is incompatible with nearby floats. */
   .note, .why, .example, .issue { overflow: inherit; }
</style>
<style>/* style-md-lists */

  /* This is a weird hack for me not yet following the commonmark spec
     regarding paragraph and lists. */
[data-md] > :first-child {
  margin-top: 0;
}
[data-md] > :last-child {
  margin-bottom: 0;
}</style>
   <style>/* style-selflinks */

   .heading, .issue, .note, .example, li, dt {
     position: relative;
   }
   a.self-link {
     position: absolute;
     top: 0;
     left: calc(-1 * (3.5rem - 26px));
     width: calc(3.5rem - 26px);
     height: 2em;
     text-align: center;
     border: none;
     transition: opacity .2s;
     opacity: .5;
   }
   a.self-link:hover {
     opacity: 1;
   }
   .heading > a.self-link {
     font-size: 83%;
   }
   li > a.self-link {
     left: calc(-1 * (3.5rem - 26px) - 2em);
   }
   dfn > a.self-link {
     top: auto;
     left: auto;
     opacity: 0;
     width: 1.5em;
     height: 1.5em;
     background: gray;
     color: white;
     font-style: normal;
     transition: opacity .2s, background-color .2s, color .2s;
   }
   dfn:hover > a.self-link {
     opacity: 1;
   }
   dfn > a.self-link:hover {
     color: black;
   }

   a.self-link::before            { content: "¶"; }
   .heading > a.self-link::before { content: "§"; }
   dfn > a.self-link::before      { content: "#"; }</style>
   <style>/* style-counters */

   body {
     counter-reset: example figure issue;
   }
   .issue {
     counter-increment: issue;
   }
   .issue:not(.no-marker)::before {
     content: "Issue " counter(issue);
   }

   .example {
     counter-increment: example;
   }
   .example:not(.no-marker)::before {
     content: "Example " counter(example);
   }
   .invalid.example:not(.no-marker)::before,
   .illegal.example:not(.no-marker)::before {
     content: "Invalid Example" counter(example);
   }

   figcaption {
     counter-increment: figure;
   }
   figcaption:not(.no-marker)::before {
     content: "Figure " counter(figure) " ";
   }</style>
   <style>/* style-autolinks */

   .css.css, .property.property, .descriptor.descriptor {
     color: #005a9c;
     font-size: inherit;
     font-family: inherit;
   }
   .css::before, .property::before, .descriptor::before {
     content: "‘";
   }
   .css::after, .property::after, .descriptor::after {
     content: "’";
   }
   .property, .descriptor {
     /* Don't wrap property and descriptor names */
     white-space: nowrap;
   }
   .type { /* CSS value <type> */
     font-style: italic;
   }
   pre .property::before, pre .property::after {
     content: "";
   }
   [data-link-type="property"]::before,
   [data-link-type="propdesc"]::before,
   [data-link-type="descriptor"]::before,
   [data-link-type="value"]::before,
   [data-link-type="function"]::before,
   [data-link-type="at-rule"]::before,
   [data-link-type="selector"]::before,
   [data-link-type="maybe"]::before {
     content: "‘";
   }
   [data-link-type="property"]::after,
   [data-link-type="propdesc"]::after,
   [data-link-type="descriptor"]::after,
   [data-link-type="value"]::after,
   [data-link-type="function"]::after,
   [data-link-type="at-rule"]::after,
   [data-link-type="selector"]::after,
   [data-link-type="maybe"]::after {
     content: "’";
   }

   [data-link-type].production::before,
   [data-link-type].production::after,
   .prod [data-link-type]::before,
   .prod [data-link-type]::after {
     content: "";
   }

   [data-link-type=element],
   [data-link-type=element-attr] {
     font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
     font-size: .9em;
   }
   [data-link-type=element]::before { content: "<" }
   [data-link-type=element]::after  { content: ">" }

   [data-link-type=biblio] {
     white-space: pre;
   }</style>
   <style>/* style-dfn-panel */

   .dfn-panel {
     position: absolute;
     z-index: 35;
     height: auto;
     width: -webkit-fit-content;
     width: fit-content;
     max-width: 300px;
     max-height: 500px;
     overflow: auto;
     padding: 0.5em 0.75em;
     font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
     background: #DDDDDD;
     color: black;
     border: outset 0.2em;
   }
   .dfn-panel:not(.on) { display: none; }
   .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
   .dfn-panel > b { display: block; }
   .dfn-panel a { color: black; }
   .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
   .dfn-panel > b + b { margin-top: 0.25em; }
   .dfn-panel ul { padding: 0; }
   .dfn-panel li { list-style: inside; }
   .dfn-panel.activated {
     display: inline-block;
     position: fixed;
     left: .5em;
     bottom: 2em;
     margin: 0 auto;
     max-width: calc(100vw - 1.5em - .4em - .5em);
     max-height: 30vh;
   }

   .dfn-paneled { cursor: pointer; }
   </style>
   <style>/* style-syntax-highlighting */
   pre.idl.highlight { color: #708090; }
   .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
   code.highlight { padding: .1em; border-radius: .3em; }
   pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
   .highlight .c { color: #708090 } /* Comment */
   .highlight .k { color: #990055 } /* Keyword */
   .highlight .l { color: #000000 } /* Literal */
   .highlight .n { color: #0077aa } /* Name */
   .highlight .o { color: #999999 } /* Operator */
   .highlight .p { color: #999999 } /* Punctuation */
   .highlight .cm { color: #708090 } /* Comment.Multiline */
   .highlight .cp { color: #708090 } /* Comment.Preproc */
   .highlight .c1 { color: #708090 } /* Comment.Single */
   .highlight .cs { color: #708090 } /* Comment.Special */
   .highlight .kc { color: #990055 } /* Keyword.Constant */
   .highlight .kd { color: #990055 } /* Keyword.Declaration */
   .highlight .kn { color: #990055 } /* Keyword.Namespace */
   .highlight .kp { color: #990055 } /* Keyword.Pseudo */
   .highlight .kr { color: #990055 } /* Keyword.Reserved */
   .highlight .kt { color: #990055 } /* Keyword.Type */
   .highlight .ld { color: #000000 } /* Literal.Date */
   .highlight .m { color: #000000 } /* Literal.Number */
   .highlight .s { color: #a67f59 } /* Literal.String */
   .highlight .na { color: #0077aa } /* Name.Attribute */
   .highlight .nc { color: #0077aa } /* Name.Class */
   .highlight .no { color: #0077aa } /* Name.Constant */
   .highlight .nd { color: #0077aa } /* Name.Decorator */
   .highlight .ni { color: #0077aa } /* Name.Entity */
   .highlight .ne { color: #0077aa } /* Name.Exception */
   .highlight .nf { color: #0077aa } /* Name.Function */
   .highlight .nl { color: #0077aa } /* Name.Label */
   .highlight .nn { color: #0077aa } /* Name.Namespace */
   .highlight .py { color: #0077aa } /* Name.Property */
   .highlight .nt { color: #669900 } /* Name.Tag */
   .highlight .nv { color: #222222 } /* Name.Variable */
   .highlight .ow { color: #999999 } /* Operator.Word */
   .highlight .mb { color: #000000 } /* Literal.Number.Bin */
   .highlight .mf { color: #000000 } /* Literal.Number.Float */
   .highlight .mh { color: #000000 } /* Literal.Number.Hex */
   .highlight .mi { color: #000000 } /* Literal.Number.Integer */
   .highlight .mo { color: #000000 } /* Literal.Number.Oct */
   .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
   .highlight .sc { color: #a67f59 } /* Literal.String.Char */
   .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
   .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
   .highlight .se { color: #a67f59 } /* Literal.String.Escape */
   .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
   .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
   .highlight .sx { color: #a67f59 } /* Literal.String.Other */
   .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
   .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
   .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
   .highlight .vc { color: #0077aa } /* Name.Variable.Class */
   .highlight .vg { color: #0077aa } /* Name.Variable.Global */
   .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
   .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
   </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Web Bluetooth</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Draft Community Group Report, <time class="dt-updated" datetime="2016-07-27">2016/07/27</time></span></h2>
   <p style="border: 1px solid #faebcc; background-color: #fcf8e3; padding: 10px;">※ この日本語ドキュメントは、公式ドキュメントではありません。翻訳による内容の正確さおよび最新の内容を保証するものではありませんので、あくまで参考として利用していただき、適宜、<a class="u-url" href="https://webbluetoothcg.github.io/web-bluetooth/">W3Cの原文</a>を参照していただくようお願いします。（翻訳に対するフィードバックや ご指摘があれば随時受け付けています）</p>
    <div data-fill-with="spec-metadata">
    <dl>
     <dt>最新版(公式):
     <dd><a class="u-url" href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a>
     <dt>課題一覧:
     <dd><a href="https://github.com/WebBluetoothCG/web-bluetooth/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">編集:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://github.com/WebBluetoothCG/web-bluetooth/graphs/contributors">See contributors on GitHub</a>
     <dt>参画する:
     <dd><span><a href="https://www.w3.org/community/web-bluetooth/">Join the W3C Community Group</a></span>
     <dd><span><a href="https://github.com/WebBluetoothCG/web-bluetooth">Fix the text through GitHub</a></span>
     <dd><span><a href="mailto:public-web-bluetooth@w3.org">public-web-bluetooth@w3.org</a> (<a href="https://lists.w3.org/Archives/Public/public-web-bluetooth/" rel="discussion">archives</a>)</span>
     <dd><span><a href="irc://irc.w3.org:6665/#web-bluetooth">IRC: #web-bluetooth on W3C’s IRC</a></span>
     <dd><span></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2015 the Contributors to the Web Bluetooth Specification, published by the <a href="https://www.w3.org/community/web-bluetooth/">Web Bluetooth Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">要約</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>本ドキュメントは、Bluetooth4.0 にて Generic Attribute Profile (GATT) を利用したデバイスの検索と通信を行うAPIについて説明します。</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本ドキュメントの状況</span></h2>
  <div data-fill-with="status">
   <p>本仕様書は <a href="https://www.w3.org/community/web-bluetooth/">Web Bluetooth Community Group</a>が公開したもので、W3C Standard および W3C Standards Track が公開したものではありません。
     <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> に基づき、限定されたオプトアウトやその他条件を適用するものがあることに留意してください。
     <a href="http://www.w3.org/community/">W3C Community and Business Groups についてを詳しく知りたい場合はこちらから。</a></p>
     <p> 本ドキュメントの変更履歴は <a href="https://github.com/WebBluetoothCG/web-bluetooth/commits/gh-pages">https://github.com/WebBluetoothCG/web-bluetooth/commits/gh-pages</a> から確認できます。 </p>
   <p>本ドキュメントにご意見のある方は <a href="mailto:public-web-bluetooth@w3.org">public-web-bluetooth@w3.org</a> (<a href="mailto:public-web-bluetooth-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-web-bluetooth/">archives</a>までお送りください。</p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">目次</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">はじめに</span></a>
     <ol class="toc">
      <li><a href="#introduction-examples"><span class="secno">1.1</span> <span class="content">サンプル</span></a>
     </ol>
    <li>
     <a href="#security-and-privacy"><span class="secno">2</span> <span class="content">セキュリティとプライバシーへの配慮</span></a>
     <ol class="toc">
       <li><a href="#device-access-is-powerful"><span class="secno">2.1</span> <span class="content">強力なデバイスへのアクセス</span></a>
       <li><a href="#server-takeovers"><span class="secno">2.2</span> <span class="content">Trusted servers can serve malicious code</span></a>
       <li><a href="#attacks-on-devices"><span class="secno">2.3</span> <span class="content">デバイスへの攻撃</span></a>
       <li>
         <a href="#bluetooth-device-identifiers"><span class="secno">2.4</span> <span class="content">Bluetooth デバイス識別子</span></a>
         <ol class="toc">
           <li><a href="#remote-device-identifiers"><span class="secno">2.4.1</span> <span class="content">リモート Bluetooth デバイスの識別子</span></a>
           <li><a href="#ua-bluetooth-address"><span class="secno">2.4.2</span> <span class="content">UA の Bluetooth アドレス</span></a>
         </ol>
     </ol>
     <li>
       <a href="#device-discovery"><span class="secno">3</span> <span class="content">デバイスの検索</span></a>
       <ol class="toc">
         <li><a href="#permission-api-integration"><span class="secno">3.1</span> <span class="content">Permission API Integration</span></a>
       </ol>
     <li>
       <a href="#device-representation"><span class="secno">4</span> <span class="content">デバイスの表現</span></a>
       <ol class="toc">
         <li><a href="#global-device-properties"><span class="secno">4.1</span> <span class="content">グローバル Bluetooth デバイスプロパティ</span></a>
         <li>
           <a href="#bluetoothdevice"><span class="secno">4.2</span> <span class="content">Bluetooth デバイス</span></a>
           <ol class="toc">
             <li>
               <a href="#advertising-events"><span class="secno">4.2.1</span> <span class="content">Responding to Advertising Events</span></a>
               <ol class="toc">
                 <li><a href="#bluetoothmanufacturerdatamap"><span class="secno">4.2.1.1</span> <span class="content">BluetoothManufacturerDataMap</span></a>
                 <li><a href="#bluetoothservicedatamap"><span class="secno">4.2.1.2</span> <span class="content">BluetoothServiceDataMap</span></a>
               </ol>
           </ol>
       </ol>
    <li>
     <a href="#gatt-interaction"><span class="secno">5</span> <span class="content">GATT インタラクション</span></a>
     <ol class="toc">
      <li>
       <a href="#information-model"><span class="secno">5.1</span> <span class="content">GATT 情報モデル</span></a>
       <ol class="toc">
        <li><a href="#bluetooth-cache"><span class="secno">5.1.1</span> <span class="content">Bluetooth cache</span></a>
        <li><a href="#navigating-bluetooth-hierarchy"><span class="secno">5.1.2</span> <span class="content">Bluetooth 階層ナビゲーション</span></a>
        <li><a href="#identifying-attributes"><span class="secno">5.1.3</span> <span class="content">Services, Characteristics, Descriptors 識別子</span></a>
       </ol>
      <li><a href="#bluetoothremotegattserver"><span class="secno">5.2</span> <span class="content">BluetoothRemoteGATTServer</span></a>
      <li><a href="#bluetoothremotegattservice"><span class="secno">5.3</span> <span class="content">BluetoothRemoteGATTService</span></a>
      <li>
       <a href="#bluetoothremotegattcharacteristic"><span class="secno">5.4</span> <span class="content">BluetoothRemoteGATTCharacteristic</span></a>
       <ol class="toc">
        <li><a href="#characteristicproperties"><span class="secno">5.4.1</span> <span class="content"><span>BluetoothCharacteristicProperties</span></span></a>
       </ol>
      <li><a href="#bluetoothremotegattdescriptor"><span class="secno">5.5</span> <span class="content">BluetoothRemoteGATTDescriptor</span></a>
      <li>
       <a href="#events"><span class="secno">5.6</span> <span class="content">イベント</span></a>
       <ol class="toc">
        <li><a href="#bluetooth-tree"><span class="secno">5.6.1</span> <span class="content">Bluetooth ツリー</span></a>
        <li><a href="#event-types"><span class="secno">5.6.2</span> <span class="content">イベントタイプ</span></a>
        <li><a href="#disconnection-events"><span class="secno">5.6.3</span> <span class="content">切断への応答</span></a>
        <li><a href="#notification-events"><span class="secno">5.6.4</span> <span class="content">Notifications と Indications への応答</span></a>
        <li><a href="#service-change-events"><span class="secno">5.6.5</span> <span class="content">Service Changes への応答</span></a>
        <li><a href="#idl-event-handlers"><span class="secno">5.6.6</span> <span class="content">IDL イベントハンドラ</span></a>
       </ol>
      <li><a href="#error-handling"><span class="secno">5.7</span> <span class="content">エラーハンドリング</span></a>
     </ol>
    <li>
     <a href="#uuids"><span class="secno">6</span> <span class="content">UUID</span></a>
     <ol class="toc">
      <li><a href="#standardized-uuids"><span class="secno">6.1</span> <span class="content">標準化された UUID</span></a>
     </ol>
    <li><a href="#the-gatt-blacklist"><span class="secno">7</span> <span class="content">GATT ブラックリスト</span></a>
    <li><a href="#navigator-extensions"><span class="secno">8</span> <span class="content">ナビゲーションインタフェースの拡張</span></a>
    <li><a href="#terminology"><span class="secno">9</span> <span class="content">用語と規則</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content">規格適合性</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">はじめに</span><a class="self-link" href="#introduction"></a></h2>
    <p><em>このセクションは参考です。</em></p>
    <p><a href="https://developer.bluetooth.org/">Bluetooth</a>は、機器間の短距離無線通信規格の1つです。クラシックBluetooth ( <abbr title="Basic Rate">BR</abbr> / <abbr title="Enhanced Data Rate">EDR</abbr> ) では、バイナリプロトコルの組を定義し、最大約24Mbpsの通信速度をサポートしています。
      Bluetooth4.0 では Bluetooth Smart( BLE または LE ) と呼ばれる「省電力」モードが新たに導入されました。
      通信速度は1Mbpsに制限されますが、ほとんどの時間は送信機の電源を切ったままにすることができます。
      BLEでは、機能の大半を <a data-link-type="dfn" href="#generic-attribute-profile" id="ref-for-generic-attribute-profile-1">Generic Attribute Profile( <abbr title="Generic Attribute Profile">GATT</abbr> )</a> によるキー/バリューのペアで提供しています。</p>
    <p>BLEでは、機器が行う複数の役割を定義しています。<a data-link-type="dfn" href="#broadcaster" id="ref-for-broadcaster-1">Broadcaster</a> と <a data-link-type="dfn" href="#observer" id="ref-for-observer-1">Ovserver</a> の役割 は、それぞれ送信専用、受信専用のアプリケーションです。 <a data-link-type="dfn" href="#peripheral" id="ref-for-peripheral-1">Peripheral</a> の役割で動作するデバイスは接続を受信し、<a data-link-type="dfn" href="#central" id="ref-for-central-1">Central</a> の役割で動作するデバイスは <a data-link-type="dfn" href="#peripheral" id="ref-for-peripheral-2">Peripheral</a> 機器と接続できます。</p>

     <p><a data-link-type="dfn" href="#peripheral" id="ref-for-peripheral-3">Peripheral</a> または <a data-link-type="dfn" href="#central" id="ref-for-central-2">Central</a> の役割で動作しているデバイスは、<a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-1">GATT server</a> のホストになることが可能で、サーバーは、<a data-link-type="dfn" href="#service" id="ref-for-service-1">Service</a>、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-1">Characteristic</a>、<a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-1">Descriptor</a> という階層になっています。この階層について、詳しくは <a href="#information-model">§5.1 GATT Information Model</a> を参照してください。BLEトランスポートをサポートするよう設計されていますが、GATTプロトコルはBR/EDRトランスポートでも動作します。</p>
    <p>本仕様書の初版では、<a data-link-type="dfn" href="#central" id="ref-for-central-3">Central</a> の役割を持つUAで実行すれば、ウェブページが BR/EDR または LEコネクション 経由で <a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-2">GATT server</a> と接続できます。本仕様書では <a data-link-type="biblio" href="#biblio-bluetooth42">BLUETOOTH42</a> の仕様書を引用しますが、Bluetooth 4.0 or 4.1 だけ実装したデバイス間通信もサポートする予定です。</p>
    <section>
     <h3 class="heading settled" data-level="1.1" id="introduction-examples"><span class="secno">1.1. </span><span class="content">サンプル</span><a class="self-link" href="#introduction-examples"></a></h3>
     <div class="example" id="example-heart-rate-monitor">
      <a class="self-link" href="#example-heart-rate-monitor"></a>
      <p>標準的な心拍数モニターを探索しデータを取り出すには、以下のようなコードをウェブサイトでは使用するでしょう：</p>
<pre class="highlight"><span class="kd">let</span> <span class="nx">chosenHeartRateService</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="nx">navigator</span><span class="p">.</span><span class="nx">bluetooth</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice-1"><span class="nx">requestDevice</span></a><span class="p">({</span>
  <span class="nx">filters</span><span class="o">:</span> <span class="p">[{</span>
    <span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="s1">'heart_rate'</span><span class="p">],</span>
  <span class="p">}]</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">device</span> <span class="o">=></span> <span class="nx">device</span><span class="p">.</span><span class="nx">gatt</span><span class="p">.</span><a data-link-type="functionish" href="#dom-bluetoothremotegattserver-connect" id="ref-for-dom-bluetoothremotegattserver-connect-1"><span class="nx">connect</span><span class="p">()</span></a><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">server</span> <span class="o">=></span> <span class="nx">server</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothremotegattserver-getprimaryservice" id="ref-for-dom-bluetoothremotegattserver-getprimaryservice-1"><span class="nx">getPrimaryService</span></a><span class="p">(</span><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.heart_rate.xml#"><span class="s1">'heart_rate'</span></a><span class="p">))</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">service</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">chosenHeartRateService</span> <span class="o">=</span> <span class="nx">service</span><span class="p">;</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="nx">service</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothremotegattservice-getcharacteristic" id="ref-for-dom-bluetoothremotegattservice-getcharacteristic-1"><span class="nx">getCharacteristic</span></a><span class="p">(</span><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.body_sensor_location.xml#"><span class="s1">'body_sensor_location'</span></a><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">handleBodySensorLocationCharacteristic</span><span class="p">),</span>
    <span class="nx">service</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothremotegattservice-getcharacteristic" id="ref-for-dom-bluetoothremotegattservice-getcharacteristic-2"><span class="nx">getCharacteristic</span></a><span class="p">(</span><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml#"><span class="s1">'heart_rate_measurement'</span></a><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">handleHeartRateMeasurementCharacteristic</span><span class="p">),</span>
  <span class="p">]);</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">handleBodySensorLocationCharacteristic</span><span class="p">(</span><span class="nx">characteristic</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">characteristic</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Unknown sensor location."</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">characteristic</span><span class="p">.</span><a data-link-type="functionish" href="#dom-bluetoothremotegattcharacteristic-readvalue" id="ref-for-dom-bluetoothremotegattcharacteristic-readvalue-1"><span class="nx">readValue</span><span class="p">()</span></a>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">sensorLocationData</span> <span class="o">=></span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">sensorLocation</span> <span class="o">=</span> <span class="nx">sensorLocationData</span><span class="p">.</span><span class="nx">getUint8</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">sensorLocation</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="mi">0</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Other'</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Chest'</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">2</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Wrist'</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">3</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Finger'</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">4</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Hand'</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">5</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Ear Lobe'</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">6</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Foot'</span><span class="p">;</span>
      <span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="s1">'Unknown'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">location</span> <span class="o">=></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">location</span><span class="p">));</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleHeartRateMeasurementCharacteristic</span><span class="p">(</span><span class="nx">characteristic</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">characteristic</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'</span><a class="idl-code" data-link-type="event" href="#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged" id="ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-1"><span class="s1">characteristicvaluechanged</span></a><span class="s1">'</span><span class="p">,</span> <span class="nx">onHeartRateChanged</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">characteristic</span><span class="p">.</span><a data-link-type="functionish" href="#dom-bluetoothremotegattcharacteristic-startnotifications" id="ref-for-dom-bluetoothremotegattcharacteristic-startnotifications-1"><span class="nx">startNotifications</span><span class="p">()</span></a><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">onHeartRateChanged</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">characteristic</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parseHeartRate</span><span class="p">(</span><span class="nx">characteristic</span><span class="p">.</span><a class="idl-code" data-link-type="attribute" href="#dom-bluetoothremotegattcharacteristic-value" id="ref-for-dom-bluetoothremotegattcharacteristic-value-1"><span class="nx">value</span></a><span class="p">));</span>
<span class="p">}</span>
</pre>
      <p><code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-1">BluetoothRemoteGATTCharacteristic</a></code> の <code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattcharacteristic-value" id="ref-for-dom-bluetoothremotegattcharacteristic-value-2">value</a></code> の中でストアされた <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> を読み取るために <a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml#"><code>heart_rate_measurement</code></a> ドキュメントの中で定義されている。</p>
<pre class="highlight"><span></span><span class="kd">function</span> <span class="nx">parseHeartRate</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">flags</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getUint8</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">rate16Bits</span> <span class="o">=</span> <span class="nx">flags</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="kd">let</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">rate16Bits</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">heartRate</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getUint16</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="cm">/*littleEndian=*/</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">index</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">heartRate</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getUint8</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
    <span class="nx">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">contactDetected</span> <span class="o">=</span> <span class="nx">flags</span> <span class="o">&amp;</span> <span class="mh">0x2</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">contactSensorPresent</span> <span class="o">=</span> <span class="nx">flags</span> <span class="o">&amp;</span> <span class="mh">0x4</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">contactSensorPresent</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">contactDetected</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">contactDetected</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">energyPresent</span> <span class="o">=</span> <span class="nx">flags</span> <span class="o">&amp;</span> <span class="mh">0x8</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">energyPresent</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">energyExpended</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">getUint16</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="cm">/*littleEndian=*/</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">index</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">let</span> <span class="nx">rrIntervalPresent</span> <span class="o">=</span> <span class="nx">flags</span> <span class="o">&amp;</span> <span class="mh">0x10</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">rrIntervalPresent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">rrIntervals</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(;</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">;</span> <span class="nx">index</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">rrIntervals</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">getUint16</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="cm">/*littleEndian=*/</span><span class="kc">true</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">rrIntervals</span> <span class="o">=</span> <span class="nx">rrIntervals</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>
</pre>
      <p><code>onHeartRateChanged()</code> はオブジェクトのように記録する：</p>
<pre class="highlight"><span></span><span class="p">{</span>
  <span class="nx">heartRate</span><span class="o">:</span> <span class="mi">70</span><span class="p">,</span>
  <span class="nx">contactDetected</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">energyExpended</span><span class="o">:</span> <span class="mi">750</span><span class="p">,</span>     <span class="c1">// Meaning 750kJ.</span>
  <span class="nx">rrIntervals</span><span class="o">:</span> <span class="p">[</span><span class="mi">890</span><span class="p">,</span> <span class="mi">870</span><span class="p">]</span>  <span class="c1">// Meaning .87s and .85s.</span>
<span class="p">}</span>
</pre>
      <p>もし心拍数モニターが <code>energyExpended</code> をレポートすれば、ウェブアプリケーションは <code class="idl"><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_control_point.xml#">heart_rate_control_point</a></code> characteristic を書き換えることで、その値を 0 にリセットすることが出来る：</p>
<pre class="highlight"><span class="kd">function</span> <span class="nx">resetEnergyExpended</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">chosenHeartRateService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'No heart rate sensor selected yet.'</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">chosenHeartRateService</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothremotegattservice-getcharacteristic" id="ref-for-dom-bluetoothremotegattservice-getcharacteristic-3"><span class="nx">getCharacteristic</span></a><span class="p">(</span><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_control_point.xml#"><span class="s1">'heart_rate_control_point'</span></a><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">controlPoint</span> <span class="o">=></span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">resetEnergyExpended</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">([</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">controlPoint</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothremotegattcharacteristic-writevalue" id="ref-for-dom-bluetoothremotegattcharacteristic-writevalue-1"><span class="nx">writeValue</span></a><span class="p">(</span><span class="nx">resetEnergyExpended</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>
</pre>
     </div>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="security-and-privacy"><span class="secno">2. </span><span class="content">セキュリティとプライバシーへの配慮</span><a class="self-link" href="#security-and-privacy"></a></h2>
    <section>
     <h3 class="heading settled" data-level="2.1" id="device-access-is-powerful"><span class="secno">2.1. </span><span class="content">強力なデバイスへのアクセス</span><a class="self-link" href="#device-access-is-powerful"></a></h3>
    <p>ウェブサイトが <code class="idl"><a data-link-type="idl" href="#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice-2">requestDevice()</a></code> を用いてデバイスへアクセス要求する時、呼び出しで指定された GATT service の全てにアクセスできるようになります。UA は、どのデバイスを信用するか確認する前に、このサービスがウェブサイトに何の機能を与えるのか、ユーザーに通知しなければなりません。UA がまだ知らない service がリストにある場合、UA は、デバイスの完全なコントロールをこのサイトに与えることを想定し、リスクをユーザーに通知しなければなりません。また、UA はどのサイトが何のデバイスにアクセスするのか、をユーザは調べることができ、ペアリングを<a data-link-type="dfn" href="#revoke-bluetooth-access" id="ref-for-revoke-bluetooth-access-1">取り消す</a>ことができるようにもしなければなりません。</p>
    <p>UA は、ユーザーがデバイスの全クラスをウェブサイトとペアリングできるようにしてはいけません。個別デバイス毎に同一 Bluetooth レベルの識別情報を送信するデバイスクラスを構成することが可能です。UA はこの種の偽装を検出する必要はなく、ユーザーに疑似デバイスをウェブサイトとペアリングさせてもかまいません。</p>
    <p>この仕様は<a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">セキュアなコンテクスト</a>だけが Bluetoothデバイス( <a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-1">requestDevice</a> )にアクセス可能であることを要求することによって、ユーザーがアクセスを承認したエンティティのみ実際にアクセスできることを保証します。</p>
    </section>
    <section class="non-normative">
      <h3 class="heading settled" data-level="2.2" id="server-takeovers"><span class="secno">2.2. </span><span class="content">Trusted servers can serve malicious code</span><a class="self-link" href="#server-takeovers"></a></h3>
       <p><em>This section is non-normative.</em></p>
       <p>
         ユーザがオリジンを信頼した場合であっても、オリジンのサーバや開発者は危険にさらされる可能性があります、あるいはオリジンのサイトはXSS攻撃に遭う脆弱性を持つこともありえます。いずれも、大切なデバイスに、悪質なコードへのアクセスをユーザが許可してしまうことにつながる可能性があります。オリジンは、XSS攻撃のリスクを低減するために、コンテンツセキュリティポリシィ( Content Security Policy, <a data-link-type="biblio" href="#biblio-csp3">[CSP3]</a>)を定義する必要があります。しかし、これはサーバや開発者を危険にさらす手助けにはなりません。</p>
       <p><a href="#permission-api-integration">§3.1 Permission API Integration</a> によって提供されるページのリロード後に承諾されたデバイスを取得する機能は、このリスクを悪化させます。サイトが危険にさらされている間、ユーザが単に訪問した場合に、ユーザがアクセスを承諾する代わりに、攻撃者は以前に承諾されたデバイスを利用することができます。一方で、サイトがデバイスの横断的なページのリロードへのアクセスを保持できる場合に、サイトは、ユーザがより注意を払って見るようにするために、多くのパーミッションプロンプトを示す必要はありません。</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="2.3" id="attacks-on-devices"><span class="secno">2.3. </span><span class="content">デバイスへの攻撃</span><a class="self-link" href="#attacks-on-devices"></a></h3>
     <p><em>このセクションは参考です。</em></p>
     <p>ウェブサイトからの通信によりデバイスのセキュリティモデルが破たんする場合があります。リモートデバイスの信頼できるオペレーティングシステムからのメッセージを受信するだけの仮定をしているからです。ヒューマンインターフェースデバイスは顕著な事例で、ウェブサイトへの通信を許可すれば、そのサイトでキーストロークを採取できるようになるでしょう。ウェブサイトの悪用を防止するため、本仕様書にはそのような脆弱な Service、Characteristic、Discriptor の blacklist が含まれています。</p>
     <p>予期しないデータを無線で送信する脆弱性があるデバイスが多数あると本仕様書では想定しています。これまでは、デバイス一台ずつ攻撃する必要がありましたが、本APIを利用すれば大規模に攻撃することも可能です。本仕様書は、そのような攻撃を困難にする試みをいくつか採用しています。：</p>
     <ul>
      <li>デバイスクラスの代わりに個別デバイスをペアリングする際には、デバイスが悪用される前に少なくとも一回のユーザーアクションが必要になります。</li>
      <li>包括的なバイトストリームアクセスではなく、<a data-link-type="dfn" href="#generic-attribute-profile" id="ref-for-generic-attribute-profile-2">GATT</a> へのアクセスに制限すれば、悪意あるウェブサイトからのデバイスの大半のパーサーへのアクセスを拒否できます。<p></p>一方、GATT の <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-2">characteristic</a> と <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-2">descriptor</a> の値はいまだにバイト配列で、デバイスが想定しない長さ、形式でセットされる可能性があります。UA は、できれば、これらの値を確認することが推奨されます。 </li>
      <li>本APIでは、ウェブサイトに Bluetooth のアドレス、署名データや暗号キー(<a data-link-type="dfn" href="#definition-of-keys-and-values" id="ref-for-definition-of-keys-and-values-1">キーと値の定義</a>)を公開しません。この結果、無線で送信されるビットデータの予測が困難で、<a href="https://www.usenix.org/legacy/events/woot11/tech/final_files/Goodspeed.pdf">パケット・イン・パケット・インジェクション攻撃</a>を阻止します。残念ながら、この方法は暗号化されたリンク上でのみ効果があり、BLEデバイス全てでサポートする必要はありません。</li>
     </ul>
     <p> また、UA は、ユーザー保護のため、さらに対策を講じることも可能です： </p>
     <ul>
      <li>悪意あるウェブサイトと脆弱なデバイスの一覧をウェブサービスで収集することができます。悪意あるウェブサイトから全デバイスへのアクセス、全ウェブサイトから脆弱なデバイスへのアクセスを UA で拒否できます。
     </ul>
    </section>
    <section>
     <h3 class="heading settled" data-level="2.4" id="bluetooth-device-identifiers"><span class="secno">2.4. </span><span class="content">Bluetooth デバイス識別子</span><a class="self-link" href="#bluetooth-device-identifiers"></a></h3>
     <p><em>このセクションは参考です。</em></p>
     <p>各 Bluetooth ( BR/EDR )デバイスには、<a data-link-type="dfn" href="#bd_addr" id="ref-for-bd_addr-1">BD_ADDR</a> と呼ばれる48ビットのユニークなMACアドレスがあります。各BLEデバイスには<a data-link-type="dfn" href="#public-device-address" id="ref-for-public-device-address-1">Public Device Address</a> が少なくとも１つと <a data-link-type="dfn" href="#static-device-address" id="ref-for-static-device-address-1">Static Device Address</a> が１つあります。<a data-link-type="dfn" href="#public-device-address" id="ref-for-public-device-address-2">Public Device Address</a> は MACアドレスです。<a data-link-type="dfn" href="#static-device-address" id="ref-for-static-device-address-2">Static Device Address</a> はリスタート毎に生成されるかもしれません。BR/EDR/LEデバイスは、( <a data-link-type="dfn" href="#bd_addr" id="ref-for-bd_addr-2">BD_ADDR</a> を読み取るコマンドで指定された) <a data-link-type="dfn" href="#bd_addr" id="ref-for-bd_addr-3">BD_ADDR</a>と<a data-link-type="dfn" href="#public-device-address" id="ref-for-public-device-address-3">Public Device Address<</a> は同一の値を使用します。</p>
    <p>また、BLEデバイスには、ユニークな128ビットの IRK ( <a data-link-type="dfn" href="#identity-resolving-key" id="ref-for-identity-resolving-key-1">Identity Resolving Key</a> )と呼ばれる鍵があり、ボンディングプロセス中に信頼されたデバイスに送信されます。永続的な識別子の漏えいを避けるため、BLEデバイスは、ランダムな 検証可能(Resolvable) または 検証不可能(Non-Resolvable) な <a data-link-type="dfn" href="#private-address" id="ref-for-private-address-1">Private Address</a> を Static または Public Device Address の代わりに使用し、スキャンとアドバタイズすることが可能です。これらは周期的 (約15分毎）に生成されますが、ボンディングされたデバイスは、格納された <a data-link-type="dfn" href="#identity-resolving-key" id="ref-for-identity-resolving-key-2">IRK</a> の中に検証可能なプライベートアドレスとマッチするものがあるか、 <a data-link-type="dfn" href="#resolvable-private-address-resolution-procedure" id="ref-for-resolvable-private-address-resolution-procedure-1">Resolvable Private Address Resolution Procedure</a> を用いてのチェックが可能です。</p>
      <p>また、各Bluetoothデバイスには、人間が読める形式の <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-1">Bluetooth Device Name</a> が定義されています。これらはユニークである保証はありませんが、デバイスタイプによっては多分ユニークでしょう。</p>

     <section>
      <h4 class="heading settled" data-level="2.4.1" id="remote-device-identifiers"><span class="secno">2.4.1. </span><span class="content">リモート Bluetooth デバイスの識別子</span><a class="self-link" href="#remote-device-identifiers"></a></h4>
      <p><em>このセクションは参考です。</em></p>
      <p>ウェブサイトが永続的にデバイスIDを取得できる場合、周囲に存在するデバイスのカタログを作成という多大な努力を行えば、ユーザーの位置を発見するために使用できます。また、デバイスIDを使えば、異なる２つのウェブサイトに同じBluetoothデバイスでペアリングしているユーザーが同一ユーザーだと特定することも可能です。一方、 デバイスの身元を突き止めるために使用できる多数の GATT service が利用でき、この作業がさらに簡単になるよう、デバイスはカスタム GATT service を公開しています。</p>
       <p>
         本仕様書では、ユーザは、スクリプトが単一のデバイスであると学習させようとしない場合、UA が異なるデバイス ID を単一のデバイスに使用することを<a href="note-device-id-tracking">提案</a>し、ウェブサイトがデバイスアドレスを悪用するのを困難にしています。デバイスメーカーは、ユーザー追跡を助けるデバイスを設計できますが、ひと仕事が必要となります。</p>
     </section>
     <section>
      <h4 class="heading settled" data-level="2.4.2" id="ua-bluetooth-address"><span class="secno">2.4.2. </span><span class="content">UA のBluetooth アドレス</span><a class="self-link" href="#ua-bluetooth-address"></a></h4>
      <p><em>このセクションは参考です。</em></p>
      <p>BR/EDRモード または <a data-link-type="dfn" href="#privacy-feature" id="ref-for-privacy-feature-1">セキュリティ要件(Privacy Feature)</a> なしでアクティブスキャニング中のLEモードでは、UA は永続的なIDを近隣のBluetooth無線にブロードキャストします。これは、周辺に敵意あるデバイスをばらまきやすくなり、 UA の追跡が簡単になります。2014年8月時点では、 <a data-link-type="dfn" href="#privacy-feature" id="ref-for-privacy-feature-2">セキュリティ要件(Privacy Feature)</a> を実装したと文書化したプラットフォームはほとんどありません。従って、本仕様では推奨していますが、 これを使うことになるUA はほとんどなさそうです。本仕様では、ウェブサイトがスキャンを開始するには<a href="#requestDevice-user-gesture">ユーザージェスチャーが必要</a>で、スキャン頻度をいくらか少なくします。多くのプラットフォームでは、<a data-link-type="dfn" href="#privacy-feature" id="ref-for-privacy-feature-3">セキュリティ要件(Privacy Feature)</a> を公開する方がもっと良いのでしょう。</p>

     </section>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="device-discovery"><span class="secno">3. </span><span class="content">デバイスの検索</span><span id="requestDevice-secure-context"></span><a class="self-link" href="#device-discovery"></a></h2>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</dfn> {
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-1">BluetoothServiceUUID</a>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<BluetoothServiceUUID> " href="#dom-bluetoothrequestdevicefilter-services" id="ref-for-dom-bluetoothrequestdevicefilter-services-1">services</a>;
  <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="dict-member" data-type="DOMString " href="#dom-bluetoothrequestdevicefilter-name" id="ref-for-dom-bluetoothrequestdevicefilter-name-1">name</a>;
  <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="dict-member" data-type="DOMString " href="#dom-bluetoothrequestdevicefilter-nameprefix" id="ref-for-dom-bluetoothrequestdevicefilter-nameprefix-1">namePrefix</a>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-requestdeviceoptions">RequestDeviceOptions</dfn> {
  <span class="kt">required</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#dictdef-bluetoothrequestdevicefilter" id="ref-for-dictdef-bluetoothrequestdevicefilter-1">BluetoothRequestDeviceFilter</a>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<BluetoothRequestDeviceFilter> " href="#dom-requestdeviceoptions-filters" id="ref-for-dom-requestdeviceoptions-filters-1">filters</a>;
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-2">BluetoothServiceUUID</a>> <a class="nv idl-code" data-default="None" data-link-type="dict-member" data-type="sequence<BluetoothServiceUUID> " href="#dom-requestdeviceoptions-optionalservices" id="ref-for-dom-requestdeviceoptions-optionalservices-1">optionalServices</a> = [];
};

<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="bluetooth">Bluetooth</dfn> {
  [<a class="nv idl-code" data-link-type="extended-attribute">SecureContext</a>]
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-1">BluetoothDevice</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice?" href="#dom-bluetooth-referringdevice" id="ref-for-dom-bluetooth-referringdevice-1">referringDevice</a>;
  [<a class="nv idl-code" data-link-type="extended-attribute">SecureContext</a>]
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-2">BluetoothDevice</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice-3">requestDevice</a>(<a class="n" data-link-type="idl-name" href="#dictdef-requestdeviceoptions" id="ref-for-dictdef-requestdeviceoptions-1">RequestDeviceOptions</a> <dfn class="nv idl-code" data-dfn-for="Bluetooth/requestDevice(options)" data-dfn-type="argument" data-export="" id="dom-bluetooth-requestdevice-options-options">options<a class="self-link" href="#dom-bluetooth-requestdevice-options-options"></a></dfn>);
};
<a class="n" data-link-type="idl-name" href="#bluetooth" id="ref-for-bluetooth-2">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetooth" id="ref-for-bluetooth-3">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#bluetoothdeviceeventhandlers" id="ref-for-bluetoothdeviceeventhandlers-1">BluetoothDeviceEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetooth" id="ref-for-bluetooth-4">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers" id="ref-for-characteristiceventhandlers-1">CharacteristicEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetooth" id="ref-for-bluetooth-5">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#serviceeventhandlers" id="ref-for-serviceeventhandlers-1">ServiceEventHandlers</a>;
</pre>
    <div class="note no-marker" role="note">
     <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-6">Bluetooth</a></code> members</div>
     <p> <code class="idl"><a data-link-type="idl" href="#dom-bluetooth-referringdevice" id="ref-for-dom-bluetooth-referringdevice-2">referringDevice</a></code> は、このページをユーザが開いて、そこからデバイスへのアクセスを提供することがあります。例えば、<a href="https://developers.google.com/beacons/eddystone">Eddystone</a> ビーコンでは、UA は、ユーザが開くことができる URL をアドバライスするかもしれません。ビーコンを表す <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-3">BluetoothDevice</a></code> は <code>navigator.bluetooth.<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-referringdevice" id="ref-for-dom-bluetooth-referringdevice-3">referringDevice</a></code></code> を通じて利用できるようになります。</p>
     <p> <code class="idl"><a data-link-type="idl" href="#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice-4">requestDevice(options)</a></code> は、<code>options.<dfn class="dfn-paneled idl-code" data-dfn-for="RequestDeviceOptions" data-dfn-type="dict-member" data-export="" id="dom-requestdeviceoptions-filters">filters</dfn></code> の<a data-link-type="dfn" href="#matches-a-filter" id="ref-for-matches-a-filter-1">いずれのフィルターにマッチ</a>するデバイスへのオリジンアクセスを与えるよう、ユーザに求めます。<a data-link-type="dfn" href="#matches-a-filter" id="ref-for-matches-a-filter-2">フィルターにマッチ</a>するには、デバイスには以下が必要です：</p>
     <ul>
      <li>該当メンバーが存在する場合、<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRequestDeviceFilter" data-dfn-type="dict-member" data-export="" id="dom-bluetoothrequestdevicefilter-services">services</dfn> リストにある<em>全て</em>の GATT service UUID をサポートすること。
      <li>該当メンバーが存在する場合、<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRequestDeviceFilter" data-dfn-type="dict-member" data-export="" id="dom-bluetoothrequestdevicefilter-name">name</dfn> と同じ名前があること。
      <li>該当メンバーが存在する場合、<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRequestDeviceFilter" data-dfn-type="dict-member" data-export="" id="dom-bluetoothrequestdevicefilter-nameprefix">namePrefix</dfn> で始まる名前があること。
     </ul>
     <p>ユーザがこのオリジンとペアリングするためにデバイスを選択した後で、<code>options.filters</code> のいずれかのエレメントにある <code class="idl"><a data-link-type="idl" href="#dom-bluetoothrequestdevicefilter-services" id="ref-for-dom-bluetoothrequestdevicefilter-services-2">services</a></code> リスト、または <code>options.<dfn class="dfn-paneled idl-code" data-dfn-for="RequestDeviceOptions" data-dfn-type="dict-member" data-export="" id="dom-requestdeviceoptions-optionalservices">optionalServices</dfn></code> にリストされている service で UUID を持つもの全部へのアクセスがオリジンに許可されます。</p>
     <p>これは、開発者が名前だけでフィルターすれば、どんな service へアクセスするにも <code class="idl"><a data-link-type="idl" href="#dom-requestdeviceoptions-optionalservices" id="ref-for-dom-requestdeviceoptions-optionalservices-2">optionalServices</a></code> を使用しなければならないことを意味します。</p>
    </div>
    <div class="example" id="example-filter-by-services">
     <a class="self-link" href="#example-filter-by-services"></a>
     <p> UA が次のデバイスの近くにあるとしましょう： </p>
     <table class="data">
      <thead>
       <tr>
        <th>Device
        <th>Advertised Services
      <tbody>
       <tr>
        <td>D1
        <td>A, B, C, D
       <tr>
        <td>D2
        <td>A, B, E
       <tr>
        <td>D3
        <td>C, D
       <tr>
        <td>D4
        <td>E
       <tr>
        <td>D5
        <td><i>&lt;none></i>
     </table>
     <p>ウェブサイトが次のようにコールすると</p>
<pre class="highlight"><span></span><span class="nx">navigator</span><span class="p">.</span><span class="nx">bluetooth</span><span class="p">.</span><span class="nx">requestDevice</span><span class="p">({</span>
  <span class="nx">filters</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span><span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">]}</span> <span class="p">]</span>
<span class="p">});</span>
</pre>
     <p>ユーザーにデバイスD1とD2を含んだダイアログが表示されます。ユーザーがD1を選択したら、ウェブサイトはサービスC、Dにはアクセスできません。ユーザーがD2を選択すれば、ウェブサイトはサービスEにはアクセスできません。</p>
     <p>一方、ウェブサイトが次のようにコールすると</p>
<pre class="highlight"><span></span><span class="nx">navigator</span><span class="p">.</span><span class="nx">bluetooth</span><span class="p">.</span><span class="nx">requestDevice</span><span class="p">({</span>
  <span class="nx">filters</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">]},</span>
    <span class="p">{</span><span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="nx">C</span><span class="p">,</span> <span class="nx">D</span><span class="p">]}</span>
  <span class="p">]</span>
<span class="p">});</span>
</pre>
     <p>ダイアログにはデバイスD1、D2、D3が含まれ、ユーザがD1を選択したら、ウェブサイトはサービスA、B、C、Dにアクセスできます。</p>
     <p><code>optionalServices</code> は、ユーザーが見ているダイアログにデバイスも追加せず、ユーザーが選んだデバイスからどのサービスをウェブサイトが使用できるかに影響を与えます。</p>
<pre class="highlight"><span></span><span class="nx">navigator</span><span class="p">.</span><span class="nx">bluetooth</span><span class="p">.</span><span class="nx">requestDevice</span><span class="p">({</span>
  <span class="nx">filters</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span><span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">]}</span> <span class="p">],</span>
  <span class="nx">optionalServices</span><span class="o">:</span> <span class="p">[</span><span class="nx">E</span><span class="p">]</span>
<span class="p">});</span>
</pre>
     <p>D1、D2を含み、D4を含まないダイアログを表示します。D4は必要なサービスが含まないからです。ユーザーがD2を選択した場合、最初の例とは異なり、ウェブサイトはサービスA、B、Eにアクセスできます。</p>
     <p>ユーザがアクセスを許可した後にデバイスが変化しても、許可されたサービスは適用されます。例えば、ユーザーが前の <code>requestDevice()</code>  コールでD1を選択し、後でD1が新しいサービスEを追加した場合、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-serviceadded" id="ref-for-eventdef-bluetoothremotegattservice-serviceadded-1">serviceadded</a></code> イベントが開始され、ウェブページはサービスEをアクセスすることができます。</p>
    </div>
    <div class="example" id="example-filter-by-name">
     <a class="self-link" href="#example-filter-by-name"></a>
     <p><a href="#example-filter-by-services">前の例</a>で、デバイスが以下のように名前もアドバタイズしたとします：</p>
     <table class="data">
      <thead>
       <tr>
        <th>Device
        <th>Advertised Device Name
      <tbody>
       <tr>
        <td>D1
        <td>First De…
       <tr>
        <td>D2
        <td><i>&lt;none></i>
       <tr>
        <td>D3
        <td>Device Third
       <tr>
        <td>D4
        <td>Device Fourth
       <tr>
        <td>D5
        <td>Unique Name
     </table>
     <p>以下のテーブルには、<code>navigator.bluetooth.requestDevice({filters: <var>filters</var>})</code> に渡された <var>filters</var> の値として、どのデバイスをユーザーが選択できるかを示しています。</p>
     <table class="data">
      <thead>
       <tr>
        <th><var>filters</var>
        <th>Devices
        <th>Notes
      <tbody>
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Unique Name"</span><span class="p">}]</span>
</pre>
        <td>D5
        <td>
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{</span><span class="nx">namePrefix</span><span class="o">:</span> <span class="s2">"Device"</span><span class="p">}]</span>
</pre>
        <td>D3, D4
        <td>
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"First De"</span><span class="p">},</span>
 <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"First Device"</span><span class="p">}]</span>
</pre>
        <td><i>&lt;none></i>
        <td> D1 は地震の name の prefix のみをアドバタイズするので、name 全体とマッチさせようとすると失敗します。
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{</span><span class="nx">namePrefix</span><span class="o">:</span> <span class="s2">"First"</span><span class="p">},</span>
 <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Unique Name"</span><span class="p">}]</span>
</pre>
        <td>D1, D5
        <td>
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{</span><span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="nx">C</span><span class="p">],</span>
  <span class="nx">namePrefix</span><span class="o">:</span> <span class="s2">"Device"</span><span class="p">},</span>
 <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"Unique Name"</span><span class="p">}]</span>
</pre>
        <td>D3, D5
        <td>
     </table>
    </div>
    <div class="example" id="example-disallowed-filters">
     <a class="self-link" href="#example-disallowed-filters"></a>
     <p> 可能なデバイスを全て accept または reject するフィルターは <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> が発生します。</p>
     <table class="data">
      <thead>
       <tr>
        <th><var>filters</var>
        <th>Notes
      <tbody>
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[]</span>
</pre>
        <td>フィルターリストが空であれば、デバイスを一切 accept しません。
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{}]</span>
</pre>
        <td>フィルターリストが空であれば、デバイス全てを accept するので、これも許可されません。
       <tr>
        <td>
<pre class="highlight"><span></span><span class="p">[{</span><span class="nx">namePrefix</span><span class="o">:</span> <span class="s2">""</span><span class="p">}]</span>
</pre>
        <td><code>namePrefix</code> がある場合、デバイスをフィルターするため空でないものとします。
     </table>
    </div>
    <p><code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-7">Bluetooth</a></code> のインスタンスは、以下のテーブルで説明される内部スロットを用いて生成されます：</p>
    <table class="data">
     <thead>
      <tr>
       <th>内部スロット
       <th>初期値
       <th>説明(参考)
     <tbody>
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="Bluetooth" data-dfn-type="attribute" data-export="" id="dom-bluetooth-deviceinstancemap-slot">[[deviceInstanceMap]]</dfn>
       <td><a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-1">Bluetooth device</a> から <code><code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-4">BluetoothDevice</a></code></code> インスタンスへの空のマップ
       <td>１つのグローバルオブジェクト内で、各 <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-2">Bluetooth デバイス</a> を表す <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-5">BluetoothDevice</a></code> インスタンスはただ１つしかないことを保証します。
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="Bluetooth" data-dfn-type="attribute" data-export="" id="dom-bluetooth-attributeinstancemap-slot">[[attributeInstanceMap]]</dfn>
       <td><a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-1">Bluetooth cache</a> エントリー から <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></code> への空のマップ。
       <td>この <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></code> は、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-1">BluetoothRemoteGATTService</a></code>、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-2">BluetoothRemoteGATTCharacteristic</a></code>、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-1">BluetoothRemoteGATTDescriptor</a></code> のいずれかのインスタンスに resolve されます。
      <tr>
       <td><dfn class="dfn-paneled idl-code" data-dfn-for="Bluetooth" data-dfn-type="attribute" data-export="" id="dom-bluetooth-referringdevice-slot">[[referringDevice]]</dfn>
       <td> <code>null</code>
       <td> <code>Document</code> がデバイスから開かれている場合、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#initialise-the-document-object"><code>Document</code> オブジェクトを初期化</a>している間に <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-6">BluetoothDevice</a></code> にセットします。
    </table>
    <p> <code>navigator.bluetooth.<dfn class="dfn-paneled idl-code" data-dfn-for="Bluetooth" data-dfn-type="attribute" data-export="" id="dom-bluetooth-referringdevice">referringDevice</dfn></code> を取得するには、<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-referringdevice-slot" id="ref-for-dom-bluetooth-referringdevice-slot-1">[[referringDevice]]</a></code> を必ず返さなければなりません。</p>
     <p>いくつかの UA は、ユーザが <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-3">Bluetooth device</a> に応答して <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#navigate">navigate</a> するブラウジングコンテキスト( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a> )を引き起こすことを可能にします。<span class="note" role="note"> 例えば、<a href="https://developers.google.com/beacons/eddystone">Eddystone</a> ビーコンは、URLをアドバタイズした場合、 UA は、ユーザがこの URL に移動することを可能にします。</span> これが発生した場合、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#initialise-the-document-object">新しい <code>Document</code> オブジェクトの初期化</a>の一環として、UA は以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
       <li> <var>referringDevice</var> を navigation を発生させたデバイスにします。
       <li> <code>navigator.bluetooth</code> 内部の <var>referringDevice</var> を表す <a data-link-type="dfn" href="#get-the-bluetoothdevice-representing" id="ref-for-get-the-bluetoothdevice-representing-1"><code>BluetoothDevice</code> を取得</a>し、<var>referringDeviceObj</var> を結果にします。
       <li>以前のステップで例外をスローした場合、以下のステップを中止します。
         <p class="note" role="note">注記: これは、UA は、ユーザが <var>referringDevice</var> に現在の <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a> のアクセス件を承諾するであろうと推測していなかったことを意味します。例えば、ユーザはグローバルに GATT へのアクセスを拒否された可能性があります。</p>
       <li> <code>navigator.bluetooth@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-referringdevice-slot" id="ref-for-dom-bluetooth-referringdevice-slot-2">[[referringDevice]]</a></code></code> を <var>referringDeviceObj</var> にセットします。
     </ol>
    <p>以下のステップで <code>match</code> が返された場合、<a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-4">Bluetooth device</a> は <dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="match a filter|matches any filter" data-lt="matches a filter" data-noexport="" id="matches-a-filter"> filter<span class="dfn-panel" data-deco=""><b><a href="#matches-a-filter">#matches-a-filter</a></b><b>Referenced in:</b><span><a href="#ref-for-matches-a-filter-1">3. Device Discovery</a> <a href="#ref-for-matches-a-filter-2">(2)</a> <a href="#ref-for-matches-a-filter-3">(3)</a></span></span></dfn> にマッチします。： </p>
    <ol class="algorithm">
     <li><code><var>filter</var>.name</code> が存在し、<var>device</var> の <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-2">Bluetooth Device Name</a> が完全ではなく、<code><var>filter</var>.name</code> と一致しない場合、<code>mismatch</code> を返します。
     <li><code><var>filter</var>.namePrefix</code> が存在し、<var>device</var> の <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-3">Bluetooth Device Name</a> が存在しないまたは <code><var>filter</var>.namePrefix</code> で始まらない場合、<code>mismatch</code> を返します。
     <li><code><var>filter</var>.services</code> の各 <var>uuid</var> に対して、デバイスが UUID <var>uuid</var> を持つプライマリ(含まれているのではなく)サービスのサポートを示しているアドバタイジングデータ、拡張要求応答( <a data-link-type="dfn" href="#extended-inquiry-response" id="ref-for-extended-inquiry-response-1">extended inquiry response</a> ) または サービス検索応答( service discovery response ) を UAが受信していない場合、<code>mismatch</code> を返します。
     <li><code>match</code> を返します。
    </ol>
    <p class="note" role="note"> デバイスがアドバタイズする Service UUID のリストには、デバイスがサポートする全ての UUID が含まれない場合があります。アドバタイズされるデータは、リストが完全かどうか指定します。ウェブサイトは、近隣のデバイスがサポートはするがアドバタイズしない UUID をフィルターする場合、そのデバイスはユーザに提供されるデバイスリストには含まれていない可能性があります。サポートサービスの完全なリストを検索するため、UA はデバイスと接続する必要がありますが、無線性能の劣化や遅延が起こり得るため本仕様では要求していません。</p>
    <p><code><dfn class="dfn-paneled idl-code" data-dfn-for="Bluetooth" data-dfn-type="method" data-export="" id="dom-bluetooth-requestdevice">requestDevice(<var>options</var>)</dfn></code> メソッドは、呼び出されると<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。：</p>
    <ol class="algorithm">
      <li>
        <code><var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-requestdeviceoptions-filters" id="ref-for-dom-requestdeviceoptions-filters-2">filters</a></code></code> と <code><var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-requestdeviceoptions-optionalservices" id="ref-for-dom-requestdeviceoptions-optionalservices-3">optionalServices</a></code></code> を渡しながら <a data-link-type="dfn" href="#request-bluetooth-devices" id="ref-for-request-bluetooth-devices-1">Bluetooth devices をリクエスト</a>し、<var>devices</var> を結果にします。
      <li>以前のステップで例外をスローした場合、その例外とともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li> <code><var>devices</var>[0]</code> とともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">Resolve</a> します。
    </ol>
     <p> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="request-bluetooth-devices">Bluetooth devices をリクエストする</dfn>には、<code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothrequestdevicefilter" id="ref-for-dictdef-bluetoothrequestdevicefilter-2">BluetoothRequestDeviceFilter</a></code> のシーケンス、 <var>filters</var>、<code class="idl"><a data-link-type="idl" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-3">BluetoothServiceUUID</a></code> のシーケンス、および <var>optionalServices</var> が与えられると、UA は以下のステップを実行しなけれなばりません。：</p>
     <p class="note" role="note"> このアルゴリズムの呼び出しは、最終的に複数のデバイスをリクエストできるようになりますが、今のところは単一のデバイスのみを返します。</p>
     <ol class="algorithm">
      <li id="requestDevice-user-gesture"><a class="self-link" href="#requestDevice-user-gesture"></a>アルゴリズムが<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#triggered-by-user-activation">ユーザの動作によって引き起こされ</a>ていない場合は、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> をスローし、以下のステップを中止します。
     <li>service 名とエイリアスからただの <a data-link-type="dfn" href="#uuid" id="ref-for-uuid-1">UUID</a> に引数を変換するために、以下のサブステップを実行します。：
      <ol>
       <li><code><var>filters</var>.length === 0</code> の場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローし、以下のステップを中止します。
        <li><var>uuidFilters</var> を新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a></code> に、<var>requiredServiceUUIDs</var> を新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-set-objects">Set</a></code> にします。
       <li>
         <code><var>filters</var></code> の各 <var>filter</var> に対して、以下のサブステップを実行します:
        <ol>
         <li><var>filter</var>の<code>services</code>、<code>name</code>、<code>namePrefix</code> メンバーがいずれも存在しない場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローし、以下のステップを中止します。
         <li><var>canonicalizedFilter</var> を <code>{}</code> にします。
         <li>
           <code><var>filter</var>.services</code> が存在する場合、以下のサブステップを実行します。：
          <ol>
           <li><code><var>filter</var>.services.length === 0</code> の場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローし、以下のステップを中止します。
           <li><var>services</var> を <code><code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-array.prototype.map">Array.prototype.map</a></code>.call(<var>filter</var>.services, <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-1">BluetoothUUID.getService</a></code>)</code> にします。
           <li><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-2">BluetoothUUID.getService()</a></code> で例外が発生した場合、例外をスローし、ステップを中止します。
           <li><var>services</var> の <var>service</var> のいずれかが <a data-link-type="dfn" href="#blacklisted" id="ref-for-blacklisted-1">blacklisted</a>  の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> をスローし、ステップを中止します。
           <li><code><var>canonicalizedFilter</var>.services</code> を <var>services</var> にセットします。
           <li><var>services</var> のエレメントを <var>requiredServiceUUIDs</var> に追加します。
          </ol>
         <li>
           <code><var>filter</var>.name</code> が存在する場合、以下のサブステップを実行します。
          <ol>
           <li>
             <code><var>filter</var>.name</code> の <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode">UTF-8 encoding</a> が248バイトを超える場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローし、以下のステップを中止します。
             <p class="note" role="note"> 248バイト は <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-4">Bluetooth Device Name</a> の UTF-8コードユニットの最大値です。</p>
           <li><code><var>canonicalizedFilter</var>.name</code> を <code><var>filter</var>.name</code> にセットします。
          </ol>
         <li>
           <code><var>filter</var>.namePrefix</code> が存在する場合、以下のサブステップを実行します。
          <ol>
           <li><code><var>filter</var>.namePrefix.length === 0</code> または <code><var>filter</var>.namePrefix</code> の <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode">UTF-8 encoding</a> が248バイトを超える場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローし、以下のステップを中止します。
           <p class="note" role="note"> 248バイト は <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-5">Bluetooth Device Name</a> の UTF-8コードユニットの最大値です。</p>
           <li><code><var>canonicalizedFilter</var>.namePrefix</code> を <code><var>filter</var>.namePrefix</code> にセットします。
          </ol>
         <li><var>canonicalizedFilter</var> を <var>uuidFilters</var> にアペンドします。
        </ol>
       <li><var>optionalServiceUUIDs</var> を <code><code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-array.prototype.map">Array.prototype.map</a></code>.call(<var>optionalServices</var>, <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-3">BluetoothUUID.getService</a></code>)</code> にします。
       <li><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-4">BluetoothUUID.getService()</a></code> で例外が発生した場合、例外をスローし、以下のステップを中止します。
       <li><var>optionalServiceUUIDs</var> から<a data-link-type="dfn" href="#blacklisted" id="ref-for-blacklisted-2">blacklisted</a> となっている UUID を削除します。
      </ol>
       <li>
         <var>descriptor</var> はこのようになります。
<pre class="highlight"><span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"bluetooth"</span><span class="p">,</span>
  <span class="nx">filters</span><span class="o">:</span> <var><span class="nx">uuidFilters</span></var><span class="p">,</span>
  <span class="nx">optionalServices</span><span class="o">:</span> <var><span class="nx">optionalServiceUUIDs</span></var><span class="p">,</span>
<span class="p">}</span>
</pre>
     <li><var>requiredServiceUUIDs</var> を <a data-link-type="dfn" href="#service" id="ref-for-service-2">Service</a> UUID</var> の集合として持つ<a data-link-type="dfn" href="#scan-for-devices" id="ref-for-scan-for-devices-1">デバイスをスキャン</a>し、<var>scanResult</var> をその結果とします。
     <li><var>uuidFilters</var> でフィルターにマッチしない場合、デバイスを <var>scanResult</var> から削除します。

      <li id="requestDevice-prompt">
      <a class="self-link" href="#requestDevice-prompt"></a><var>scanResult</var> が空の場合であっても、<var>descriptor</var> に関連付けられた <var>scanResult</var> 内のデバイスのいずれかを<a data-link-type="dfn" href="https://w3c.github.io/permissions/#prompt-the-user-to-choose">選択するようにユーザを促し</a>、<var>device</var> を結果にします。
      <p>UA は、<var>uuidFilters</var> にマッチしない、近隣のデバイスをユーザーが選択できる場合があります。 </p>
      <p class="note" role="note">UA は、ユーザに書くデバイスの人間に可読な名前を表示する必要があります。例えば、この名前が使用不可の場合、UA の Bluetooth システムはプライバシーを有効にして実行するスキャンをサポートしていないため、UA は、ユーザが関心を示すことを許可します。また、名前を取得するために、プライバシーを無効にしてスキャンを実行する必要があります。</p>
     <li> <var>device</var> が <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-denied">"denied"</a></code> の場合、<code>[]</code> を返し、以下のステップを中止します。
     <li class="note" role="note">
       <var>device</var> を選択することは、おそらく、ユーザが、少なくとも、現在の設定オブジェクト( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a> ) の <code class="idl"><a data-link-type="idl" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-2">"bluetooth"</a></code> の追加パーミッションデータ( <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a> ) の許可されたデバイスリスト( <code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondata-alloweddevices" id="ref-for-dom-bluetoothpermissiondata-alloweddevices-1">allowedDevices</a></code> list ) に表示するようにしていることを示しています。そして、<var>requiredServiceUUIDs</var> と <var>optionalServiceUUIDs</var> の和集合内の全ての service を、すでに存在している任意の service に加えて、その許可されたデバイスリスト( <code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-allowedservices" id="ref-for-dom-allowedbluetoothdevice-allowedservices-1">allowedServices</a></code> )に表示するようにしていることを示しています。
       <li> UA は  <var>device</var> 内の全ての Service とともに <a data-link-type="dfn" href="#populate-the-bluetooth-cache" id="ref-for-populate-the-bluetooth-cache-1">Bluetooth cache</a> を格納することができます。このステップでのエラーは無視します。
       <li> <var>device</var> 内の コンテキストオブジェクト( <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object">context object</a> )を表す <code>BluetoothDevice</code> を取得し、任意の例外を伝搬させ、<var>deviceObj</var> を結果とします。
       <li><code>[<var>deviceObj</var>]</code> を返します。
     </ol>
    <p>オプションの <var><a data-link-type="dfn" href="#service" id="ref-for-service-3">Service</a> UUID のセット</var>(デフォルトは全UUIDの集合)を用いて<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="scan-for-devices">デバイスのスキャン</dfn>をするには、UA は以下のステップを実行しなければなりません。：</p>
    <ol class="algorithm">
     <li>UA が最近デバイスをスキャンしたことがある場合、<span class="issue" id="issue-2f91a41d"><a class="self-link" href="#issue-2f91a41d"></a>TODO: 時間の分量を確定させる。</span> 現在のスキャン用の UUID のスーパーセットである UUID の集合を用いてスキャンしている場合、UAはそのスキャン結果を返し、ステップを中止することができます。
     <li><var>nearbyDevices</var> を <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-5">Bluetooth device</a> の集合とし、初期値は空です。
     <li>
       UA が LE トランスポートをサポートする場合、<a data-link-type="dfn" href="#general-discovery-procedure" id="ref-for-general-discovery-procedure-1">General Discovery Procedure</a> を実行し、発見した <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-6">Bluetooth device</a> を <var>nearbyDevices</var> に追加します。UA は<a data-link-type="dfn" href="#privacy-feature" id="ref-for-privacy-feature-4">Privacy Feature</a> を有効にする必要があります。
      <p class="issue" id="issue-8dbebcdc"><a class="self-link" href="#issue-8dbebcdc"></a><a data-link-type="dfn" href="#passive-scanning" id="ref-for-passive-scanning-1">passive scanning</a> と <a data-link-type="dfn" href="#privacy-feature" id="ref-for-privacy-feature-5">Privacy Feature</a> の両方で、ユニークかつ変更不可能なデバイスIDのリークを防止しています。どちらかを使用するよう UA に要求すべきですが、OS API にはどちらも公開するものがなさそうです。またBluetoothは <a data-link-type="dfn" href="#passive-scanning" id="ref-for-passive-scanning-2">passive scanning</a>  の使用が難しくなっています。<a data-link-type="dfn" href="#central" id="ref-for-central-4">Central</a> デバイスが <a data-link-type="dfn" href="#observation-procedure" id="ref-for-observation-procedure-1">Observation Procedure</a> をサポートする必要がないからです。</p>
     <li>
      UA が BR/EDR トランスポートをサポートする場合、<a data-link-type="dfn" href="#device-discovery-procedure" id="ref-for-device-discovery-procedure-1">Device Discovery Procedure</a> を実行し、発見した <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-7">Bluetooth device</a> を <var>nearbyDevices</var> に追加します。
      <p class="issue" id="issue-86164f30"><a class="self-link" href="#issue-86164f30"></a> BR/EDR inquiry/discovery の全形式で、ユニークかつ変更不可能なアドレスがリークするようです。</p>
     <li><var>result</var> を <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-8">Bluetooth device</a> の集合とし、初期値は空です。
     <li>
      <var>nearbyDevices</var> の各 <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-9">Bluetooth device</a> <var>device</var> に対して以下のサブステップを実行します。：
      <ol>
       <li><var>device</var> の サポートされた物理トランスポート( <a data-link-type="dfn" href="#supported-physical-transports" id="ref-for-supported-physical-transports-1">supported physical transports</a> )に LE が含まれ、その <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-6">Bluetooth Device Name</a> が部分的にしか存在しないまたは存在しない場合、UA は完全な名前を取得するために <a data-link-type="dfn" href="#name-discovery-procedure" id="ref-for-name-discovery-procedure-1">Name Discovery Procedure</a> を実行する必要があります。
       <li>
         アドバタイズされた <var>device</var> の <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-1">Service UUID</a> が <var><a data-link-type="dfn" href="#service" id="ref-for-service-4">Service</a> UUID の集合</var> と空でない共通部分がある場合、<var>device</var> を <var>result</var> に追加し、以下のサブステップを中止します。
        <p class="note" role="note">
          BR/EDRデバイスについて、拡張問合せ応答（ <a data-link-type="dfn" href="#extended-inquiry-response" id="ref-for-extended-inquiry-response-2">Extended Inquiry Response</a> ）で GATT と non-GATT services を区別する方法はありません。あるサイトが non-GATT service の UUID にフィルターする場合、ユーザーは、本APIが交信する方法を持たない<code>requestDevice</code> の結果としてデバイスを選択できる可能性があります。  </p>
       <li>
         UA は、<var>device</var> に接続し、<a data-link-type="dfn" href="#service" id="ref-for-service-5">Service</a> UUID の集合にある全サービスを <a data-link-type="dfn" href="#populate-the-bluetooth-cache" id="ref-for-populate-the-bluetooth-cache-2">Bluetooth cache に格納</a> することができます。
        <var>device</var> がサポートする物理トランスポート( <a data-link-type="dfn" href="#supported-physical-transports" id="ref-for-supported-physical-transports-2">supported physical transports</a> ) に BR/EDR が含まれる場合、UA は standard GATT procedures に加え、キャッシュ格納時にサービス探索プロトコル( Service Discovery Protocol [<a data-link-type="dfn" href="#searching-for-services" id="ref-for-searching-for-services-1">Searching for Services</a>] )を使用できます。
        <div class="note" id="note-extra-discovery" role="note">
         <a class="self-link" href="#note-extra-discovery"></a>
         <p>近隣の全デバイスに接続するサービス検索は、電力を消費し、Bluetooth無線の他の利用を遅くする可能性があります。デバイスに関心が期待できる何かの理由があれば、UA はあるデバイスの特別なサービスだけを検索をすべきです。</p>
         <p> また UA は、開発者がこの特別な検索方法への依存を避けられるようにしなければなりません。例えば、開発者が以前あるデバイスに接続していれば、その UA はデバイスでサポートされるサービスをフルセットで知っています。そして、開発者が non-advertised UUID を用いてフィルターすれば、フィルターがユーザーのマシンでこのデバイスを除外しそうな場合でも、ダイアログにこのデバイスを含むことができます。このような場合、UA は、警告を出すかフィルターにマッチする時にアドバタイズされた service だけを含める、というオプションを開発者に提供できます。 </p>
        </div>
       <li><a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-2">Bluetooth cache</a> が <a data-link-type="dfn" href="#service" id="ref-for-service-6">Service</a> UUID 集合に、UUID を持ったデバイス内部の known-present service を含んでいる場合、UA は <var>device</var> を <var>result</var> に追加できます。
      </ol>
     <li>スキャンから <var>result</var> を返します。
    </ol>
    <p class="issue" id="issue-e5c688d4"><a class="self-link" href="#issue-e5c688d4"></a> 興味のあるデバイスが圏内に来た時に、イベントを受信するためサイトを登録する方法が必要になります。</p>
   </section>
    <section>
      <h3 class="heading settled" data-level="3.1" id="permission-api-integration"><span class="secno">3.1. </span><span class="content">Permission API Integration</span><a class="self-link" href="#permission-api-integration"></a></h3>
      <p>この <a data-link-type="biblio" href="#biblio-permissions">[permissions]</a> API は、ウェブサイトが持っている権限を、ユーザやクエリーからリクエストするための統一的な方法を提供します。</p>
      <div class="example" id="example-permission-api-request">
        <a class="self-link" href="#example-permission-api-request"></a>
        <p> サイトでは <code class="highlight"><span class="nx">navigator</span><span class="p">.</span><span class="nx">bluetooth</span><span class="p">.</span><code class="idl highlight"><a data-link-type="idl" href="#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice-5"><span class="nx"><span class="nx">requestDevice</span></span><span class="p"><span class="p">()</span></span></a></code></code> の代替スペルとして <code class="highlight"><span class="nx">navigator</span><span class="p">.</span><span class="nx">permissions</span><span class="p">.</span><code class="idl highlight"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-request"><span class="nx"><span class="nx">request</span></span></a></code><span class="p">({</span><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name"><span class="nx">name</span></a><span class="o">:</span> <span class="s2">"bluetooth"</span><span class="p">,</span> <span class="p">...})</span></code> を使用することができる。
<pre class="highlight"><span class="nx">navigator</span><span class="p">.</span><span class="nx">permissions</span><span class="p">.</span><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-request"><span class="nx">request</span></a><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"bluetooth"</span><span class="p">,</span>
  <span class="nx">filters</span><span class="o">:</span> <span class="p">[{</span>
    <span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="s1">'heart_rate'</span><span class="p">],</span>
  <span class="p">}]</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothpermissionresult-devices" id="ref-for-dom-bluetoothpermissionresult-devices-1"><span class="nx">devices</span></a><span class="p">.</span><span class="nx">length</span> <span class="o">></span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">devices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-DOMException"><span class="nx">DOMException</span></a><span class="p">(</span><span class="s2">"Chooser cancelled"</span><span class="p">,</span> <span class="s2">"NotFoundError"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">device</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">lastDevice</span> <span class="o">=</span> <span class="nx">device</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothdevice-id" id="ref-for-dom-bluetoothdevice-id-1"><span class="nx">id</span></a><span class="p">;</span>
<span class="p">});</span>
</pre>
        <p><code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondescriptor-deviceid" id="ref-for-dom-bluetoothpermissiondescriptor-deviceid-1">deviceId</a></code> メンバーは <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-request">request()</a></code> の呼び出しでは無視されます。</p>
      </div>
      <div class="example" id="example-permission-api-query">
        <a class="self-link" href="#example-permission-api-query"></a>
        <p> サイトは、デバイスのセットへのアクセスを許可されたならば、リロード後にそれらのデバイスを取得するために <code class="highlight"><span class="nx">navigator</span><span class="p">.</span><span class="nx">permissions</span><span class="p">.</span><code class="idl highlight"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query"><span class="nx"><span class="nx">query</span></span></a></code><span class="p">({</span><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name"><span class="nx">name</span></a><span class="o">:</span> <span class="s2">"bluetooth"</span><span class="p">,</span> <span class="p">...})</span></code> を使用することができます。</p>
<pre class="highlight"><span class="nx">navigator</span><span class="p">.</span><span class="nx">permissions</span><span class="p">.</span><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissions-query"><span class="nx">query</span></a><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"bluetooth"</span><span class="p">,</span>
  <span class="nx">deviceId</span><span class="o">:</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">lastDevice</span><span class="p">,</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=></span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><a data-link-type="idl" href="#dom-bluetoothpermissionresult-devices" id="ref-for-dom-bluetoothpermissionresult-devices-2"><span class="nx">devices</span></a><span class="p">.</span><span class="nx">length</span> <span class="o">></span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">devices</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <a data-link-type="idl" href="https://heycam.github.io/webidl/#dfn-DOMException"><span class="nx">DOMException</span></a><span class="p">(</span><span class="s2">"Lost permission"</span><span class="p">,</span> <span class="s2">"NotFoundError"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(...);</span>
</pre>
      </div>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionName" data-dfn-type="enum-value" data-export="" id="dom-permissionname-bluetooth">"bluetooth"</dfn> の <a data-link-type="dfn" href="https://w3c.github.io/permissions/#powerful-feature">強力な特徴</a>である、パーミッションが関連するアルゴリズムおよびタイプは以下のように定義されています。：</p>
      <dl>
        <dt> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-descriptor-type">permission descriptor type</a>
        <dd>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-bluetoothpermissiondescriptor">BluetoothPermissionDescriptor</dfn> : <a class="n" data-link-type="idl-name" href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  <span class="kt">DOMString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="BluetoothPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="DOMString " id="dom-bluetoothpermissiondescriptor-deviceid">deviceId</dfn>;
  // These match RequestDeviceOptions.
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#dictdef-bluetoothrequestdevicefilter" id="ref-for-dictdef-bluetoothrequestdevicefilter-3">BluetoothRequestDeviceFilter</a>> <dfn class="nv idl-code" data-dfn-for="BluetoothPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="sequence<BluetoothRequestDeviceFilter> " id="dom-bluetoothpermissiondescriptor-filters">filters<a class="self-link" href="#dom-bluetoothpermissiondescriptor-filters"></a></dfn>;
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-4">BluetoothServiceUUID</a>> <dfn class="nv idl-code" data-default="None" data-dfn-for="BluetoothPermissionDescriptor" data-dfn-type="dict-member" data-export="" data-type="sequence<BluetoothServiceUUID> " id="dom-bluetoothpermissiondescriptor-optionalservices">optionalServices<a class="self-link" href="#dom-bluetoothpermissiondescriptor-optionalservices"></a></dfn> = [];
};
</pre>
        <dt> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data-type">extra permission data type</a>
        <dd>
          <p><code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothpermissiondata" id="ref-for-dictdef-bluetoothpermissiondata-1">BluetoothPermissionData</a></code> は以下のように定義されています。：</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-allowedbluetoothdevice">AllowedBluetoothDevice</dfn> {
  <span class="kt">required</span> <span class="kt">DOMString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="AllowedBluetoothDevice" data-dfn-type="dict-member" data-export="" data-type="DOMString " id="dom-allowedbluetoothdevice-deviceid">deviceId</dfn>;
  // An allowedServices of "all" means all services are allowed.
  <span class="kt">required</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-1">UUID</a>>) <dfn class="nv dfn-paneled idl-code" data-dfn-for="AllowedBluetoothDevice" data-dfn-type="dict-member" data-export="" data-type="(DOMString or sequence<UUID>) " id="dom-allowedbluetoothdevice-allowedservices">allowedServices</dfn>;
};
<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-bluetoothpermissiondata">BluetoothPermissionData</dfn> {
  <span class="kt">required</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#dictdef-allowedbluetoothdevice" id="ref-for-dictdef-allowedbluetoothdevice-1">AllowedBluetoothDevice</a>> <dfn class="nv dfn-paneled idl-code" data-default="None" data-dfn-for="BluetoothPermissionData" data-dfn-type="dict-member" data-export="" data-type="sequence<AllowedBluetoothDevice> " id="dom-bluetoothpermissiondata-alloweddevices">allowedDevices</dfn> = [];
};
</pre>
          <p> <code class="idl"><a data-link-type="idl" href="#dictdef-allowedbluetoothdevice" id="ref-for-dictdef-allowedbluetoothdevice-2">AllowedBluetoothDevice</a></code> インスタンスは
            <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-10">Bluetooth device</a> を有する 内部スロット <dfn class="dfn-paneled idl-code" data-dfn-for="AllowedBluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-allowedbluetoothdevice-device-slot">[[device]]</dfn> を持っています。</p>
          <p><code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondata-alloweddevices" id="ref-for-dom-bluetoothpermissiondata-alloweddevices-2">allowedDevices</a></code> の個別の要素は、異なる <code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-device-slot" id="ref-for-dom-allowedbluetoothdevice-device-slot-1">[[device]]</a></code> および、異なる <code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-deviceid" id="ref-for-dom-allowedbluetoothdevice-deviceid-1">deviceId</a></code> を持っている必要があります。</p>
          <div class="note" id="note-device-id-tracking" role="note">
            <a class="self-link" href="#note-device-id-tracking"></a>
            <p>
              <code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-deviceid" id="ref-for-dom-allowedbluetoothdevice-deviceid-2">deviceId</a></code> は、サイトに、 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-8">BluetoothDevice</a></code> インスタンスと同一インスタンスを表す <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-7">BluetoothDevice</a></code> インスタンスの追跡を許可します、おそらく異なる <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a> です。
              UA は、<code class="idl"><a data-link-type="idl" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-3">"bluetooth"</a></code> の <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a> を返す時に、起こることまたは起きないことを、ユーザーが追跡しようとするかどうか、 を検討する必要があります。</p>
            <p>例えば、一般的に、ユーザは、それらが同じデバイスと対話していることを知っているため、2つの異なるオリジンを意図しません。また、ユーザは、クッキーをクリアした後に持続するユニークな識別子も意図しません。</p>
          </div>
        <dt> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-result-type">permission result type</a>
        <dd>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="bluetoothpermissionresult">BluetoothPermissionResult</dfn> : <a class="n" data-link-type="idl-name" href="https://w3c.github.io/permissions/#permissionstatus">PermissionStatus</a> {
  <span class="kt">attribute</span> <span class="kt">FrozenArray</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-9">BluetoothDevice</a>> <dfn class="nv dfn-paneled idl-code" data-dfn-for="BluetoothPermissionResult" data-dfn-type="attribute" data-export="" data-type="FrozenArray<BluetoothDevice>" id="dom-bluetoothpermissionresult-devices">devices</dfn>;
};
</pre>
        <dt> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-request-algorithm">permission request algorithm</a>
        <dd>
          <p><code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothpermissiondescriptor" id="ref-for-dictdef-bluetoothpermissiondescriptor-1">BluetoothPermissionDescriptor</a></code> <var>options</var> と <code class="idl"><a data-link-type="idl" href="#bluetoothpermissionresult" id="ref-for-bluetoothpermissionresult-1">BluetoothPermissionResult</a></code> <var>status</var> が与えられ、UA は以下のステップを実行しなければなりません。：</p>
          <ol class="algorithm">
            <li> <a data-link-type="dfn" href="#request-bluetooth-devices" id="ref-for-request-bluetooth-devices-2">Bluetooth devices のリクエスト</a>では <code><var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-requestdeviceoptions-filters" id="ref-for-dom-requestdeviceoptions-filters-3">filters</a></code></code> と <code><var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-requestdeviceoptions-optionalservices" id="ref-for-dom-requestdeviceoptions-optionalservices-4">optionalServices</a></code></code> を渡し、いずれの例外も伝搬させ、<var>devices</var> を結果とします。
            <li> <code><var>status</var>.devices</code> を、<var>devices</var> の要素を含む新しい <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> にセットします。
          </ol>
        <dt> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-query-algorithm">permission query algorithm</a>
        <dd data-algorithm="query the &quot;bluetooth&quot; permission">


        <code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothpermissiondescriptor" id="ref-for-dictdef-bluetoothpermissiondescriptor-2">BluetoothPermissionDescriptor</a></code> <var>desc</var> と <code class="idl"><a data-link-type="idl" href="#bluetoothpermissionresult" id="ref-for-bluetoothpermissionresult-2">BluetoothPermissionResult</a></code> <var>status</var> とともに<dfn data-dfn-type="dfn" data-noexport="" id="query-the-bluetooth-permission">"bluetooth" permission を問い合わせる<a class="self-link" href="#query-the-bluetooth-permission"></a></dfn>ためには、UAは以下のステップを実行しなければなりません。：
          <ol class="algorithm">
            <li> <var>global</var> を <var>status</var> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#es-platform-objects">と関連した global object</a> とします。
            <li> <code><var>status</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state">state</a></code></code> を <var>desc</var> の <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-state">permission state</a> にセットします。
            <li> <code><var>status</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstatus-state">state</a></code></code> が <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-denied">"denied"</a></code> の場合、<code><var>status</var>.devices</code> を空の <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> にセットし、以下のステップを中止します。
            <li> <var>matchingDevices</var> を新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a></code> にします。
            <li> <var>data</var> ( <code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothpermissiondata" id="ref-for-dictdef-bluetoothpermissiondata-2">BluetoothPermissionData</a></code> ) を、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a> のために <code class="idl"><a data-link-type="idl" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-4">"bluetooth"</a></code> の <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a> とします。
            <li> <code><var>data</var>.allowedDevices</code> の各 <var>allowedDevice</var> に対して、以下のサブステップを実行します。：
              <ol>
                <li> <code><var>desc</var>.deviceId</code> がセットされ、 <code><var>allowedDevice</var>.deviceId != <var>desc</var>.deviceId</code> の場合、次の <var>allowedDevice</var> に進みます。
                <li> <code><var>desc</var>.filters</code> がセットされ、<code><var>allowedDevice</var>@<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-device-slot" id="ref-for-dom-allowedbluetoothdevice-device-slot-2">[[device]]</a></code></code> が <code><var>desc</var>.filters</code> の<a data-link-type="dfn" href="#matches-a-filter" id="ref-for-matches-a-filter-4">フィルターとマッチ</a>しない場合、次の <var>allowedDevice</var> に進みます。
                <li class="note" role="note"> 注記: <code><var>desc</var>.optionalServices</code> フィールドは結果には影響しません。
                <li> <code><var>global</var>.navigator.bluetooth</code> 内の <code><var>allowedDevice</var>@<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-device-slot" id="ref-for-dom-allowedbluetoothdevice-device-slot-3">[[device]]</a></code></code> を表す <code>BluetoothDevice</code> を取得し、結果に <var>matchingDevices</var> を加えます。
              </ol>
            <li> <code><var>status</var>.devices</code> を、コンテンツが <var>matchingDevices</var> である新しい <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> にセットします。
          </ol>
        <dt> <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-revocation-algorithm">permission revocation algorithm</a>
        <dd data-algorithm="revoke Bluetooth access">
          <p>ユーザはデバイスを公開しないよう <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="revoke-bluetooth-access">Bluetooth access を取り消す</dfn>ためには、UA は以下のステップを実行しなければなりません。：</p>
          <ol class="algorithm">
            <li> <var>data</var> ( <code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothpermissiondata" id="ref-for-dictdef-bluetoothpermissiondata-3">BluetoothPermissionData</a></code> ) を、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a> のために <code class="idl"><a data-link-type="idl" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-5">"bluetooth"</a></code> の <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a> とします。
            <li> <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#current-realm">current realm</a> の各 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-10">BluetoothDevice</a></code> instance <var>deviceObj</var> に対して、以下のサブステップを実行します。：
              <ol>
                <li> <code><var>data</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondata-alloweddevices" id="ref-for-dom-bluetoothpermissiondata-alloweddevices-3">allowedDevices</a></code></code> の中に <code class="idl"><a data-link-type="idl" href="#dictdef-allowedbluetoothdevice" id="ref-for-dictdef-allowedbluetoothdevice-3">AllowedBluetoothDevice</a></code> <var>allowedDevice</var> がある場合、つまり：
                  <ul>
                    <li> <code><var>allowedDevice</var>.<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-device-slot" id="ref-for-dom-allowedbluetoothdevice-device-slot-4">[[device]]</a></code></code> は <code><var>deviceObj</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-1">[[representedDevice]]</a></code></code> と <a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-1">同一デバイス</a>である。
                    <li> <code><var>allowedDevice</var>.<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-deviceid" id="ref-for-dom-allowedbluetoothdevice-deviceid-3">deviceId</a></code> === <var>deviceObj</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-id" id="ref-for-dom-bluetoothdevice-id-2">id</a></code></code> である。
                  </ul>
                  その後、<code><var>deviceObj</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-1">[[allowedServices]]</a></code></code> を <code><var>allowedDevice</var>.<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-allowedservices" id="ref-for-dom-allowedbluetoothdevice-allowedservices-2">allowedServices</a></code></code> に更新し、次の <var>deviceObj</var> に進みます。
                <li> そうでない場合、残りのステップを実行して、そのデバイスから <var>deviceObj</var> を切り離します。
                <li> <code><var>deviceObj</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-disconnect" id="ref-for-dom-bluetoothremotegattserver-disconnect-1">disconnect()</a></code></code> をコールします。
                  <p class="note" role="note">注記: これは <var>deviceObj</var> で <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-gattserverdisconnected" id="ref-for-eventdef-bluetoothdevice-gattserverdisconnected-1">gattserverdisconnected</a></code> イベントを開始させます。</p>
                <li> <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-2">[[representedDevice]]</a></code></code> を <code>null</code> にセットします。
              </ol>
          </ol>
      </dl>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="device-representation"><span class="secno">4. </span><span class="content">デバイスの表現</span><a class="self-link" href="#device-representation"></a></h2>
    <p>UA は Bluetoothデバイスproperties をいくつかのレベルで追跡する必要があります。：
    グローバル、オリジン別、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">グローバルオブジェクト</a>別</p>
    <section>
     <h3 class="heading settled" data-level="4.1" id="global-device-properties"><span class="secno">4.1. </span><span class="content">グローバル Bluetooth デバイスプロパティ</span><a class="self-link" href="#global-device-properties"></a></h3>
     <p>物理的な Bluetooth デバイスは、UA が受信していない可能性があるプロパティ群を持つことが保証される場合があります。ここでは、そのようなプロパティ群をオプションと記載します。</p>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="bluetooth-device">Bluetooth device</dfn> には、以下のようなプロパティがあります。別途説明がない限り、オプションのプロパティは存在せず、シーケンスおよびマッププロパティは空です。それ以外のプロパティは、指定デフォルト値があるか、デバイス導入時点で決定されます。</p>
     <ul>
      <li> BR/EDR または LE のいずれか1つまたは両方を含んだサポートされた物理トランスポート( <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="supported-physical-transports">supported physical transports</dfn> ) の集合。この集合は、通常、デバイスが検索されたトランスポート、および <a data-link-type="dfn" href="#advertising-data" id="ref-for-advertising-data-1">Advertising Data</a> または <a data-link-type="dfn" href="#extended-inquiry-response" id="ref-for-extended-inquiry-response-3">Extended Inquiry Response</a> の  <a data-link-type="dfn" href="#flags-data-type" id="ref-for-flags-data-type-1">Flags Data Type</a> により満たされます。
      <li>1種類以上の48ビットアドレス：<a data-link-type="dfn" href="#public-bluetooth-address" id="ref-for-public-bluetooth-address-1">Public Bluetooth Address</a>、(ランダム) <a data-link-type="dfn" href="#static-address" id="ref-for-static-address-1">Static Address</a> と 検証可能(resolvable) または 検証不可能(non-resolvable) な <a data-link-type="dfn" href="#private-address" id="ref-for-private-address-2">Private Address</a>。
      <li>オプションの128ビット IRK( <a data-link-type="dfn" href="#identity-resolving-key" id="ref-for-identity-resolving-key-3">Identity Resolving Key</a> )。
      <li>オプションの部分的または完全な <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-7">Bluetooth Device Name</a>。<a data-link-type="dfn" href="https://www.bluetooth.org/en-us/specification/assigned-numbers/generic-access-profile#">Shortened Local Name</a> AD data が受信され、完全な名前が読み取られていない場合、デバイスには部分的な名前しかありません。<a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-8">Bluetooth Device Name</a> は、UTF8としてエンコードされ、<a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom">BOMアルゴリズムを使用しないUTF-8デコード</a> を使用して、DOM文字列に変換されます。
      <li><a data-link-type="dfn" href="#att-bearer" id="ref-for-att-bearer-1">ATT Bearer</a>,この上で全ての GATT 通信が発生します。
        <a data-link-type="dfn" href="#att-bearer" id="ref-for-att-bearer-2">ATT Bearer</a> は <a data-link-type="dfn" href="#gap-interoperability-requirements" id="ref-for-gap-interoperability-requirements-1">GAP Interoperability Requirements</a> の接続確立(Connection Establishment) で説明されるプロシージャーにより生成されます。これは全く明らかではない方法 <a data-link-type="biblio" href="#biblio-bluetooth42">[BLUETOOTH42]</a> で切断されます。
      <li> <a data-link-type="dfn" href="#advertising-data" id="ref-for-advertising-data-2">Advertising Data</a> または <a data-link-type="dfn" href="#extended-inquiry-response" id="ref-for-extended-inquiry-response-4">Extended Inquiry Response</a> からのアドバタイズされた <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-2">Service UUID</a> のリスト。
      <li><a href="#information-model">§5.1 GATT Information Model</a> で説明される GATT 属性の階層
     </ul>
     <p>以下の場合に UA は2つの <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-11">Bluetooth device</a> が<dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-local-lt="same device" id="same-bluetooth-device">同一の Bluetooth デバイス</dfn>と判断する必要があります。2つのデバイスの、<a data-link-type="dfn" href="#public-bluetooth-address" id="ref-for-public-bluetooth-address-2">Public Bluetooth Address</a>、<a data-link-type="dfn" href="#static-address" id="ref-for-static-address-2">Static Address</a>, <a data-link-type="dfn" href="#private-address" id="ref-for-private-address-3">Private Address</a>, <a data-link-type="dfn" href="#identity-resolving-key" id="ref-for-identity-resolving-key-4">Identity Resolving Key</a> のいずれかが同一の場合、あるいは、一方のデバイスのIRKと他方の検証可能な <a data-link-type="dfn" href="#private-address" id="ref-for-private-address-4">Private Address</a> を使って <a data-link-type="dfn" href="#resolvable-private-address-resolution-procedure" id="ref-for-resolvable-private-address-resolution-procedure-2">Resolvable Private Address Resolution Procedure</a> が成功した時に限り、同一のデバイスだと判断する必要があります。しかし、プラットフォームAPIでは、デバイスの同一性を決定する方法が文章化されていないので、UA は別のプロシージャを使用してもよいのです。 </p>
    </section>
    <section>
       <h3 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="4.2" data-lt="BluetoothDevice" id="bluetoothdevice"><span class="secno">4.2. </span><span class="content">BluetoothDevice</span></h3>
       <p> <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-11">BluetoothDevice</a></code> インスタンスは、特定の <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a> (あるいは、同等に、特定の <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">Realm</a> または <code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-8">Bluetooth</a></code> インスタンスに対して) の <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-12">Bluetooth device</a> を表しています。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothdevice" id="ref-for-bluetoothdevice-12">BluetoothDevice</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-bluetoothdevice-id" id="ref-for-dom-bluetoothdevice-id-3">id</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString?" href="#dom-bluetoothdevice-name" id="ref-for-dom-bluetoothdevice-name-1">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-1">BluetoothRemoteGATTServer</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothRemoteGATTServer" href="#dom-bluetoothdevice-gatt" id="ref-for-dom-bluetoothdevice-gatt-1">gatt</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">FrozenArray</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-2">UUID</a>> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="FrozenArray<UUID>" href="#dom-bluetoothdevice-uuids" id="ref-for-dom-bluetoothdevice-uuids-1">uuids</a>;

  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothdevice-watchadvertisements" id="ref-for-dom-bluetoothdevice-watchadvertisements-1">watchAdvertisements</a>();
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothdevice-unwatchadvertisements" id="ref-for-dom-bluetoothdevice-unwatchadvertisements-1">unwatchAdvertisements</a>();
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-1">watchingAdvertisements</a>;
};
<a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-13">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-14">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#bluetoothdeviceeventhandlers" id="ref-for-bluetoothdeviceeventhandlers-2">BluetoothDeviceEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-15">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers" id="ref-for-characteristiceventhandlers-2">CharacteristicEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-16">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#serviceeventhandlers" id="ref-for-serviceeventhandlers-2">ServiceEventHandlers</a>;
</pre>
     <div class="note no-marker" role="note">
     <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bletoothdevice-17">BluetoothDevice</a></code> 属性</div>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-id">id</dfn> は、UA が2つの Bluetooth 接続が同一デバイスであると判断できる程度にデバイスを識別することができます。また、id は、ユーザがスクリプトに<a href="#note-device-id-tracking">その事項をスクリプトに公開したい</a>程度にデバイスを識別することができます。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-name">name</dfn> は、人間が読める形式のデバイス名です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-gatt">gatt</dfn> には、このデバイスの GATT services と通信する方法を与えます。</p>
      <p> <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-uuids" id="ref-for-dom-bluetoothdevice-uuids-2">uuids</a></code> は、このデバイス上にあることがわかっている GATT service の UUID 群で、現在のオリジンがアクセスを許可されているもののリストです。</p>
      <p> UA がこのデバイスからアドバタイズメントをスキャンしており、イベントを開始した場合、<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-watchingadvertisements">watchingAdvertisements</dfn> は true です。 </p>
     </div>
     <p><code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-18">BluetoothDevice</a></code> インスタンスは、次のテーブルに記載された内部スロットを用いて作成されます。：</p>
     <table class="data">
      <thead>
       <tr>
         <th>内部スロット
         <th>初期値
         <th>説明(参考)
      <tbody>
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-context-slot">[[context]]</dfn>
        <td><code>undefined</code>
        <td> この <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-19">BluetoothDevice</a></code> を返した <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-19">BluetoothDevice</a></code>.<code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-9">Bluetooth</a></code> オブジェクト
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-representeddevice-slot">[[representedDevice]]</dfn>
        <td><code>undefined</code>
        <td> このオブジェクトが表している <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-13">Bluetooth デバイス</a>
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-allowedservices-slot">[[allowedServices]]</dfn>
        <td><code>undefined</code>
        <td> 全てのサービスが許可されている <code>"all"</code> の場合は、オリジンのための、このデバイスの <code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-allowedservices" id="ref-for-dom-allowedbluetoothdevice-allowedservices-3">allowedServices</a></code> リスト。例えば、UA は、そのオリジンに URL がそのオリジンにアドバタイズされた <code class="idl"><a data-link-type="idl" href="#dom-bluetooth-referringdevice" id="ref-for-dom-bluetooth-referringdevice-4">referringDevice</a></code> 上の全てのサービスへのアクセスをオリジンに許可することができます。
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-unfiltereduuids-slot">[[unfilteredUuids]]</dfn>
        <td><code>new <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-set-objects">Set</a></code>()</code>
        <td>このデバイスの <a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-3">GATT Server</a> にあることが既知のサービスUUID。
          UA が全サービス検索を実行していない場合、この集合は不完全であるかもしれません。
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-cachedallowedservices-slot">[[cachedAllowedServices]]</dfn>
        <td><code>undefined</code>
        <td><code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-filtereduuids-slot" id="ref-for-dom-bluetoothdevice-filtereduuids-slot-1">[[filteredUuids]]</a></code> が最後に実行された時点での <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-2">[[allowedServices]]</a></code> の値。
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-cachedunfiltereduuids-slot">[[cachedUnfilteredUuids]]</dfn>
        <td><code>undefined</code>
        <td><code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-filtereduuids-slot" id="ref-for-dom-bluetoothdevice-filtereduuids-slot-2">[[filteredUuids]]</a></code> が最後に更新された時点での <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-1">[[unfilteredUuids]]</a></code> の値。
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-filtereduuids-slot">[[filteredUuids]]</dfn>
        <td><code>undefined</code>
        <td> キャッシュされた <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-uuids" id="ref-for-dom-bluetoothdevice-uuids-3">uuids</a></code> の値。<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-cachedallowedservices-slot" id="ref-for-dom-bluetoothdevice-cachedallowedservices-slot-1">[[cachedAllowedServices]]</a></code> と <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-3">[[allowedServices]]</a></code> が等しい場合は、最新です。
     </table>
     <p><code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-9">Bluetooth</a></code> インスタンスの <var>context</var> 内部で <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-15">Bluetooth device</a> <var>device</var> を表す <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="get the BluetoothDevice representing" data-noexport="" id="get-the-bluetoothdevice-representing"><code>BluetoothDevice</code> を取得する representing<span class="dfn-panel" data-deco=""><b><a href="#get-the-bluetoothdevice-representing">#get-the-bluetoothdevice-representing</a></b><b>Referenced in:</b><span><a href="#ref-for-get-the-bluetoothdevice-representing-1">3. Device Discovery</a></span><span><a href="#ref-for-get-the-bluetoothdevice-representing-2">5.3. BluetoothRemoteGATTService</a></span></span></dfn> ためには、UA は以下のステップを実行しなければなりません。：
     <ol class="algorithm">
      <li> <var>device</var> として <a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-device-5">同一デバイス</a>である <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-deviceinstancemap-slot" id="ref-for-dom-bluetooth-deviceinstancemap-slot-1">[[deviceInstanceMap]]</a></code> にキーが存在する場合、その値を返し、以下のステップを中止します。
      <li> <var>promise</var> を<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> にします。
      <li> <var>device</var> から <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-deviceinstancemap-slot" id="ref-for-dom-bluetooth-deviceinstancemap-slot-2">[[deviceInstanceMap]]</a></code> の <var>promise</var> へのマッピングを追加します。
      <li> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行します。
      <li> <var>data</var> ( <code class="idl"><a data-link-type="idl" href="#dictdef-bluetoothpermissiondata" id="ref-for-dictdef-bluetoothpermissiondata-4">BluetoothPermissionData</a></code> )
        を <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a> による <code class="idl"><a data-link-type="idl" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-6">"bluetooth"</a></code> の  <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a> にします。
      <li> <code><var>data</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondata-alloweddevices" id="ref-for-dom-bluetoothpermissiondata-alloweddevices-4">allowedDevices</a></code></code> の中から、<code><var>allowedDevice</var>@<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-device-slot" id="ref-for-dom-allowedbluetoothdevice-device-slot-5">[[device]]</a></code></code> で、<var>device</var> として<a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-2">同一デバイス</a>を検索します。そのようなオブジェクトが存在しない場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> をスローし、以下のステップを中止します。
      <li> <code><var>data</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondata-alloweddevices" id="ref-for-dom-bluetoothpermissiondata-alloweddevices-4">allowedDevices</a></code></code> の中から、<code><var>allowedDevice</var>@<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-device-slot" id="ref-for-dom-allowedbluetoothdevice-device-slot-5">[[device]]</a></code></code> で、<var>device</var> として<a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-2">同一デバイス</a>を検索します。そのようなオブジェクトが存在しない場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> をスローし、以下のステップを中止します。
      <li> <var>device</var> として<a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-3">同一デバイス</a>である <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-deviceinstancemap-slot" id="ref-for-dom-bluetooth-deviceinstancemap-slot-1">[[deviceInstanceMap]]</a></code> にキーが無い場合、以下のサブステップを実行します。：
      <ol>
        <li> <var>result</var> を新しい <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-20">BluetoothDevice</a></code> のインスタンスとします。
        <li> <var>result</var> のオプションのフィールド全てを <code>null</code> に初期化します。
        <li> <code><var>result</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-context-slot" id="ref-for-dom-bluetoothdevice-context-slot-1">[[context]]</a></code></code> を <var>context</var> に初期化します。
        <li> <code><var>result</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-3">[[representedDevice]]</a></code></code> を <var>device</var> に初期化します。

        <li> Initialize <code><var>result</var>.id</code> を <code><var>allowedDevice</var>.<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-deviceid" id="ref-for-dom-allowedbluetoothdevice-deviceid-4">deviceId</a></code></code> に初期化し、<code><var>result</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-4">[[allowedServices]]</a></code></code> を <code><var>allowedDevice</var>.<code class="idl"><a data-link-type="idl" href="#dom-allowedbluetoothdevice-allowedservices" id="ref-for-dom-allowedbluetoothdevice-allowedservices-4">allowedServices</a></code></code> に初期化します。
        <li> <var>device</var> が部分的または完全な <a data-link-type="dfn" href="#bluetooth-device-name" id="ref-for-bluetooth-device-name-9">Bluetooth Device Name</a> を持つ場合、<code><var>result</var>.name</code> にその文字列をセットします。
        <li> <code><var>result</var>.watchingAdvertisements</code> を <code>false</code> に初期化します。
        <li> <code><var>result</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-device" id="ref-for-dom-bluetoothremotegattserver-device-1">device</a></code></code> を <var>result</var> に初期化します。
        <li> <code><var>result</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-1">connected</a></code></code> を <code>false</code> に初期化します。
        <li> <var>device</var> の アドバタイズされた <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-3">Service UUIDs</a> を <code>result@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-2">[[unfilteredUuids]]</a></code></code> に追加します。
        <li><a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-3">Bluetooth cache</a> がデバイス内部の <var>device</var> の known-present サービスを含んでいる場合、これらのサービスに対する UUID群 を<code>result@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-3">[[unfilteredUuids]]</a></code></code> に追加します。
        <li> <var>device</var> から <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-deviceinstancemap-slot" id="ref-for-dom-bluetooth-deviceinstancemap-slot-2">[[deviceInstanceMap]]</a></code> の <var>result</var> にマッピングを追加します。
      </ol>
      <li> キーが <var>device</var> として  <a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-4">同一デバイス</a>である <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-deviceinstancemap-slot" id="ref-for-dom-bluetooth-deviceinstancemap-slot-3">[[deviceInstanceMap]]</a></code> の中の値を返します。
     </ol>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="attribute" data-export="" id="dom-bluetoothdevice-uuids">uuids</dfn></code> attribute を取得するには、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li>
        <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-cachedallowedservices-slot" id="ref-for-dom-bluetoothdevice-cachedallowedservices-slot-2">[[cachedAllowedServices]]</a></code> が <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-5">[[allowedServices]]</a></code> と異なる、あるいは <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-cachedunfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-cachedunfiltereduuids-slot-1">[[cachedUnfilteredUuids]]</a></code> が <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-4">[[unfilteredUuids]]</a></code> と異なる場合、以下のステップを実行します。：
       <ol>
        <li><code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-cachedallowedservices-slot" id="ref-for-dom-bluetoothdevice-cachedallowedservices-slot-3">[[cachedAllowedServices]]</a></code> に <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-6">[[allowedServices]]</a></code> のコピーをセットします。
        <li> <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-cachedunfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-cachedunfiltereduuids-slot-2">[[cachedUnfilteredUuids]]</a></code> に <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-5">[[unfilteredUuids]]</a></code> のコピーをセットします。
        <li>
         <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-filtereduuids-slot" id="ref-for-dom-bluetoothdevice-filtereduuids-slot-3">[[filteredUuids]]</a></code> に、以下の要素からなる新しい <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> をセットします。：
         <dl class="switch">
           <dt><code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-7">[[allowedServices]]</a></code> が <code>"all"</code> である場合
           <dd><code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-6">[[unfilteredUuids]]</a></code> の全ての要素
           <dt>そうでない場合
           <dd> <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-7">[[unfilteredUuids]]</a></code> と <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-8">[[allowedServices]]</a></code> の共通部分
         </dl>
       </ol>
      <li><code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-filtereduuids-slot" id="ref-for-dom-bluetoothdevice-filtereduuids-slot-4">[[filteredUuids]]</a></code> を返します。
     </ol>
     <p class="note" role="note">スキャンには電力が必要になるためウェブサイトは必要以上にアドバタイズメントを関しすることは避けてください。そして可能な限り早く電力の使用を停止する <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unwatchadvertisements" id="ref-for-dom-bluetoothdevice-unwatchadvertisements-2">unwatchAdvertisements()</a></code> をコールする必要があります。</p>
      <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="method" data-export="" id="dom-bluetoothdevice-watchadvertisements">watchAdvertisements()</dfn></code> メソッドは、呼び出されると、<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
        <li> UA は、このデバイスのアドバタイズメントをスキャンしていることを確認してください。UA は、同じデバイスの "重複した" アドバタイズメントを除外するべきではありません。
        <li> UA がスキャンの有効化に失敗した場合は、次のいずれかのエラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。：
          <dl class="switch">
            <dt> UA がアドバタイズメントのスキャンをサポートしていない場合
            <dd><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code>
            <dt>Bluetooth がオフになっている場合
            <dd><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror">InvalidStateError</a></code>
            <dt>それ意外の場合
            <dd><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#unknownerror">UnknownError</a></code>
          </dl>
        <li>
          以下のステップを実行するために<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
          <ol>
            <li><code>this.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-2">watchingAdvertisements</a></code></code> を <code>true</code> にセットします。
            <li><code>undefined</code> とともに <var>promise</var> を Resolve します。
          </ol>
      </ol>
      <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="method" data-export="" id="dom-bluetoothdevice-unwatchadvertisements">unwatchAdvertisements()</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
        <li><co de>this.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-3">watchingAdvertisements</a></code></code> を <code>false</code> にセットします。
        <li> UA全体の中で <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-21">BluetoothDevice</a></code> にこれ以上 <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-4">watchingAdvertisements</a></code> に <code>ture</code> がセットされていない場合、UA はアドバタイズメントのスキャンを停止する必要があります。同様に、<code>this</code> として同一デバイスを表す <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-22">BluetoothDevice</a></code> の <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-5">watchingAdvertisements</a></code> に <code>true</code> がこれ以上セットされていない場合、UA はこのデバイスのレポートを受信しないようにスキャンを再構成する必要があります。
     </ol>
     <section>
       <h4 class="heading settled" data-level="4.2.1" id="advertising-events"><span class="secno">4.2.1. </span><span class="content">Responding to Advertising Events</span><a class="self-link" href="#advertising-events"></a></h4>
       <p> アドバタイズイベントが <code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-6">watchingAdvertisements</a></code> のセットとともに <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-23">BluetoothDevice</a></code> に届くと、UA は "<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-advertisementreceived" id="ref-for-eventdef-bluetoothdevice-advertisementreceived-1">advertisementreceived</a></code>" を提供します。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothmanufacturerdatamap" id="ref-for-bluetoothmanufacturerdatamap-1">BluetoothManufacturerDataMap</a> {
  <span class="kt">readonly</span> <span class="kt">maplike</span>&lt;<span class="kt">unsigned</span> <span class="kt">short</span>, <span class="kt">DataView</span>>;
};
<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothservicedatamap" id="ref-for-bluetoothservicedatamap-1">BluetoothServiceDataMap</a> {
  <span class="kt">readonly</span> <span class="kt">maplike</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-3">UUID</a>, <span class="kt">DataView</span>>;
};
[<a class="nv idl-code" data-link-type="constructor" href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent" id="ref-for-dom-bluetoothadvertisingevent-bluetoothadvertisingevent-1">Constructor</a>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEvent/BluetoothAdvertisingEvent(type, init)" data-dfn-type="argument" data-export="" id="dom-bluetoothadvertisingevent-bluetoothadvertisingevent-type-init-type">type<a class="self-link" href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent-type-init-type"></a></dfn>, <a class="n" data-link-type="idl-name" href="#dictdef-bluetoothadvertisingeventinit" id="ref-for-dictdef-bluetoothadvertisingeventinit-1">BluetoothAdvertisingEventInit</a> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEvent/BluetoothAdvertisingEvent(type, init)" data-dfn-type="argument" data-export="" id="dom-bluetoothadvertisingevent-bluetoothadvertisingevent-type-init-init">init<a class="self-link" href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent-type-init-init"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="bluetoothadvertisingevent">BluetoothAdvertisingEvent</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-24">BluetoothDevice</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice" href="#dom-bluetoothadvertisingevent-device" id="ref-for-dom-bluetoothadvertisingevent-device-1">device</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">FrozenArray</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-4">UUID</a>> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="FrozenArray<UUID>" href="#dom-bluetoothadvertisingevent-uuids" id="ref-for-dom-bluetoothadvertisingevent-uuids-1">uuids</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString?" href="#dom-bluetoothadvertisingevent-name" id="ref-for-dom-bluetoothadvertisingevent-name-1">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">short</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned short?" href="#dom-bluetoothadvertisingevent-appearance" id="ref-for-dom-bluetoothadvertisingevent-appearance-1">appearance</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">byte</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="byte?" href="#dom-bluetoothadvertisingevent-txpower" id="ref-for-dom-bluetoothadvertisingevent-txpower-1">txPower</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">byte</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="byte?" href="#dom-bluetoothadvertisingevent-rssi" id="ref-for-dom-bluetoothadvertisingevent-rssi-1">rssi</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothmanufacturerdatamap" id="ref-for-bluetoothmanufacturerdatamap-2">BluetoothManufacturerDataMap</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothManufacturerDataMap" href="#dom-bluetoothadvertisingevent-manufacturerdata" id="ref-for-dom-bluetoothadvertisingevent-manufacturerdata-1">manufacturerData</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothservicedatamap" id="ref-for-bluetoothservicedatamap-2">BluetoothServiceDataMap</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothServiceDataMap" href="#dom-bluetoothadvertisingevent-servicedata" id="ref-for-dom-bluetoothadvertisingevent-servicedata-1">serviceData</a>;
};
<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-bluetoothadvertisingeventinit">BluetoothAdvertisingEventInit</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <span class="kt">required</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-25">BluetoothDevice</a> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="BluetoothDevice " id="dom-bluetoothadvertisingeventinit-device">device<a class="self-link" href="#dom-bluetoothadvertisingeventinit-device"></a></dfn>;
  <span class="kt">sequence</span>&lt;(<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>)> <dfn class="nv dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="sequence<(DOMString or unsigned long)> " id="dom-bluetoothadvertisingeventinit-uuids">uuids</dfn>;
  <span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="DOMString " id="dom-bluetoothadvertisingeventinit-name">name<a class="self-link" href="#dom-bluetoothadvertisingeventinit-name"></a></dfn>;
  <span class="kt">unsigned</span> <span class="kt">short</span> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="unsigned short " id="dom-bluetoothadvertisingeventinit-appearance">appearance<a class="self-link" href="#dom-bluetoothadvertisingeventinit-appearance"></a></dfn>;
  <span class="kt">byte</span> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="byte " id="dom-bluetoothadvertisingeventinit-txpower">txPower<a class="self-link" href="#dom-bluetoothadvertisingeventinit-txpower"></a></dfn>;
  <span class="kt">byte</span> <dfn class="nv idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="byte " id="dom-bluetoothadvertisingeventinit-rssi">rssi<a class="self-link" href="#dom-bluetoothadvertisingeventinit-rssi"></a></dfn>;
  <a class="n" data-link-type="idl-name" href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="Map " id="dom-bluetoothadvertisingeventinit-manufacturerdata">manufacturerData</dfn>;
  <a class="n" data-link-type="idl-name" href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEventInit" data-dfn-type="dict-member" data-export="" data-type="Map " id="dom-bluetoothadvertisingeventinit-servicedata">serviceData</dfn>;
};
</pre>
       <div class="note no-marker" data-link-for-hint="BluetoothAdvertisingEvent" role="note">
       <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetoothadvertisingevent" id="ref-for-bluetoothadvertisingevent-1">BluetoothAdvertisingEvent</a></code> 属性</div>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-uuids">uuids</dfn> が Service の UUID をリストすることは、このアドバタイズメントが <code class="idl"><a data-link-type="idl" href="#dom-bluetoothadvertisingevent-device" id="ref-for-dom-bluetoothadvertisingevent-device-2">device</a></code> の GATT server をサポートしているということです。 </p>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-name">name</dfn> は <code class="idl"><a data-link-type="idl" href="#dom-bluetoothadvertisingevent-device" id="ref-for-dom-bluetoothadvertisingevent-device-3">device</a></code> のローカルネーム、またはそのプレフィックスです。</p>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-appearance">appearance</dfn> は <a data-link-type="dfn" href="#appearance" id="ref-for-appearance-1">Appearance</a>、<code class="idl"><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.gap.appearance.xml#">org.bluetooth.characteristic.gap.appearance</a></code> characteristic によって定義される値の一つです。</p>


       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-txpower">txPower</dfn> はデバイスがブロードキャストする時の送信電力で、単位はdBmで測定されます。この値は、<code>this.txPower - this.rssi</code> により、パス損失を計算するために使用します。</p>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-rssi">rssi</dfn> はデバイスパケットが受診された時の電力で、単位はdBmで測定されます。この値は、<code>this.txPower - this.rssi</code> により、パス損失を計算するために使用します。 </p>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-manufacturerdata">manufacturerData</dfn> maps <code>unsigned short</code> は、<code>unsigned short</code> 会社識別コード(Company Identifier Code) を<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> にマップします。</p>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="attribute" data-export="" id="dom-bluetoothadvertisingevent-servicedata">serviceData</dfn> は、<code class="idl"><a data-link-type="idl" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-3">UUID</a></code>群を <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> にマップします。</p>
      </div>
      <div class="example" id="example-interpret-ibeacon">
       <a class="self-link" href="#example-interpret-ibeacon"></a>
         <p>
         デバイスを取得し、そこから iBeacon データを読み込むため、以下のコードを開発者は利用できます。このAPIは、現在のところ、ある manufacturer data をデバイスに要求する方法を提供していないことに注意してください。従って、ユーザーがこのデバイスを <code>requestDevice</code> ダイアログの中で選ぶには、iBeacon は既知サービスに含むためにアドバタイズメントを循環させて必要があるでしょう。</p>
<pre class="highlight"><span class="kd">var</span> <span class="nx">known_service</span> <span class="o">=</span> <span class="s2">"A service in the iBeacon’s GATT server"</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">bluetooth</span><span class="p">.</span><span class="nx">requestDevice</span><span class="p">({</span>
  <span class="nx">filters</span><span class="o">:</span> <span class="p">[{</span><span class="nx">services</span><span class="o">:</span> <span class="p">[</span><span class="nx">known_service</span><span class="p">]}]</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">device</span> <span class="o">=></span> <span class="p">{</span>
  <span class="nx">device</span><span class="p">.</span><span class="nx">watchAdvertisements</span><span class="p">();</span>
  <span class="nx">device</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'advertisementreceived'</span><span class="p">,</span> <span class="nx">interpretIBeacon</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">interpretIBeacon</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">rssi</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">rssi</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">appleData</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">manufacturerData</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><a href="https://www.bluetooth.org/en-us/specification/assigned-numbers/company-identifiers" title="Apple, Inc.&apos;s Company Identifier"><span class="mh">0x004C</span></a><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">appleData</span><span class="p">.</span><span class="nx">byteLength</span> <span class="o">!=</span> <span class="mi">23</span> <span class="o">||</span>
    <span class="nx">appleData</span><span class="p">.</span><span class="nx">getUint16</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span> <span class="o">!==</span> <span class="mh">0x0215</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span><span class="nx">isBeacon</span><span class="o">:</span> <span class="kc">false</span><span class="p">});</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">uuidArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Uint8Array</span><span class="p">(</span><span class="nx">appleData</span><span class="p">.</span><span class="nx">buffer</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">major</span> <span class="o">=</span> <span class="nx">appleData</span><span class="p">.</span><span class="nx">getUint16</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">minor</span> <span class="o">=</span> <span class="nx">appleData</span><span class="p">.</span><span class="nx">getUint16</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">txPowerAt1m</span> <span class="o">=</span> <span class="o">-</span><span class="nx">appleData</span><span class="p">.</span><span class="nx">getInt8</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">({</span>
      <span class="nx">isBeacon</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">uuidArray</span><span class="p">,</span>
      <span class="nx">major</span><span class="p">,</span>
      <span class="nx">minor</span><span class="p">,</span>
      <span class="nx">pathLossVs1m</span><span class="o">:</span> <span class="nx">txPowerAt1m</span> <span class="o">-</span> <span class="nx">rssi</span><span class="p">});</span>
<span class="p">});</span>
</pre>
       <p>iBeacon 形式のアドバタイズメントは、<a href="http://www.warski.org/blog/2014/01/how-ibeacons-work/">How do iBeacons work?</a> (by Adam Warski) に由来しています。 </p>
      </div>
       <p id="advertising-event-algorithm">UA は、(アドバタイジングパケットおよびオプションのスキャン応答からなる)アドバタイジングイベントを受信すると、以下のステップを実行する必要があります。：</p>
       <ol class="algorithm">
         <li> <var>device</var> を、アドバタイジングイベントを送信した <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-15">Bluetooth device</a> にします。
         <li> UA の各 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-27">BluetoothDevice</a></code> <var>deviceObj</var> について、<var>device</var> が <a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-5">同一デバイス</a>であるような <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-4">[[representedDevice]]</a></code></code> には、以下のサブステップを実行するために、<var>deviceObj</var> の <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a> の <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a> に <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
           <ol>
             <li> <code><var>deviceObj</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-watchingadvertisements" id="ref-for-dom-bluetoothdevice-watchingadvertisements-7">watchingAdvertisements</a></code></code> が <code>false</code> の場合、以下のサブステップを中止します。
             <li> <var>deviceObj</var> のアドバタイズイベント に対して <a data-link-type="dfn" href="#fire-an-advertisementreceived-event" id="ref-for-fire-an-advertisementreceived-event-1"><code>advertisementreceived</code> を開始</a>します。
           </ol>
       </ol>
       <p> <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-28">BluetoothDevice</a></code> <var>deviceObj</var> の アドバタイズイベント <var>adv</var> に対して <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="fire-an-advertisementreceived-event"><code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-advertisementreceived" id="ref-for-eventdef-bluetoothdevice-advertisementreceived-2">advertisementreceived</a></code> イベントを開始する</dfn>ために、UA は以下のステップを実行しなければなりません。：</p>
       <ol class="algorithm">
         <li>
           <var>event</var> を以下のようにします。
<pre class="highlight"><span class="p">{</span>
  <span class="nx">bubbles</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">device</span><span class="o">:</span> <var><span class="nx">deviceObj</span></var><span class="p">,</span>
  <span class="nx">uuids</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">manufacturerData</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(),</span>
  <span class="nx">serviceData</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">()</span>
<span class="p">}</span>
</pre>
         <li> いずれの <var>adv</var> 内のパケットに対して <a data-link-type="dfn" href="#rssi" id="ref-for-rssi-1">received signal strength</a> が利用可能の場合、<code><var>event</var>.rssi</code> を dBm 単位でこの信号強度にセットします。
         <li> <var>adv</var> のアドバタイズパケットとスキャン応答の各 <a data-link-type="dfn" href="#ad-structure" id="ref-for-ad-structure-1">AD structure</a> に対して、AD タイプに応じて以下のステップから選択します。：
           <dl class="switch">
             <dt>Incomplete List of 16-bit <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-4">Service UUIDs</a>
             <dt>Complete List of 16-bit <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-5">Service UUIDs</a>
             <dt>Incomplete List of 32-bit <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-6">Service UUIDs</a>
             <dt>Complete List of 32-bit <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-7">Service UUIDs</a>
             <dt>Incomplete List of 128-bit <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-8">Service UUIDs</a>
             <dt>Complete List of 128-bit <a data-link-type="dfn" href="#service-uuid-data-type" id="ref-for-service-uuid-data-type-9">Service UUIDs</a>
             <dd>リストされた UUID を <code><var>event</var>.uuids</code> にアペンドします。
             <dt>Shortened <a data-link-type="dfn" href="#local-name-data-type" id="ref-for-local-name-data-type-1">Local Name</a>
             <dt>Complete <a data-link-type="dfn" href="#local-name-data-type" id="ref-for-local-name-data-type-2">Local Name</a>
             <dd>
               AD データに<a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom">BOM 無しで UTF-8 デコード</a>し、<code><var>event</var>.name</code> を結果にセットします。
               <p class="note" role="note">注記: 私たちは、既存の API がこの情報を取得するために、生のアドバタイズメントを読み取ることを要求するため、name が完了したかどうか公開されていません。そして、私たちは、それが API にフィールドを追加する前に有用だという証拠をより多く求めています。</p>
             <dt><a data-link-type="dfn" href="#manufacturer-specific-data" id="ref-for-manufacturer-specific-data-1">Manufacturer Specific Data</a>
             <dd> 16ビットの固有識別コードから manufacturer 固有のデータを含む <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> へのマッピングを <code><var>event</var>.manufacturerData</code> に追加します。
             <dt><a data-link-type="dfn" href="#tx-power-level" id="ref-for-tx-power-level-1">TX Power Level</a>
             <dd> <code><var>event</var>.txPower</code> を AD data にセットします。
             <dt><a data-link-type="dfn" href="#service-data" id="ref-for-service-data-1">Service Data</a> - 16 bit UUID
             <dt><a data-link-type="dfn" href="#service-data" id="ref-for-service-data-2">Service Data</a> - 32 bit UUID
             <dt><a data-link-type="dfn" href="#service-data" id="ref-for-service-data-3">Service Data</a> - 128 bit UUID
             <dd>
             <code><var>event</var>.serviceData</code> a mapping from the <a data-link-type="dfn" href="#uuid" id="ref-for-uuid-2">UUID</a> から サービスデータを含む <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> へのマッピングを <code><var>event</var>.serviceData</code> に追加します。
             <dt><a data-link-type="dfn" href="#appearance" id="ref-for-appearance-2">Appearance</a>
             <dd> <code><var>event</var>.appearance</code> を AD data にセットします。
             <dt>そうでない場合
             <dd>次の AD structure にスキップします。
           </dl>
         <li> <var>deviceObj</var> にて、その <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted">isTrusted</a></code> 属性を <code>true</code> に初期化して、<code>新たな <code class="idl"><a data-link-type="idl" href="#bluetoothadvertisingevent" id="ref-for-bluetoothadvertisingevent-2">BluetoothAdvertisingEvent</a></code>("<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-advertisementreceived" id="ref-for-eventdef-bluetoothdevice-advertisementreceived-3">advertisementreceived</a></code>", <var>event</var>)</code> として初期化する<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
       </ol>
      <p><code class="idl"><a data-link-type="idl" href="#bluetoothadvertisingevent" id="ref-for-bluetoothadvertisingevent-3">BluetoothAdvertisingEvent</a></code> 内の全フィールドは、初期化またはセットされた最後の値を返します。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothAdvertisingEvent" data-dfn-type="constructor" data-export="" id="dom-bluetoothadvertisingevent-bluetoothadvertisingevent">BluetoothAdvertisingEvent(type, init)</dfn> constructor は以下のステップを実行する必要があります。：</p>
      <ol class="algorithm">
        <li> <var>event</var> を、<code class="idl"><a data-link-type="idl" href="#dom-bluetoothadvertisingeventinit-uuids" id="ref-for-dom-bluetoothadvertisingeventinit-uuids-1">uuids</a></code>、<code class="idl"><a data-link-type="idl" href="#dom-bluetoothadvertisingeventinit-manufacturerdata" id="ref-for-dom-bluetoothadvertisingeventinit-manufacturerdata-1">manufacturerData</a></code>、および <code class="idl"><a data-link-type="idl" href="#dom-bluetoothadvertisingeventinit-servicedata" id="ref-for-dom-bluetoothadvertisingeventinit-servicedata-1">serviceData</a></code> メンバーを除いた <a href="https://dom.spec.whatwg.org/#constructing-events">DOM §3.4 Constructing events</a> からのステップを実行した結果とします。
        <li> <code><var>init</var>.uuids</code> がセットされている場合、<code><var>event</var>.uuids</code> を  <code><var>init</var>.uuids.map(<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-5">BluetoothUUID.getService</a></code>)</code> の要素を含む新しい <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> に初期化します。 そうでない場合は、<code><var>event</var>.uuids</code> を空の <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> に初期化します。
        <li>
          <code><var>init</var>.manufacturerData</code> 内の各マッピングに対して：
          <ol>
            <li> <var>code</var> は <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-unsignedshort">unsigned short</a></code> に変換されたキーとします。
            <li> <var>value</var> は値とします。
            <li> <var>value</var> が <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a></code> でない場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローします。
            <li> <var>bytes</var> を、<var>value</var> により<a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">保持されているバイトのコピー</a> を含む <a data-link-type="dfn" href="#read-only-arraybuffer" id="ref-for-read-only-arraybuffer-1">read only ArrayBuffer</a> にします。
            <li> <var>code</var> から <code><var>event</var>.manufacturerData@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothmanufacturerdatamap-data-slot" id="ref-for-dom-bluetoothmanufacturerdatamap-data-slot-1">[[data]]</a></code></code> の <code>new DataView(<var>bytes</var>)</code> へのマッピングを追加します。
          </ol>
        <li>
          <code><var>init</var>.serviceData</code> 内の各マッピングに対して：
          <ol>
            <li> <var>key</var> をキーにします。
            <li> <var>service</var> は <code>BluetoothUUID.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-6">getService</a></code>(<var>key</var>).</code> をコールした結果にします。
            <li> <var>value</var> を値にします。
            <li> <var>value</var> が <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a></code> でない場合、<code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> をスローします。
            <li> <var>bytes</var> を、<var>value</var> により<a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">保持されているバイトのコピー</a> を含む <a data-link-type="dfn" href="#read-only-arraybuffer" id="ref-for-read-only-arraybuffer-2">read only ArrayBuffer</a> にします。
            <li> <var>service</var> から <code><var>event</var>.serviceData@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothservicedatamap-data-slot" id="ref-for-dom-bluetoothservicedatamap-data-slot-1">[[data]]</a></code></code> の <code>new DataView(<var>bytes</var>)</code> へのマッピングを追加します。
          </ol>
        <li> <var>event</var> を返します。
      </ol>
      <section>
       <h5 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="4.2.1.1" data-lt="BluetoothManufacturerDataMap" id="bluetoothmanufacturerdatamap"><span class="secno">4.2.1.1. </span><span class="content">BluetoothManufacturerDataMap</span></h5>
       <p> 次のテーブルで説明する内部スロットを使用して、<code class="idl"><a data-link-type="idl" href="#bluetoothmanufacturerdatamap" id="ref-for-bluetoothmanufacturerdatamap-3">BluetoothManufacturerDataMap</a></code> インスタンスが作成されます。：</p>
       <table class="data">
        <thead>
         <tr>
           <th>内部スロット
           <th>初期値
           <th>説明(参考)
        <tbody>
         <tr>
          <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothManufacturerDataMap" data-dfn-type="attribute" data-export="" id="dom-bluetoothmanufacturerdatamap-data-slot">[[data]]</dfn>
          <td><code>new <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a></code>()</code>
          <td><code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> に変換されているアドバタイズされた manufacturer data
       </table>
       <p><code class="idl"><a data-link-type="idl" href="#bluetoothmanufacturerdatamap" id="ref-for-bluetoothmanufacturerdatamap-4">BluetoothManufacturerDataMap</a></code> インスタンスの  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-map-entries">map entries</a> は、<code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothmanufacturerdatamap-data-slot" id="ref-for-dom-bluetoothmanufacturerdatamap-data-slot-2">[[data]]</a></code></code> にあるエントリーです。</p>
      </section>
      <section>
        <h5 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="4.2.1.2" data-lt="BluetoothServiceDataMap" id="bluetoothservicedatamap"><span class="secno">4.2.1.2. </span><span class="content">BluetoothServiceDataMap</span></h5>
        <p>次のテーブルで説明する内部スロットを使用して、<code class="idl"><a data-link-type="idl" href="#bluetoothservicedatamap" id="ref-for-bluetoothservicedatamap-3">BluetoothServiceDataMap</a></code> インスタンスが作成されます。：</p>
       <table class="data">
        <thead>
         <tr>
           <th>内部スロット
           <th>初期値
           <th>説明(参考)
        <tbody>
         <tr>
          <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothServiceDataMap" data-dfn-type="attribute" data-export="" id="dom-bluetoothservicedatamap-data-slot">[[data]]</dfn>
          <code>new <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a></code>()</code>
          <td><code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> に変換されているアドバタイズされた service data
       </table>
       <p><code class="idl"><a data-link-type="idl" href="#bluetoothservicedatamap" id="ref-for-bluetoothservicedatamap-4">BluetoothServiceDataMap</a></code> インスタンスの <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-map-entries">map entries</a> は、<code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothservicedatamap-data-slot" id="ref-for-dom-bluetoothservicedatamap-data-slot-2">[[data]]</a></code></code> のエントリー群です。</p>
      </section>
     </section>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="gatt-interaction"><span class="secno">5. </span><span class="content">GATT Interaction</span><a class="self-link" href="#gatt-interaction"></a></h2>
    <section id="">
     <h3 class="heading settled" data-level="5.1" id="information-model"><span class="secno">5.1. </span><span class="content">GATT 情報モデル</span><a class="self-link" href="#information-model"></a></h3>
     <div class="note" role="note">
      <p><a data-link-type="dfn" href="#gatt-profile-hierarchy" id="ref-for-gatt-profile-hierarchy-1">GATT Profile Hierarchy</a> は、どのように <a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-2">GATT Server</a> が Profiles、Primary <a data-link-type="dfn" href="#service" id="ref-for-service-7">Service</a>、<a data-link-type="dfn" href="#included-service" id="ref-for-included-service-1">Included Service</a>、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-3">Characteristic</a>、 <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-3">Descriptor</a> の階層を格納しているかを記述します。</p>
      <p> Profile 群は純粋に論理的です。：
        Profile の仕様書には、その Profile を含む、他の GATT エンティティ群との間と期待されるインタラクションが記述されていますが、デバイスがどの Profile をサポートしているか問い合わせることはできません。</p>
      <p> <a data-link-type="dfn" href="#gatt-client" id="ref-for-gatt-client-1">GATT Client</a> 群は、<a data-link-type="dfn" href="#gatt-procedure" id="ref-for-gatt-procedure-1">GATT procedures</a> の集合を使っているデバイス上の Services、Characteristics、Descriptors を検索してインタラクションすることが可能です。本仕様ではこれらを総称して <dfn data-dfn-type="dfn" data-noexport="" id="attribute">Attribute<a class="self-link" href="#attribute"></a></dfn>群 と呼んでいます。
       全ての Attributes には、<a data-link-type="dfn" href="#uuid" id="ref-for-uuid-3">UUID</a> で識別される型があります。また、各 Attribute は <a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-4">GATT Server</a> 上で同じ型を持つ他の Attributes と区別する、16ビット <a data-link-type="dfn" href="#attribute-handle" id="ref-for-attribute-handle-1">Attribute Handle</a> を持っています。Attributes は、概念的には <a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-5">GATT Server</a> 内で <a data-link-type="dfn" href="#attribute-handle" id="ref-for-attribute-handle-2">Attribute Handle</a> により順位付けられています。プラットフォームインタフェースは、これらのエンティティ群をある順序で提供していますが、<a data-link-type="dfn" href="#attribute-handle" id="ref-for-attribute-handle-3">Attribute Handle</a> の順序と一致することは保証しません。</p>
      <p data-link-for-hint="BluetoothRemoteGATTService">
        <a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-2">Service</a> には、<a data-link-type="idl" href="#dom-bluetoothremotegattservice-getincludedservice" id="ref-for-dom-bluetoothremotegattservice-getincludedservice-1">Included Service</a>群と <a data-link-type="idl" href="#dom-bluetoothremotegattservice-getcharacteristic" id="ref-for-dom-bluetoothremotegattservice-getcharacteristic-4">Characteristic</a>群のコレクションが含まれます。Included Service群は、他の Service 群への参照で、1つの Service を他の1つ以上の Service に含めることができます。Service群は、 <a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-3">GATT Server</a> に直接現れる場合、<a data-link-type="idl" href="#dom-bluetoothremotegattservice-isprimary" id="ref-for-dom-bluetoothremotegattservice-isprimary-1">Primary Services</a> と呼ばれます。また、他の Service に含まれるだけで Primary Services にも含まれる可能性がある場合、Secondary Services と呼ばれます。</p>
      <p data-link-for-hint="BluetoothRemoteGATTCharacteristic">
        <a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-3">Characteristic</a> には(バイトの配列である)値と、<a data-link-type="idl" href="#dom-bluetoothremotegattcharacteristic-getdescriptor" id="ref-for-dom-bluetoothremotegattcharacteristic-getdescriptor-1">Descriptor</a>群のコレクションを格納します。
        Characteristic の <a data-link-type="idl" href="#bluetoothcharacteristicproperties" id="ref-for-bluetoothcharacteristicproperties-1">properties</a> によっては、<a data-link-type="dfn" href="#gatt-client" id="ref-for-gatt-client-2">GATT Client</a> は、値の読み書きができ、また、値が変化した時に通知を受け取るよう登録ができます。</p>
      <p>最後に、<a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-2">Descriptor</a> は、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-4">Characteristic</a> を記述したり構成する(これもバイトの配列である)値を格納します。</p>
     </div>
     <section>
       <h4 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="5.1.1" data-lt="Bluetooth cache" data-noexport="" id="bluetooth-cache"><span class="secno">5.1.1. </span><span class="content">The Bluetooth cache</span></h4>
       <p>
        UA は、これまでにデバイス上で検索した Services、Characteristics、Descriptors の階層の <a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-4">Bluetooth cache</a> を保持しなければなりません。UA は、同一デバイスをアクセスする複数のオリジン間でこのキャッシュを共有できます。キャッシュ内のエンティティは、known-present 、known-absent、あるいはunknownのいずれかが可能です。cache には、<a data-link-type="dfn" href="#same-attribute" id="ref-for-same-attribute-1">同一属性</a>に対してエンティティを２つ格納してはいけません。キャッシュの各 known-present エンティティは、各 <code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-11">Bluetooth</a></code>  インスタンスに対して <code>Promise&lt;<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-3">BluetoothRemoteGATTService</a></code>></code>、<code>Promise&lt;<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-4">BluetoothRemoteGATTCharacteristic</a></code>></code>、<code>Promise&lt;<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-3">BluetoothRemoteGATTDescriptor</a></code>></code> のインスタンスがオプションで関連付けられています。</p>
      <p class="note" role="note">
        例えば、ユーザーが <code>serviceA.getCharacteristic(uuid1)</code> 関数を、初期状態が空の <a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-5">Bluetooth cache</a> でコールした場合、UA はUUIDプロシージャによって <a data-link-type="dfn" href="#discover-characteristics-by-uuid" id="ref-for-discover-characteristics-by-uuid-1">Discover Characteristics</a> を仕様し、必要なキャッシュエントリ群を埋めます。返された <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></code> を埋めるには Characteristic が1つだけ必要で、<code>serviceA</code> の最初の Characteristic with UUID <code>uuid1</code> は known-present で、その UUID を持つそれ以降の Characteristic 群は unknown のままです。そのため、この手続きは UA では早く終了します。ユーザが後で <code>serviceA.getCharacteristics(uuid1)</code> をコールすれば、UA は  <a data-link-type="dfn" href="#discover-characteristics-by-uuid" id="ref-for-discover-characteristics-by-uuid-2">Discover Characteristics by UUID</a> procedure を再開または再スタートする必要があります。<code>serviceA</code> だけが UUID <code>uuid1</code> を持つ Characteristic を1つしか持たないことがわかった場合、
        それ以降の Characteristic 群は known-absent になります。</p>
      <p><a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-6">Bluetooth cache</a> 内の known-present エントリー群は順序付けられています。：Primary Service 群はデバイス内で、含まれている Services と Characteristics は Services 内で、Descriptors は Characteristics 内で、それぞれ、ある特定の順序で現れます。この順序は、デバイスの<a data-link-type="dfn" href="#attribute-handle" id="ref-for-attribute-handle-4">Attribute Handle</a> 群の順序とマッチする必要がありますが、デバイスの順序が利用できない場合、UA は別の順序を使えます。</p>
      <p>ある description とマッチするエントリーを <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="populate the Bluetooth cache" data-noexport="" id="populate-the-bluetooth-cache">Bluetooth cache に格納する<span class="dfn-panel" data-deco=""><b><a href="#populate-the-bluetooth-cache">#populate-the-bluetooth-cache</a></b><b>Referenced in:</b><span><a href="#ref-for-populate-the-bluetooth-cache-1">3. Device Discovery</a></span><span><a href="#ref-for-populate-the-bluetooth-cache-2">4.3. BluetoothDevice</a> <a href="#ref-for-populate-the-bluetooth-cache-3">(2)</a></span><span><a href="#ref-for-populate-the-bluetooth-cache-4">5.1.1. The Bluetooth cache</a></span></span></dfn> 場合、UA は以下のステップを実行しなければなりません。：
        <span class="note" role="note">以下のステップはブロックされる可能性があることに注意してください。従って、このアルゴリズムを利用するには <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">並列に</a>実行しなければなりません。
          </span></p>
      <ol class="algorithm">
       <li><a data-link-type="biblio" href="#biblio-bluetooth42">[BLUETOOTH42]</a> が規定する <a data-link-type="dfn" href="#gatt-procedure" id="ref-for-gatt-procedure-2">GATT procedures</a> のいずれをシーケンスを用いて、キャッシュ内のマッチするエントリー全てを known-present または known-absent にすれば、十分な情報が返されるでしょう。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーを処理します。
       <li>以前のステップでエラーが返された場合、このアルゴリズムからそのエラーを返してください。
      </ol>
       <p> ある description にマッチするエントリー群に対して、 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-29">BluetoothDevice</a></code> インスタンスの <var>deviceObj</var> に <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="query-the-bluetooth-cache">luetooth cache を問い合わせる<span class="dfn-panel" data-deco=""><b><a href="#query-the-bluetooth-cache">#query-the-bluetooth-cache</a></b><b>Referenced in:</b><span><a href="#ref-for-query-the-bluetooth-cache-1">5.1.2. Navigating the Bluetooth Hierarchy</a></span><span><a href="#ref-for-query-the-bluetooth-cache-2">5.1.3. Identifying Services, Characteristics, and Descriptors</a></span></span></dfn> には、UA は<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> の <code><var>deviceObj</var>.gatt</code>-<a data-link-type="dfn" href="#connection-checking-wrapper" id="ref-for-connection-checking-wrapper-1">connection-checking wrapper</a> を返し、同時に以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
       <li><code><var>deviceObj</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-2">connected</a></code></code> の値が <code>false</code> だった場合、 <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
       <li>記述とマッチするエントリーを <a data-link-type="dfn" href="#populate-the-bluetooth-cache" id="ref-for-populate-the-bluetooth-cache-3">Bluetooth cache に格納</a>します。
       <li>以前のステップでエラーが返された場合、そのエラーで <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
       <li> エントリー群を、記述とマッチする known-present キャッシュエントリーのシーケンスにします。
       <li><var>context</var> を <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-context-slot" id="ref-for-dom-bluetoothdevice-context-slot-2">[[context]]</a></code></code> にします。
       <li><var>result</var> を新しいシーケンスにします。
       <li>
         <var>entries</var> の各 <var>entry</var>に対して：
        <ol>
         <li> <var>entry</var> が <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-attributeinstancemap-slot" id="ref-for-dom-bluetooth-attributeinstancemap-slot-1">[[attributeInstanceMap]]</a></code> の <code>Promise&lt;BluetoothGATT*></code> インスタンスと関連付けられていない場合、エントリーが、Service, Characteristic, or Descriptor,に応じて、エントリーを表す<code>BluetoothRemoteGATTService</code> representing</a> <var>entry</var>, <a data-link-type="dfn" href="#create-a-bluetoothremotegattcharacteristic-representing" id="ref-for-create-a-bluetoothremotegattcharacteristic-representing-1">create a <code>BluetoothRemoteGATTCharacteristic</code> representing</a> <var>entry</var>,
           or <a data-link-type="dfn" href="#create-a-bluetoothremotegattdescriptor-representing" id="ref-for-create-a-bluetoothremotegattdescriptor-representing-1">create a <code>BluetoothRemoteGATTDescriptor</code> representing</a> <var>entry</var> を作成します。そして、エントリーから結果として得られた <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-attributeinstancemap-slot" id="ref-for-dom-bluetooth-attributeinstancemap-slot-2">[[attributeInstanceMap]]</a></code> の <code>Promise</code> へのマッピングを追加します。
         <li> <var>context</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-attributeinstancemap-slot" id="ref-for-dom-bluetooth-attributeinstancemap-slot-3">[[attributeInstanceMap]]</a></code> のエントリーに関連した <code>Promise&lt;BluetoothGATT*></code> インスタンスを <var>result</var> にアペンドします。
        </ol>
       <li> <var>result</var> の全エレメントを待っている結果を用いて、<var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
      </ol>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.1.2" id="navigating-bluetooth-hierarchy"><span class="secno">5.1.2. </span><span class="content">Bluetooth 階層ナビゲーション</span><a class="self-link" href="#navigating-bluetooth-hierarchy"></a></h4>
      <p> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="getgattchildren">GetGATTChildren</dfn>(<span class="argument-list"><var>attribute</var>: GATT Attribute,<br> <var>single</var>: boolean,<br> <var>uuidCanonicalizer</var>: function,<br> <var>uuid</var>: optional <code>(DOMString or unsigned int)</code>,<br> <var>allowedUuids</var>: optional <code>("all" or Array&lt;DOMString>)</code>,<br> <var>child type</var>: GATT declaration type),</span><br> のために、UA 以下のステップを実行しなければなりません。：</p>
       <ol class="algorithm">
       <li> <var>uuid</var> が存在する場合、それを <var>uuidCanonicalizer</var>(<var>uuid</var>) にセットします。<var>uuidCanonicalizer</var> で例外がスローされた場合、その例外で <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を rejecte して</a>返し、以下のステップを中止します。
       <li> <var>uuid</var> が存在し、<a data-link-type="dfn" href="#blacklisted" id="ref-for-blacklisted-3">blacklisted</a> されている場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> で<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、以下のステップを中止します。
       <li>
         <var>deviceObj</var> を <var>attribute</var> のタイプに応じて、以下のようにします。：
        <dl class="switch">
         <dt><code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-30">BluetoothDevice</a></code>
         <dd><code><var>attribute</var></code>
         <dt><code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-4">BluetoothRemoteGATTService</a></code>
         <dd><code><var>attribute</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattservice-device" id="ref-for-dom-bluetoothremotegattservice-device-1">device</a></code></code>
         <dt><code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-5">BluetoothRemoteGATTCharacteristic</a></code>
         <dd><code><var>attribute</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattcharacteristic-service" id="ref-for-dom-bluetoothremotegattcharacteristic-service-1">service</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattservice-device" id="ref-for-dom-bluetoothremotegattservice-device-2">device</a></code></code>
        </dl>
       <li>
        以下の条件に合うエントリーを、<code><var>deviceObj</var></code> の <a data-link-type="dfn" href="#query-the-bluetooth-cache" id="ref-for-query-the-bluetooth-cache-1">Bluetooth cache に問い合わせ</a>します。：
        <ul>
         <li><var>attribute</var> により表現されている Bluetooth エンティティ内部にあること。
         <li><var>child type</var> で記述された型を持っていること。
         <li><var>uuid</var> が存在する場合、<var>uuid</var> の UUID を有していること。
         <li><var>allowedUuids</var> が存在し、"all" でない場合に、<var>allowedUuids</var> に UUID があること。
         <li><var>single</var> フラグがセットされている倍、その中で最初であること。
        </ul>
         <var>promise</var> を結果にセットします。
       <li>
         以下の動作をする fulfillment handler を使用して、<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#transforming-by">transforming</a> <var>promise</var> の結果を返します。：
        <ul>
         <li>引数が空の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notfounderror">NotFoundError</a></code> をスローします。
         <li> そうでない場合で、<var>single</var> フラグがセットされている場合、この引数の最初(だけ)のエレメントを返します。
         <li>そうでない場合、その引数を返します。
        </ul>
      </ol>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.1.3" id="identifying-attributes"><span class="secno">5.1.3. </span><span class="content">Services、Characteristics、Descriptors の識別子</span><a class="self-link" href="#identifying-attributes"></a></h4>
      <p> 2つの Services、Characteristics、Descriptors <var>a</var> と <var>b</var> が <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="same attribute" data-noexport="" id="same-attribute">同一属性<span class="dfn-panel" data-deco=""><b><a href="#same-attribute">#same-attribute</a></b><b>Referenced in:</b><span><a href="#ref-for-same-attribute-1">5.1.1. The Bluetooth cache</a></span><span><a href="#ref-for-same-attribute-2">5.1.3. Identifying Services, Characteristics, and Descriptors</a> <a href="#ref-for-same-attribute-3">(2)</a> <a href="#ref-for-same-attribute-4">(3)</a></span><span><a href="#ref-for-same-attribute-5">5.6.5. Responding to Service Changes</a></span></span></dfn>かチェックする場合、
        UA は <var>a</var> と <var>b</var> が <a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-6">同一デバイス</a>の中にあり、同一の <a data-link-type="dfn" href="#attribute-handle" id="ref-for-attribute-handle-5">Attribute Handle</a> を持つことを判断する必要があります。
        しかし、<var>a</var> と <var>b</var> が以下の条件のいずれかに適合する場合、<a data-link-type="dfn" href="#same-attribute" id="ref-for-same-attribute-2">同一属性</a>とみなしてはいけない制約を持つ、UA が利用できる任意のアルゴリズムを使用することができます。：</p>
      <ul>
       <li>両方が Services でも Characteristics でも Descriptors でもない。
       <li>両方が Services であるが、両方が、primary services または secondary services ではない。
       <li>異なる UUID を持っている。
       <li>親デバイスが<a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-7">同一デバイス</a>ではなく、親 Services または親 Characteristics が <a data-link-type="dfn" href="#same-attribute" id="ref-for-same-attribute-3">同一属性</a>ではない。
      </ul>
      <p class="note" role="note"> この定義は緩くなっています。Platform API 群は、同一性が <a data-link-type="dfn" href="#attribute-handle" id="ref-for-attribute-handle-6">Attribute Handle</a> の等価性に基づくものなのかどうかを文章化しないまま、同一性の概念を公開しているからです。</p>
      <p class="note" role="note">Services、Characteristics、Descriptors を表現している <var>x</var> と <var>y</var> という2つの Javascript object に対して、<code><var>x</var> === <var>y</var></code> は、<a data-link-type="dfn" href="#query-the-bluetooth-cache" id="ref-for-query-the-bluetooth-cache-2">Bluetooth cache に問い合わせ</a>をするアルゴリズムが新しいオブジェクトを作成し、キャッシュする方法に起因する、オブジェクトが <a data-link-type="dfn" href="#same-attribute" id="ref-for-same-attribute-4">同一属性</a>を表現するかどうかを返します。</p>
     </section>
    </section>
    <section data-link-for-hint="BluetoothRemoteGATTServer">
      <h3 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="5.2" data-lt="BluetoothRemoteGATTServer" id="bluetoothremotegattserver"><span class="secno">5.2. </span><span class="content">BluetoothRemoteGATTServer</span><span id="bluetoothgattremoteserver"></span></h3>
      <p> <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-4">BluetoothRemoteGATTServer</a></code> は、リモートデバイス上の <a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-6">GATT Server</a> を表します。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-5">BluetoothRemoteGATTServer</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-31">BluetoothDevice</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice" href="#dom-bluetoothremotegattserver-device" id="ref-for-dom-bluetoothremotegattserver-device-2">device</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-3">connected</a>;
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-6">BluetoothRemoteGATTServer</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-connect" id="ref-for-dom-bluetoothremotegattserver-connect-2">connect</a>();
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-disconnect" id="ref-for-dom-bluetoothremotegattserver-disconnect-2">disconnect</a>();
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-5">BluetoothRemoteGATTService</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-getprimaryservice" id="ref-for-dom-bluetoothremotegattserver-getprimaryservice-2">getPrimaryService</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-5">BluetoothServiceUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTServer/getPrimaryService(service)" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattserver-getprimaryservice-service-service">service<a class="self-link" href="#dom-bluetoothremotegattserver-getprimaryservice-service-service"></a></dfn>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-6">BluetoothRemoteGATTService</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-getprimaryservices" id="ref-for-dom-bluetoothremotegattserver-getprimaryservices-1">getPrimaryServices</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-6">BluetoothServiceUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTServer/getPrimaryServices(service), BluetoothRemoteGATTServer/getPrimaryServices()" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattserver-getprimaryservices-service-service">service<a class="self-link" href="#dom-bluetoothremotegattserver-getprimaryservices-service-service"></a></dfn>);
};
</pre>
     <div class="note no-marker" role="note">
      <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-7">BluetoothRemoteGATTServer</a></code> attributes</div>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattserver-device">device</dfn> は、このサーバーを実行しているデバイスです。</p>
      <p> このインスタンスが <code>this.device</code> に接続されている間、<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattserver-connected">connected</dfn> は true です。UA が物理的に接続されている間で、例えば、他の <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a> 用に接続された他の <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-8">BluetoothRemoteGATTServer</a></code> インスタンスがある場合には false になることがあります。</p>
     </div>
     <p>
       ECMAScript コードが、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-9">BluetoothRemoteGATTServer</a></code> <var>server</var> のインスタンスを観測できなくなった時、UA は <code><var>server</var>.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-disconnect" id="ref-for-dom-bluetoothremotegattserver-disconnect-3">disconnect()</a></code></code> を実行する必要があります。<span class="note" role="note">
       <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-32">BluetoothDevice</a></code> インスタンスは <code>navigator.bluetooth.<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-deviceinstancemap-slot" id="ref-for-dom-bluetooth-deviceinstancemap-slot-4">[[deviceInstanceMap]]</a></code></code> に格納されているので、ナビゲーションが global object を開放するか、タブまたはウィンドウを閉じ、 <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a> が破壊されるまで、少なくともこのようなことは起こりえないのです。</span>
       <span class="note" role="note"> ガベージコレクション時に切断されますが、UA が必要もないのにリモートデバイスのリソースを消費し続けることがないことの保証になっています。</span></p>
     <p> 次のテーブルで説明される内部スロットを使用して、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-10">BluetoothRemoteGATTServer</a></code> のインスタンスが作成されます。：</p>
     <table class="data">
      <thead>
       <tr>
         <th>内部スロット
         <th>初期値
         <th>説明(参考)
      <tbody>
       <tr>
        <td><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattserver-activealgorithms-slot">[[activeAlgorithms]]</dfn>
        <td><code>new <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-set-objects">Set</a></code>()</code>
        <td>
         このサーバの接続を用いた各アルゴリズムに対応する <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></code> を含みます。<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-disconnect" id="ref-for-dom-bluetoothremotegattserver-disconnect-4">disconnect()</a></code> は、実行中にこの <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a> が切断されたことがあったかアルゴリズムで判断できるよう、この集合を空にします。
     </table>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattserver-connect">connect()</dfn></code> メソッドは、呼び出されると、<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
      <li><code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-5">[[representedDevice]]</a></code></code> が <code>null</code> の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li><code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-6">[[representedDevice]]</a></code></code> に <a data-link-type="dfn" href="#att-bearer" id="ref-for-att-bearer-3">ATT Bearer</a> が無い場合、<a data-link-type="dfn" href="#gap-interoperability-requirements" id="ref-for-gap-interoperability-requirements-2">GAP Interoperability Requirements</a> の「接続確立」で説明されるプロシージャを使って作成を試みます。
      <li>この試行が失敗したら、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li>
        以下のサブステップを実行するために<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
       <ol>
        <li><code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-7">[[representedDevice]]</a></code></code> が <code>null</code> の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li><code>this.connected</code> に <code>true</code> をセットします。
        <li><code>this</code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
       </ol>
     </ol>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattserver-disconnect">disconnect()</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li><code>this.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-4">connected</a></code></code> が <code>false</code> の場合、以下のステップを中止します。
      <li><code>this@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-1">[[activeAlgorithms]]</a></code></code> をクリアします。
      <li><code>this.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-5">connected</a></code></code> を <code>false</code> にします。
      <li>
       <code>this.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-device" id="ref-for-dom-bluetoothremotegattserver-device-3">device</a></code></code> で <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles">bubbles</a></code> 属性を <code>true</code> に初期化して、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-gattserverdisconnected" id="ref-for-eventdef-bluetoothdevice-gattserverdisconnected-2">gattserverdisconnected</a></code> という名前の<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
       <p class="note" role="note"> このイベントは、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-11">BluetoothRemoteGATTServer</a></code> では動作<em>しません</em>。</p>
      <li> <var>device</var> を <code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-8">[[representedDevice]]</a></code></code> にします。
      <li> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>：
       <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-9">[[representedDevice]]</a></code></code> をデバイスとして <a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-8">同一デバイス</a>を持つ UA 全体の 全 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-ee">BluetoothDevice</a></code>s <code><var>deviceObj</var></code> に対して、
       <code><var>deviceObj</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-7">connected</a></code></code> が <code>false</code> である場合、UA は <var>device</var> の <a data-link-type="dfn" href="#att-bearer" id="ref-for-att-bearer-4">ATT Bearer</a> を破壊する必要があります。
     </ol>
     <p class="note" role="note">実行中に <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-12">BluetoothRemoteGATTServer</a></code> が切断された場合、UA がずっと接続されており、終了前に <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-13">BluetoothRemoteGATTServer</a></code> がその後再接続されたとしても、アルゴリズムは fail する必要があります。これを達成するため、返された <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></code> のラッパーを作成します。</p>
     <p> <var>gattServer</var>-<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="connection-checking-wrapper">connection-checking wrapper</dfn> around a <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a></code> <var>promise</var> を作成するには、UA は以下のことが必要です。： </p>
      <ol class="algorithm">
      <li><code><var>gattServer</var>.connected</code> が <code>true</code> の場合、<var>promise</var> に <code><var>gattServer</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-2">[[activeAlgorithms]]</a></code></code> を追加します。
      <li> <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#transforming-by">transforming</a> <var>promise</var> の結果を、以下のステップを実行する fulfillment ハンドラと rejection ハンドラと一緒に返します。：
       <dl>
        <dt>fulfillment handler
        <dd>
         <ol class="algorithm">
          <li> <var>promise</var> が <code><var>gattServer</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-3">[[activeAlgorithms]]</a></code></code> にある場合、それを取り除き、最初の引数を返します。
          <li>そうでない場合には、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> をスローします。<span class="note" role="note"> <var>gattServer</var> はメインアルゴリズム実行中に切断されたからです。</span>
         </ol>
        <dt>rejection handler
        <dd>
         <ol class="algorithm">
          <li> <var>promise</var> が <code><var>gattServer</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-4">[[activeAlgorithms]]</a></code></code> にある場合、それを取り除き、最初の引数を返します。
          <li>そうでない場合には、 <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> をスローします。 <span class="note" role="note"> <var>gattServer</var> はメインアルゴリズム実行中に切断されたからです。</span>
         </ol>
       </dl>
     </ol>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattserver-getprimaryservice">getPrimaryService(<var>service</var>)</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
        <li> <code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-9">[[allowedServices]]</a></code></code> が <code>"all"</code> でなく、<var>service</var> が <code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-10">[[allowedServices]]</a></code></code> に無い場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> とともに <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject </a> して返し、以下のステップを中止します。
        <li> この値を返します。<a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-1">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this.device</code>,<br> <var>single</var>=true,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-7">BluetoothUUID.getService</a></code>,<br> <var>uuid</var>=<code><var>service</var></code>,<br> <var>allowedUuids</var>=<code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-11">[[allowedServices]]</a></code></code>,<br> <var>child type</var>="GATT Primary Service")</span>
     </ol>
      <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTServer" data-dfn-type="method" data-export="" data-lt="getPrimaryServices(service)|getPrimaryServices()" id="dom-bluetoothremotegattserver-getprimaryservices">getPrimaryServices(<var>service</var>)</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
       <li> <code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-12">[[allowedServices]]</a></code></code> が <code>"all"</code> ではなく、<var>service</var> が存在し、<code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-13">[[allowedServices]]</a></code></code> の中に無い場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> とともに <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject</a> して返し、以下のステップを中止します。
       <li> この値を返します。 <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-2">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-10">[[representedDevice]]</a></code></code>,<br> <var>single</var>=false,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-8">BluetoothUUID.getService</a></code>,<br> <var>uuid</var>=<code><var>service</var></code>,<br> <var>allowedUuids</var>=<code>this.device@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-14">[[allowedServices]]</a></code></code>,<br> <var>child type</var>="GATT Primary Service")</span>
     </ol>
    </section>
    <section>
     <h3 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="5.3" data-lt="BluetoothRemoteGATTService" id="bluetoothremotegattservice"><span class="secno">5.3. </span><span class="content">BluetoothRemoteGATTService</span><span id="bluetoothgattservice"></span></h3>
     <p> <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-7">BluetoothRemoteGATTService</a></code> は GATT <a data-link-type="dfn" href="#service" id="ref-for-service-8">Service</a> 、つまり、デバイスの一部の振る舞いをカプセル化する characteristic 群のコレクションと他の Service 群との関係を表わしています。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-8">BluetoothRemoteGATTService</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice" id="ref-for-bluetoothdevice-34">BluetoothDevice</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice" href="#dom-bluetoothremotegattservice-device" id="ref-for-dom-bluetoothremotegattservice-device-3">device</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-6">UUID</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="UUID" href="#dom-bluetoothremotegattservice-uuid" id="ref-for-dom-bluetoothremotegattservice-uuid-1">uuid</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-bluetoothremotegattservice-isprimary" id="ref-for-dom-bluetoothremotegattservice-isprimary-2">isPrimary</a>;
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-6">BluetoothRemoteGATTCharacteristic</a>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getcharacteristic" id="ref-for-dom-bluetoothremotegattservice-getcharacteristic-5">getCharacteristic</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothcharacteristicuuid" id="ref-for-typedefdef-bluetoothcharacteristicuuid-1">BluetoothCharacteristicUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTService/getCharacteristic(characteristic)" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattservice-getcharacteristic-characteristic-characteristic">characteristic<a class="self-link" href="#dom-bluetoothremotegattservice-getcharacteristic-characteristic-characteristic"></a></dfn>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-7">BluetoothRemoteGATTCharacteristic</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getcharacteristics" id="ref-for-dom-bluetoothremotegattservice-getcharacteristics-1">getCharacteristics</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothcharacteristicuuid" id="ref-for-typedefdef-bluetoothcharacteristicuuid-2">BluetoothCharacteristicUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTService/getCharacteristics(characteristic), BluetoothRemoteGATTService/getCharacteristics()" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattservice-getcharacteristics-characteristic-characteristic">characteristic<a class="self-link" href="#dom-bluetoothremotegattservice-getcharacteristics-characteristic-characteristic"></a></dfn>);
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-9">BluetoothRemoteGATTService</a>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getincludedservice" id="ref-for-dom-bluetoothremotegattservice-getincludedservice-2">getIncludedService</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-7">BluetoothServiceUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTService/getIncludedService(service)" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattservice-getincludedservice-service-service">service<a class="self-link" href="#dom-bluetoothremotegattservice-getincludedservice-service-service"></a></dfn>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-10">BluetoothRemoteGATTService</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getincludedservices" id="ref-for-dom-bluetoothremotegattservice-getincludedservices-1">getIncludedServices</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-8">BluetoothServiceUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTService/getIncludedServices(service), BluetoothRemoteGATTService/getIncludedServices()" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattservice-getincludedservices-service-service">service<a class="self-link" href="#dom-bluetoothremotegattservice-getincludedservices-service-service"></a></dfn>);
};
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-11">BluetoothRemoteGATTService</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-12">BluetoothRemoteGATTService</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers" id="ref-for-characteristiceventhandlers-3">CharacteristicEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-13">BluetoothRemoteGATTService</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#serviceeventhandlers" id="ref-for-serviceeventhandlers-3">ServiceEventHandlers</a>;
</pre>
     <div class="note no-marker" role="note">
      <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-14">BluetoothRemoteGATTService</a></code> attributes</div>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattservice-device">device</dfn> は GATT service が属するリモート peripheral を表している <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-35">BluetoothDevice</a></code> です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattservice-uuid">uuid</dfn> は、service の UUID で、例えば、<a data-link-type="idl" href="https://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.heart_rate.xml#">Heart Rate</a> service に対しては <code>'0000180d-0000-1000-8000-00805f9b34fb'</code> です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="attribute" data-export="" data-lt="isPrimary" id="dom-bluetoothremotegattservice-isprimary">isPrimary<span class="dfn-panel" data-deco=""><b><a href="#dom-bluetoothremotegattservice-isprimary">#dom-bluetoothremotegattservice-isprimary</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-bluetoothremotegattservice-isprimary-1">5.1. GATT Information Model</a></span><span><a href="#ref-for-dom-bluetoothremotegattservice-isprimary-2">5.3. BluetoothRemoteGATTService</a></span></span></dfn> は、この service のタイプが primary か secondary かを示します。</p>
     </div>
      <p>Service <var>service</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="create-a-bluetoothremotegattservice-representing">を表す <code>BluetoothRemoteGATTService</code> を作成する</dfn> には、UA は<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。</p>
     <ol class="algorithm">
      <li><var>result</var> を <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-15">BluetoothRemoteGATTService</a></code> の新しいインスタンスにします。

      <li> <var>service</var> が現れるデバイスを<a data-link-type="dfn" href="#get-the-bluetoothdevice-representing" id="ref-for-get-the-bluetoothdevice-representing-4">表す <code>BluetoothDevice</code> を取得</a> し、<var>device</var> を結果とします。
      <li> 以前のステップでエラーがスローされた場合、そのエラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li> <code><var>result</var>.device</code> を <var>device</var> から初期化します。
      <li><code><var>result</var>.uuid</code> を <var>service</var> の UUID から初期化します。
      <li><var>service</var> が Primary Service の場合、<code><var>result</var>.isPrimary</code> を true に初期化します。そうでない場合、<code><var>result</var>.isPrimary</code> を false に初期化します。
      <li><var>result</var> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
     </ol>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattservice-getcharacteristic">getCharacteristic(<var>characteristic</var>)</dfn></code> メソッドは、この Service の内部から <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-5">Characteristic</a> を取り出します。呼び出されると、次の値を返さなければなりません。</p>
     <blockquote> <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-3">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this</code>,<br> <var>single</var>=true,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getcharacteristic" id="ref-for-dom-bluetoothuuid-getcharacteristic-1">BluetoothUUID.getCharacteristic</a></code>,<br> <var>uuid</var>=<code><var>characteristic</var></code>,<br> <var>allowedUuids</var>=<code>undefined</code>,<br> <var>child type</var>="GATT Characteristic")</span> </blockquote>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattservice-getcharacteristics">getCharacteristics(<var>characteristic</var>)</dfn></code> メソッドは、この Service の内部から <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-6">Characteristic</a> のリストを取り出します。呼び出されると、次の値を返さなければなりません。</p>
     <blockquote> <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-4">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this</code>,<br> <var>single</var>=false,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getcharacteristic" id="ref-for-dom-bluetoothuuid-getcharacteristic-2">BluetoothUUID.getCharacteristic</a></code>,<br> <var>uuid</var>=<code><var>characteristic</var></code>,<br> <var>allowedUuids</var>=<code>undefined</code>,<br> <var>child type</var>="GATT Characteristic")</span> </blockquote>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattservice-getincludedservice">getIncludedService(<var>service</var>)</dfn></code> メソッドは、この Service の内部から <a data-link-type="dfn" href="#included-service" id="ref-for-included-service-2">Included Service</a> を取り出します。呼び出されると、次の値を返さなければなりません。</p>
     <blockquote> <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-5">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this</code>,<br> <var>single</var>=true,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-7">BluetoothUUID.getService</a></code>,<br> <var>uuid</var>=<code><var>service</var></code>,<br> <var>allowedUuids</var>=<code>undefined</code>,<br> <var>child type</var>="GATT Included Service")</span> </blockquote>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattservice-getincludedservices">getIncludedServices(<var>service</var>)</dfn></code> メソッドは、この Service の内部から <a data-link-type="dfn" href="#included-service" id="ref-for-included-service-3">Included Service</a> のリストを取り出します。呼び出されると、次の値を返さなければなりません。</p>
     <blockquote> <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-6">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this</code>,<br> <var>single</var>=false,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-10">BluetoothUUID.getService</a></code>,<br> <var>uuid</var>=<code><var>service</var></code>,<br> <var>allowedUuids</var>=<code>undefined</code>,<br> <var>child type</var>="GATT Included Service")</span> </blockquote>
    </section>
    <section>
     <h3 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="5.4" data-lt="BluetoothRemoteGATTCharacteristic" id="bluetoothremotegattcharacteristic"><span class="secno">5.4. </span><span class="content">BluetoothRemoteGATTCharacteristic</span><span id="bluetoothgattcharacteristic"></span></h3>
     <p><code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-8">BluetoothRemoteGATTCharacteristic</a></code> は GATT <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-7">Characteristic</a> を表し、peripheral の service について詳細情報を提供する基本データエレメントです。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-9">BluetoothRemoteGATTCharacteristic</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-16">BluetoothRemoteGATTService</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothRemoteGATTService" href="#dom-bluetoothremotegattcharacteristic-service" id="ref-for-dom-bluetoothremotegattcharacteristic-service-2">service</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-7">UUID</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="UUID" href="#dom-bluetoothremotegattcharacteristic-uuid" id="ref-for-dom-bluetoothremotegattcharacteristic-uuid-1">uuid</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothcharacteristicproperties" id="ref-for-bluetoothcharacteristicproperties-2">BluetoothCharacteristicProperties</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothCharacteristicProperties" href="#dom-bluetoothremotegattcharacteristic-properties" id="ref-for-dom-bluetoothremotegattcharacteristic-properties-1">properties</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DataView</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DataView?" href="#dom-bluetoothremotegattcharacteristic-value" id="ref-for-dom-bluetoothremotegattcharacteristic-value-3">value</a>;
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-4">BluetoothRemoteGATTDescriptor</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-getdescriptor" id="ref-for-dom-bluetoothremotegattcharacteristic-getdescriptor-2">getDescriptor</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothdescriptoruuid" id="ref-for-typedefdef-bluetoothdescriptoruuid-1">BluetoothDescriptorUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic/getDescriptor(descriptor)" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattcharacteristic-getdescriptor-descriptor-descriptor">descriptor<a class="self-link" href="#dom-bluetoothremotegattcharacteristic-getdescriptor-descriptor-descriptor"></a></dfn>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-5">BluetoothRemoteGATTDescriptor</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-getdescriptors" id="ref-for-dom-bluetoothremotegattcharacteristic-getdescriptors-1">getDescriptors</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothdescriptoruuid" id="ref-for-typedefdef-bluetoothdescriptoruuid-2">BluetoothDescriptorUUID</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic/getDescriptors(descriptor), BluetoothRemoteGATTCharacteristic/getDescriptors()" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattcharacteristic-getdescriptors-descriptor-descriptor">descriptor<a class="self-link" href="#dom-bluetoothremotegattcharacteristic-getdescriptors-descriptor-descriptor"></a></dfn>);
  <span class="kt">Promise</span>&lt;<span class="kt">DataView</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-readvalue" id="ref-for-dom-bluetoothremotegattcharacteristic-readvalue-2">readValue</a>();
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-writevalue" id="ref-for-dom-bluetoothremotegattcharacteristic-writevalue-2">writeValue</a>(<a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic/writeValue(value)" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattcharacteristic-writevalue-value-value">value<a class="self-link" href="#dom-bluetoothremotegattcharacteristic-writevalue-value-value"></a></dfn>);
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-startnotifications" id="ref-for-dom-bluetoothremotegattcharacteristic-startnotifications-2">startNotifications</a>();
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-stopnotifications" id="ref-for-dom-bluetoothremotegattcharacteristic-stopnotifications-1">stopNotifications</a>();
};
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-10">BluetoothRemoteGATTCharacteristic</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-11">BluetoothRemoteGATTCharacteristic</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers" id="ref-for-characteristiceventhandlers-4">CharacteristicEventHandlers</a>;
</pre>
     <div class="note no-marker" role="note">
      <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-12">BluetoothRemoteGATTCharacteristic</a></code> attributes</div>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattcharacteristic-service">service</dfn> は、この characteristic が属する GATT service です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattcharacteristic-uuid">uuid</dfn> は、characteristic の UUID で、例えば、<a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml#">Heart Rate Measurement</a> であれば <code>'00002a37-0000-1000-8000-00805f9b34fb'</code> です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattcharacteristic-properties">properties</dfn> は、この characteristic のプロパティを保持します。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattcharacteristic-value">value</dfn> は、現在キャッシュされている characteristic の値です。この値は、characteristic の値が notification や indication 経由で読み出されたり更新される場合に更新されます。</p>
     </div>
      <p> Characteristic <var>characteristic</var> を<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="create-a-bluetoothremotegattcharacteristic-representing">表す <code>BluetoothRemoteGATTCharacteristic</code> を作成する</dfn>には、UA が<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。</p>
     <ol class="algorithm">
      <li><var>result</var> を <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-13">BluetoothRemoteGATTCharacteristic</a></code> の新しいインスタンスにします。
      <li><code><var>result</var>.service</code> を、<var>characteristic</var> が現れる Service を表す <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-17">BluetoothRemoteGATTService</a></code> インスタンスから初期化します。
      <li> <code><var>result</var>.uuid</code> を <var>characteristic</var> の UUID から初期化します。
      <li> <a data-link-type="dfn" href="#create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic" id="ref-for-create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic-1"><code>BluetoothCharacteristicProperties</code> インスタンスを Characteristic</a> <var>characteristic</var> から作成し、<var>propertiesPromise</var> を結果とします。
      <li><var>propertiesPromise</var> が settle するまで待ちます。
      <li><var>propertiesPromise</var> が reject された場合、<var>propertiesPromise</var> で <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> し、以下のステップを中止します。
      <li><code><var>result</var>.properties</code> を <var>propertiesPromise</var> が fulfilled された値から初期化します。
      <li><code><var>result</var>.value</code> を <code>null</code> に初期化します。UA は <code><var>result</var>.value</code> を新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> に初期化できます。この <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> は、<var>characteristic</var> から直近に読み込まれた値(値が利用可能な場合)を格納する新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> のラッパーです。
      <li><var>result</var> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
     </ol>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattcharacteristic-getdescriptor">getDescriptor(<var>descriptor</var>)</dfn></code> メソッドは、この Characteristic の内部から <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-4">Descriptor</a> を取り出します。呼び出されると、次の値を返さなければなりません。</p>
     <blockquote> <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-7">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this</code>,<br> <var>single</var>=true,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getdescriptor" id="ref-for-dom-bluetoothuuid-getdescriptor-1">BluetoothUUID.getDescriptor</a></code>,<br> <var>uuid</var>=<code><var>descriptor</var></code>,<br> <var>allowedUuids</var>=<code>undefined</code>,<br> <var>child type</var>="GATT Descriptor")</span> </blockquote>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattcharacteristic-getdescriptors">getDescriptors(<var>descriptor</var>)</dfn></code> メソッドは、この Characteristic の内部から <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-5">Descriptor</a> のリストを取り出します。呼び出されると、次の値を返さなければなりません。</p>
     <blockquote> <a data-link-type="dfn" href="#getgattchildren" id="ref-for-getgattchildren-8">GetGATTChildren</a>(<span class="argument-list"><var>attribute</var>=<code>this</code>,<br> <var>single</var>=false,<br> <var>uuidCanonicalizer</var>=<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getdescriptor" id="ref-for-dom-bluetoothuuid-getdescriptor-2">BluetoothUUID.getDescriptor</a></code>,<br> <var>uuid</var>=<code><var>descriptor</var></code>,<br> <var>allowedUuids</var>=<code>undefined</code>,<br> <var>child type</var>="GATT Descriptor")</span> </blockquote>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattcharacteristic-readvalue">readValue()</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li> <code>this.uuid</code> が <a data-link-type="dfn" href="#blacklisted-for-reads" id="ref-for-blacklisted-for-reads-1">読み込みのブラックリストにある</a>場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> で
        <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject </a>して返し、以下のステップを中止します。
      <li><code>this.characteristic.service.device.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-8">connected</a></code></code> が <code>false</code> の場合、<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">reject された promise</a> を <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で返し、以下のステップを中止します。
      <li> <var>characteristic</var> を、<code>this</code> が表している <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-7">Characteristic</a> にします。
      <li>
       <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> の <code>this.service.device.gatt</code>-<a data-link-type="dfn" href="#connection-checking-wrapper" id="ref-for-connection-checking-wrapper-2">connection-checking wrapper</a> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行します。：
       <ol>
        <li><code>Read</code> ビットが <var>characteristic</var> の <a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-1">properties</a> でセットされていない場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> で <var>promise</var> を<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li>
         <var>characteristic</var> の値を取り出すためには、<a data-link-type="dfn" href="#characteristic-value-read" id="ref-for-characteristic-value-read-1">Characteristic Value Read</a> プロシージャ無いのサブプロシージャの組み合わせを使用します。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーをハンドリングします。
        <li> 以前のステップでエラーが返さえれた場合、エラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li>
          以下のステップを実行するために<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイン</a>します：
         <ol>
          <li> <var>promise</var> が <code>this.service.device.gatt@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-5">[[activeAlgorithms]]</a></code></code> の中に無い場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
          <li> <var>buffer</var> を、取り出された値を保持する <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> とし、<code>new DataView(<var>buffer</var>)</code> を <code>this.value</code> に割り当てます。
          <li>
           ここで <code>bubbles</code> 属性を <code>true</code> に初期化して、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged" id="ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-2">characteristicvaluechanged</a></code> という名前の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
          <li> <code>this.value</code> を使って <var>promsie</var> を<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
         </ol>
       </ol>
     </ol>
      <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattcharacteristic-writevalue">writeValue(<var>value</var>)</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li><code>this.uuid</code> が <a data-link-type="dfn" href="#blacklisted-for-writes" id="ref-for-blacklisted-for-writes-1">書き込みのブラックリストにある</a>場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> で
        <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject </a>して返し、以下のステップを中止します。
      <li> <var>characteristic</var> を、<code>this</code> が表している <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-9">Characteristic</a> にします。
      <li> <var>bytes</var> を、<code><var>value</var></code> により <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">保持されたバイトのコピー</a> とします。
      <li> <var>bytes</var> が 512 バイト(<a data-link-type="dfn" href="#long-attribute-values" id="ref-for-long-attribute-values-1">Long Attribute Values</a> あたりの属性値の最大長)を超える場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidmodificationerror">InvalidModificationError</a></code> を使って <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、以下のステップを中止します。
      <li> <code>this.service.device.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-8">connected</a></code></code> が <code>false</code> の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> で <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject </a>して返し、以下のステップを中止します。
      <li>
       <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> の<code>this.service.device.gatt</code>-<a data-link-type="dfn" href="#connection-checking-wrapper" id="ref-for-connection-checking-wrapper-3">connection-checking wrapper</a> を返し、同時に以下のステップを実行します。
       <ol>
        <li> <code>Write</code>、<code>Write Without Response</code>、<code>Authenticated Signed Writes</code> ビットのいずれも <var>characteristic</var> の <a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-2">properties</a> で設定されていない場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> とともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li> <var>characteristic</var> に <var>bytes</var> を書き込むには、<a data-link-type="dfn" href="#characteristic-value-write" id="ref-for-characteristic-value-write-1">Characteristic Value Write</a> procedure 内のサブプロシージャの組み合わせを使用します。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーをハンドリングします。
        <li> 以前のステップでエラーが返さえれた場合、エラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li>
          以下のステップを実行するために<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
         <ol>
          <li><var>promise</var> が<code>this.service.device.gatt@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-6">[[activeAlgorithms]]</a></code></code> に無い場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
          <li> <code>this.value</code> を、<var>bytes</var> を格納する新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> のラッパーである、新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> にセットします。
          <li> <code>undefined</code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
         </ol>
       </ol>
     </ol>
     <p> UA は、既知の GATT <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-10">Characteristic</a> の アクティブな notification のコンテキストセット( <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="active notification context set" data-noexport="" id="active-notification-context-set">active notification context set<span class="dfn-panel" data-deco=""><b><a href="#active-notification-context-set">#active-notification-context-set</a></b><b>Referenced in:</b><span><a href="#ref-for-active-notification-context-set-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-active-notification-context-set-2">(2)</a> <a href="#ref-for-active-notification-context-set-3">(3)</a> <a href="#ref-for-active-notification-context-set-4">(4)</a></span><span><a href="#ref-for-active-notification-context-set-5">5.6.4. Responding to Notifications and Indications</a></span></span></dfn> )と呼ばれる <code class="idl"><a data-link-type="idl" href="#bluetooth" id="ref-for-bluetooth-12">Bluetooth</a></code> オブジェクト群の集合へのマッピングを保持しなければなりません。
       既知の characteristic の集合は、notification に登録された各 <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-code-realms">Realm</a> に対する <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-1">navigator.bluetooth</a></code> オブジェクト群を格納しています。
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattcharacteristic-startnotifications">startNotifications()</dfn></code> メソッド、呼び出されると、<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。notification の受信の詳細は <a href="#notification-events">§5.6.4 Responding to Notifications and Indications</a> を参照してください。</p>
     <ol class="algorithm">
      <li><code>this.uuid</code> が <a data-link-type="dfn" href="#blacklisted-for-reads" id="ref-for-blacklisted-for-reads-2">読み込みのブラックリストにある</a>場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li> <var>characteristic</var> を <code>this</code> が表している GATT <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-11">Characteristic</a> にします。
      <li> <code>Notify</code> または <code>Indicate</code> ビットのいずれかが <var>characteristic</var> の <a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-3">properties</a> でオンでない場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li> <var>characteristic</var> の アクティブな notification のコンテキストセット( <a data-link-type="dfn" href="#active-notification-context-set" id="ref-for-active-notification-context-set-1">active notification context set</a> )が <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-2">navigator.bluetooth</a></code> を含む場合、<code>undefined</code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> し、以下のステップを中止します。
      <li> <code>this.service.device.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-10">connected</a></code></code> が <code>false</code> の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li> <a data-link-type="dfn" href="#characteristic-descriptors" id="ref-for-characteristic-descriptors-1">Characteristic Descriptors</a> procedures を使用して、<var>characteristic</var> の <a data-link-type="dfn" href="#client-characteristic-configuration" id="ref-for-client-characteristic-configuration-1">Client Characteristic Configuration</a> descriptor に <code>Notification</code> または <code>Indication</code> ビットの一つが確実にセットされ、<var>characteristic</var> の <a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-4">properties</a> の制約と整合させてください。UA は、ビットを両方セットすることを避ける必要があり、両方のビットがセットされる場合は、<a href="#notification-events">value-change イベント</a>群を分解しなければなりません。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーをハンドリングします。
      <li> 以前のステップでエラーが返さえれた場合、エラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
      <li><code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-3">navigator.bluetooth</a></code> を <var>characteristic</var> のアクティブ notification コンテキストセット( <a data-link-type="dfn" href="#active-notification-context-set" id="ref-for-active-notification-context-set-2">active notification context set</a> )に追加します。
      <li><code>undefined</code> を使って <var>promise</var> を<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
     </ol>
     <p class="note" role="note">
       notification が有効になった後、結果の <a href="#notification-events">value-change event</a> 群は、現在のマイクロタスクのチェックポイント( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint">microtask checkpoint</a>. )が終了するまで配送されません。この結果、開発者は結果の promise の <code>.then</code> handler に、ハンドラを設定することができます。</p>
     <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTCharacteristic" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattcharacteristic-stopnotifications">stopNotifications()</dfn></code> メソッドは、呼び出されると、<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。： </p>
     <ol class="algorithm">
      <li> <var>characteristic</var> を <code>this</code> が表している GATT <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-12">Characteristic</a> にします。
      <li> <var>characteristic</var> の アクティブな notification コンテキストセット( <a data-link-type="dfn" href="#active-notification-context-set" id="ref-for-active-notification-context-set-3">active notification context set</a> ) に <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-4">navigator.bluetooth</a></code> が含まれる場合、削除してください。
      <li> <var>characteristic</var> の アクティブな notification コンテキストセット( <a data-link-type="dfn" href="#active-notification-context-set" id="ref-for-active-notification-context-set-4">active notification context set</a> ) が空になった場合、<var>characteristic</var> の <a data-link-type="dfn" href="#client-characteristic-configuration" id="ref-for-client-characteristic-configuration-2">Client Characteristic Configuration</a> descriptor の <code>Notification</code> and <code>Indication</code> ビットをクリアするために、UA は <a data-link-type="dfn" href="#characteristic-descriptors" id="ref-for-characteristic-descriptors-2">Characteristic Descriptors</a> procedures を使用する必要があります。
      <li> <code>undefined</code> で <var>promise</var> を  <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> するために <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。
     </ol>
     <p class="note" role="note"> promise を resolve するタスクをキューイングすれば、promise が resolve した後、notification の到着による <a href="#notification-events">value change events</a> イベントがないことを保証できます。</p>
     <section>
      <h4 class="heading settled" data-level="5.4.1" id="characteristicproperties"><span class="secno">5.4.1. </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="bluetoothcharacteristicproperties">BluetoothCharacteristicProperties</dfn></span><a class="self-link" href="#characteristicproperties"></a></h4>
      <p> 各 <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-14">BluetoothRemoteGATTCharacteristic</a></code> は、<a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-5">characteristic properties</a> を <code class="idl"><a data-link-type="idl" href="#bluetoothcharacteristicproperties" id="ref-for-bluetoothcharacteristicproperties-3">BluetoothCharacteristicProperties</a></code> オブジェクトを通して公開します。このプロパティ群は、characteristic で何のオペレーションが有効なのかを表しています。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothcharacteristicproperties" id="ref-for-bluetoothcharacteristicproperties-4">BluetoothCharacteristicProperties</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-broadcast">broadcast<a class="self-link" href="#dom-bluetoothcharacteristicproperties-broadcast"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-read">read<a class="self-link" href="#dom-bluetoothcharacteristicproperties-read"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-writewithoutresponse">writeWithoutResponse<a class="self-link" href="#dom-bluetoothcharacteristicproperties-writewithoutresponse"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-write">write<a class="self-link" href="#dom-bluetoothcharacteristicproperties-write"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-notify">notify<a class="self-link" href="#dom-bluetoothcharacteristicproperties-notify"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-indicate">indicate<a class="self-link" href="#dom-bluetoothcharacteristicproperties-indicate"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-authenticatedsignedwrites">authenticatedSignedWrites<a class="self-link" href="#dom-bluetoothcharacteristicproperties-authenticatedsignedwrites"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-reliablewrite">reliableWrite<a class="self-link" href="#dom-bluetoothcharacteristicproperties-reliablewrite"></a></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <dfn class="nv idl-code" data-dfn-for="BluetoothCharacteristicProperties" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-bluetoothcharacteristicproperties-writableauxiliaries">writableAuxiliaries<a class="self-link" href="#dom-bluetoothcharacteristicproperties-writableauxiliaries"></a></dfn>;
};
</pre>
      <p> <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="create a BluetoothCharacteristicProperties instance from the Characteristic" data-noexport="" id="create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic">create a <code>BluetoothCharacteristicProperties</code> インスタンスを Characteristic </dfn> <var>characteristic</var> から作成するために、UA は<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
       <li> <var>propertiesObj</var> を <code class="idl"><a data-link-type="idl" href="#bluetoothcharacteristicproperties" id="ref-for-bluetoothcharacteristicproperties-5">BluetoothCharacteristicProperties</a></code> の新しいインスタンスにします。
       <li> <var>properties</var> を <var>characteristic</var> の<a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-6">characteristic properties</a> にします。
       <li><var>propertiesObj</var> 属性を <var>properties</var> の応答ビットから初期化します。：
        <table class="data">
         <thead>
          <tr>
           <th>Attribute
           <th>Bit
         <tbody>
          <tr>
           <td><code>broadcast</code>
           <td>Broadcast
          <tr>
           <td><code>read</code>
           <td>Read
          <tr>
           <td><code>writeWithoutResponse</code>
           <td>Write Without Response
          <tr>
           <td><code>write</code>
           <td>Write
          <tr>
           <td><code>notify</code>
           <td>Notify
          <tr>
           <td><code>indicate</code>
           <td>Indicate
          <tr>
           <td><code>authenticatedSignedWrites</code>
           <td>Authenticated Signed Writes
        </table>
       <li>
        <a data-link-type="dfn" href="#characteristic-properties" id="ref-for-characteristic-properties-7">characteristic properties</a> の拡張プロパティビットがセットされていない場合、<code><var>propertiesObj</var>.reliableWrite</code> と <code><var>propertiesObj</var>.writableAuxiliaries</code> を <code>false</code> に初期化します。そうでない場合、以下のステップを実行します。：
        <ol>
         <li>
           <var>characteristic</var> に対する <a data-link-type="dfn" href="#characteristic-extended-properties" id="ref-for-characteristic-extended-properties-1">Characteristic Extended Properties</a> descriptor を <a data-link-type="dfn" href="#characteristic-descriptor-discovery" id="ref-for-characteristic-descriptor-discovery-1">発見</a>し、その値を <var>extendedProperties</var> に<a data-link-type="dfn" href="#read-characteristic-descriptors" id="ref-for-read-characteristic-descriptors-1">読み込み</a>します。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーをハンドリングします。
          <p class="issue" id="issue-f3b14ad2"><a class="self-link" href="#issue-f3b14ad2"></a> <a data-link-type="dfn" href="#characteristic-extended-properties" id="ref-for-characteristic-extended-properties-2">Characteristic Extended Properties</a> は、Characteristic に対して拡張往路パティが変更不可能であるかどうか明らかではありません。もしそうならば、UA はキャッシュを許可するようにすべきです。</p>
         <li> 以前のステップでエラーが返さえれた場合、エラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
         <li> <code><var>propertiesObj</var>.reliableWrite</code> を <var>extendedProperties</var> の Reliable Write ビットから初期化します。
         <li> <code><var>propertiesObj</var>.writableAuxiliaries</code> を <var>extendedProperties</var> の Writable Auxiliaries ビットから初期化します。
        </ol>
       <li> <var>propertiesObj</var> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
      </ol>
     </section>
    </section>
    <section>
      <h3 class="heading settled dfn-paneled idl-code" data-dfn-type="interface" data-export="" data-level="5.5" data-lt="BluetoothRemoteGATTDescriptor" id="bluetoothremotegattdescriptor"><span class="secno">5.5. </span><span class="content">BluetoothRemoteGATTDescriptor</span><span id="bluetoothgattdescriptor"></span></h3>
      <p><code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-6">BluetoothRemoteGATTDescriptor</a></code> は GATT <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-6">Descriptor</a> を表し、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-13">Characteristic</a> の値についての詳細情報を提供します。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-7">BluetoothRemoteGATTDescriptor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-15">BluetoothRemoteGATTCharacteristic</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothRemoteGATTCharacteristic" href="#dom-bluetoothremotegattdescriptor-characteristic" id="ref-for-dom-bluetoothremotegattdescriptor-characteristic-1">characteristic</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-8">UUID</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="UUID" href="#dom-bluetoothremotegattdescriptor-uuid" id="ref-for-dom-bluetoothremotegattdescriptor-uuid-1">uuid</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DataView</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DataView?" href="#dom-bluetoothremotegattdescriptor-value" id="ref-for-dom-bluetoothremotegattdescriptor-value-1">value</a>;
  <span class="kt">Promise</span>&lt;<span class="kt">DataView</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattdescriptor-readvalue" id="ref-for-dom-bluetoothremotegattdescriptor-readvalue-1">readValue</a>();
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattdescriptor-writevalue" id="ref-for-dom-bluetoothremotegattdescriptor-writevalue-1">writeValue</a>(<a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a> <dfn class="nv idl-code" data-dfn-for="BluetoothRemoteGATTDescriptor/writeValue(value)" data-dfn-type="argument" data-export="" id="dom-bluetoothremotegattdescriptor-writevalue-value-value">value<a class="self-link" href="#dom-bluetoothremotegattdescriptor-writevalue-value-value"></a></dfn>);
};
</pre>
     <div class="note no-marker" role="note">
      <div class="marker">注記: <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-8">BluetoothRemoteGATTDescriptor</a></code> attributes</div>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTDescriptor" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattdescriptor-characteristic">characteristic</dfn> は、この descriptor が属する  GATT characteristic です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTDescriptor" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattdescriptor-uuid">uuid</dfn> は characteristic descriptor の UUID です。例えば <a data-link-type="idl" href="https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorViewer.aspx?u=org.bluetooth.descriptor.gatt.client_characteristic_configuration.xml#">Client Characteristic Configuration</a> descriptor であれば <code>'00002902-0000-1000-8000-00805f9b34fb'</code> です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTDescriptor" data-dfn-type="attribute" data-export="" id="dom-bluetoothremotegattdescriptor-value">value</dfn> は descriptor に現在キャッシュされている値です。この値は、descriptor が読み出される時に更新されます。</p>
     </div>
      <p>Descriptor <var>descriptor</var> を<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="create-a-bluetoothremotegattdescriptor-representing">す <code>BluetoothRemoteGATTDescriptor</code> を作成する</dfn>には、UA は<a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。</p>
     <ol class="algorithm">
      <li><var>result</var> を <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-9">BluetoothRemoteGATTDescriptor</a></code> の新しいインスタンスにします。
      <li> <code><var>result</var>.characteristic</code> を、<var>descriptor</var> が現れる Characteristic を表している <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-16">BluetoothRemoteGATTCharacteristic</a></code> インスタンスから初期化します。
      <li> <code><var>result</var>.uuid</code> を UUID の <var>descriptor</var> から初期化します。
      <li> <code><var>result</var>.value</code> を <code>null</code> に初期化します。UA は、<code><var>result</var>.value</code> を新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> に初期化できます。この DataView は、<var>descriptor</var> から直近に読み込まれた(値が利用可能な場合)を格納する <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> のラッパーです。
      <li><var>result</var> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
     </ol>
     <p><code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTDescriptor" data-dfn-type="method" data-export="" data-lt="readValue()" id="dom-bluetoothremotegattdescriptor-readvalue">readValue()<span class="dfn-panel" data-deco=""><b><a href="#dom-bluetoothremotegattdescriptor-readvalue">#dom-bluetoothremotegattdescriptor-readvalue</a></b><b>Referenced in:</b><span><a href="#ref-for-dom-bluetoothremotegattdescriptor-readvalue-1">5.5. BluetoothRemoteGATTDescriptor</a></span></span></dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li><code>this.uuid</code> が <a data-link-type="dfn" href="#blacklisted-for-reads" id="ref-for-blacklisted-for-reads-3">読み込みの blacklist にある</a>場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> を使って <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、以下のステップを中止しなければなりません。
       <li><code>this.characteristic.service.device.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-11">connected</a></code></code> が <code>false</code> の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> を使って <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、以下のステップを中止しなければなりません。
      <li> <var>descriptor</var> を <code>this</code> が表わしている <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-7">Descriptor</a> にします。
      <li>
       <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> の <code>this.characteristic.service.device.gatt</code>-<a data-link-type="dfn" href="#connection-checking-wrapper" id="ref-for-connection-checking-wrapper-4">connection-checking wrapper</a> を返し、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">同時に</a>以下のステップを実行しなければなりません。：
       <ol>
        <li> <a data-link-type="dfn" href="#read-characteristic-descriptors" id="ref-for-read-characteristic-descriptors-2">Read Characteristic Descriptors</a> または <a data-link-type="dfn" href="#read-long-characteristic-descriptors" id="ref-for-read-long-characteristic-descriptors-1">Read Long Characteristic Descriptors</a> サブプロシージャを用いて、<var>descriptor</var> の値を読みだしてください。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーをハンドリングします。
        <li> 以前のステップでエラーが返さえれた場合、エラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li>
          以下のステップを実行するために<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
         <ol>
          <li> <var>promise</var> が <code>this.characteristic.service.device.gatt@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-7">[[activeAlgorithms]]</a></code></code> の中に無い場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
          <li> <var>buffer</var> を、読み出した値を保持する <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> とし、<code>new DataView(<var>buffer</var>)</code> を <code>this.value</code> に割り当てます。
          <li> <code>this.value</code> を使って <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
         </ol>
       </ol>
     </ol>
      <p> <code><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTDescriptor" data-dfn-type="method" data-export="" id="dom-bluetoothremotegattdescriptor-writevalue">writeValue(<var>value</var>)</dfn></code> メソッドは、呼び出されると、以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li><code>this.uuid</code> が <a data-link-type="dfn" href="#blacklisted-for-writes" id="ref-for-blacklisted-for-writes-2">書き込みの blacklist にある</a>場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> を使って <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、以下のステップを中止しなければなりません。
      <li> <var>descriptor</var> を <code>this</code> が表している <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-8">Descriptor</a> にします。
      <li> <var>bytes</var> を、<code><var>value</var></code> により <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">保持されているバイトのコピー</a> にします。
      <li> <var>bytes</var> が 512バイト(<a data-link-type="dfn" href="#long-attribute-values" id="ref-for-long-attribute-values-2">Long Attribute Values</a> あたりの属性値の最大長)を越える場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidmodificationerror">InvalidModificationError</a></code> とともに <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with"> promise を reject して</a>返し、以下のステップを中止します。
      <li> <code>this.characteristic.service.device.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-12">connected</a></code></code> が <code>false</code> の場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> とともに <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、以下のステップを中止します。
      <li>
       <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">新しい promise</a> <var>promise</var> の <code>this.characteristic.service.device.gatt</code>-<a data-link-type="dfn" href="#connection-checking-wrapper" id="ref-for-connection-checking-wrapper-5">connection-checking wrapper</a> を返し、同時に以下のステップを実行します。
       <ol>
        <li> <a data-link-type="dfn" href="#write-characteristic-descriptors" id="ref-for-write-characteristic-descriptors-1">Write Characteristic Descriptors</a> または <a data-link-type="dfn" href="#write-long-characteristic-descriptors" id="ref-for-write-long-characteristic-descriptors-1">Write Long Characteristic Descriptors</a> サブプロシージャを用いて <var>descriptor</var> に <var>bytes</var> を書き込みます。<a href="#error-handling">§5.7 Error handling</a> で記載されたようにエラーをハンドリングします。
        <li>以前のステップでエラーが返さえれた場合、エラーとともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
        <li>
          以下のステップを実行するために<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
         <ol>
          <li> <var>promise</var> が <code>this.characteristic.service.device.gatt@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-8">[[activeAlgorithms]]</a></code></code> に無い場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> とともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a> し、以下のステップを中止します。
          <li> <code>this.value</code> を、<var>bytes</var> を含む新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> をラップする、新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> にセットします。
          <li> <code>undefined</code> とともに <var>promise</var> を <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a> します。
         </ol>
       </ol>
     </ol>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.6" id="events"><span class="secno">5.6. </span><span class="content">イベント</span><a class="self-link" href="#events"></a></h3>
     <section>
       <h4 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="5.6.1" data-lt="Bluetooth Tree" data-noexport="" id="bluetooth-tree"><span class="secno">5.6.1. </span><span class="content">Bluetooth ツリー</span></h4>
       <p> <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-5">navigator.bluetooth</a></code>
        および <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-36">BluetoothDevice</a></code>、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-18">BluetoothRemoteGATTService</a></code>、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-17">BluetoothRemoteGATTCharacteristic</a></code>、d<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-10">BluetoothRemoteGATTDescriptor</a></code> インタフェースを実現しているオブジェクトは、<a data-link-type="dfn" href="#bluetooth-tree" id="ref-for-bluetooth-tree-1">Bluetooth tree</a> と呼ばれる<a data-link-type="dfn" href="http://dom.spec.whatwg.org/#concept-tree-participate">ツリーに参加しています</a>。</p>
      <ul>
       <li> <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-6">navigator.bluetooth</a></code> の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child">children</a> は、デバイスの <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-7">navigator.bluetooth</a></code> の関連する設定オブジェクト( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a> )の <code class="idl"><a data-link-type="idl" href="#dom-permissionname-bluetooth" id="ref-for-dom-permissionname-bluetooth-7">"bluetooth"</a></code> の追加パーミッションデータ( <a data-link-type="dfn" href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a> )の許可されたデバイス( <code class="idl"><a data-link-type="idl" href="#dom-bluetoothpermissiondata-alloweddevices" id="ref-for-dom-bluetoothpermissiondata-alloweddevices-5">allowedDevices</a></code> )リストを、不特定の順序で表す <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-37">BluetoothDevice</a></code> オブジェクトです。
       <li> <code class="idl"><a data-link-type="idl" href="#dom-navigator-bluetooth" id="ref-for-dom-navigator-bluetooth-6">navigator.bluetooth</a></code> の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child">children</a> は、オリジンの許可されたデバイスマップ(  <a data-link-type="dfn" href="#allowed-devices-map" id="ref-for-allowed-devices-map-9">allowed devices map</a> )上のデバイスをある順序で表している <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-26">BluetoothDevice</a></code> オブジェクト群です。
       <li>  <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-38">BluetoothDevice</a></code> の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child">children</a> は、UUID がオリジンとデバイスの許可されたサービスリスト( <a data-link-type="dfn" href="#allowed-services-list" id="ref-for-allowed-services-list-4">allowed services list</a> )にある <a data-link-type="dfn" href="#gatt-server" id="ref-for-gatt-server-7">GATT Server</a> 上の Primary と Secondary <a data-link-type="dfn" href="#service" id="ref-for-service-9">Service</a>a> 群を表わしている <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-19">BluetoothRemoteGATTService</a></code> オブジェクト群です。Primary サービスの順序は、<a data-link-type="dfn" href="#discover-primary-service-by-service-uuid" id="ref-for-discover-primary-service-by-service-uuid-1">Discover Service UUID による Primary Service</a> プロシージャにより返さえる順序と一致しなければなりませんが、異なる UUID を持つ Secondary service 群と Primary service 群は、どんな順序でもかまいません。
       <li> <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-20">BluetoothRemoteGATTService</a></code> の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child">children</a> は、Characteristic 群を表わしている <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-18">BluetoothRemoteGATTCharacteristic</a></code> オブジェクト群です。characteristic 群の順序は、<a data-link-type="dfn" href="#discover-characteristics-by-uuid" id="ref-for-discover-characteristics-by-uuid-3">UUID による Discover Characteristics</a> プロシージャにより返されると順序と一致しなければなりませんが、異なる UUID を持つ characteristic 群は、どんな順序でも構いません。
       <li> <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-19">BluetoothRemoteGATTCharacteristic</a></code> の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child">children</a> は <a data-link-type="dfn" href="#discover-all-characteristic-descriptors" id="ref-for-discover-all-characteristic-descriptors-1">Discover All Characteristic Descriptors</a> プロシージャで返される順序で Descriptor 群を表している  <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattdescriptor" id="ref-for-bluetoothremotegattdescriptor-11">BluetoothRemoteGATTDescriptor</a></code> オブジェクト群です。
      </ul>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.6.2" id="event-types"><span class="secno">5.6.2. </span><span class="content">イベントタイプ</span><a class="self-link" href="#event-types"></a></h4>
      <dl>
       <dt><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="event" data-export="" id="eventdef-bluetoothdevice-advertisementreceived"><code>advertisementreceived</code></dfn>
       <dd> <a href="#advertising-event-algorithm">アドバタイズイベントをそのデバイスから受信した時</a>に <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-39">BluetoothDevice</a></code> 上で開始されます。</a>
       <dt><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDevice" data-dfn-type="event" data-export="" id="eventdef-bluetoothdevice-gattserverdisconnected"><code>gattserverdisconnected</code></dfn>
       <dd> <a href="#disconnection-events">アクティブな GATT connection を失った時</a>に <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-40">BluetoothDevice</a></code> 上で開始されます。
       <dt><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="event" data-export="" id="eventdef-bluetoothremotegattservice-servicechanged"><code>servicechanged</code></dfn>
       <dd> <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-21">BluetoothRemoteGATTService</a></code> <a href="#service-change-events">リモートデバイスを発見</a>して、<a data-link-type="dfn" href="#bluetooth-tree" id="ref-for-bluetooth-tree-2">Bluetooth tree</a> に追加した直後に新しい <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-21">BluetoothRemoteGATTService</a></code> で開始されます。
       <dt><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="event" data-export="" id="eventdef-bluetoothremotegattservice-servicechanged"><code>servicechanged</code></dfn>
       <dd> <a href="#service-change-events">状態が変化した時</a>に、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-22">BluetoothRemoteGATTService</a></code> 上で開始されます。サービスに追加またはサービスから削除される characteristic 群 および/または descriptor 群、およびリモートデバイスからの <a data-link-type="dfn" href="#service-changed" id="ref-for-service-changed-1">Service Changed</a> インディケーションが含まれます。
       <dt><dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothRemoteGATTService" data-dfn-type="event" data-export="" id="eventdef-bluetoothremotegattservice-serviceremoved"><code>serviceremoved</code></dfn>
       <dd> <a href="#service-change-events">デバイスから切断され</a>、<a data-link-type="dfn" href="#bluetooth-tree" id="ref-for-bluetooth-tree-3">Bluetooth tree</a> から削除される直前に <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-23">BluetoothRemoteGATTService</a></code> で開始されます。
      </dl>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.6.3" id="disconnection-events"><span class="secno">5.6.3. </span><span class="content">切断への応答</span><a class="self-link" href="#disconnection-events"></a></h4>
      <p>
        <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-16">Bluetooth device</a> <var>device</var> の <a data-link-type="dfn" href="#att-bearer" id="ref-for-att-bearer-5">ATT Bearer</a> が(例えば、リモートデバイスが圏外に移動した、またはユーザが切断するプラットフォーム機能を使用したなどの理由で）失われた時、UA は、各 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-41">BluetoothDevice</a></code> <var>deviceObj</var> に対して、以下のステップを実行するために、<var>deviceObj</var> の関連する設定オブジェクト( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a>’ )が責任を持つイベントループ( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a>  )に<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>しなければなりません。：</p>
      <ol class="algorithm">
       <li> <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-11">[[representedDevice]]</a></code></code> が <var>device</var> と<a data-link-type="dfn" href="#same-bluetooth-device" id="ref-for-same-bluetooth-device-10">同一デバイス</a>でない場合、以下のステップを中止します。
       <li> <code><var>deviceObj</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-12">connected</a></code></code> が false の場合、以下のステップを中止します。
       <li> <code><var>deviceObj</var>.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-13">connected</a></code></code> に <code>false</code> をセットします。
       <li> <code><var>deviceObj</var>.gatt@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-activealgorithms-slot" id="ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-9">[[activeAlgorithms]]</a></code></code> をクリアします。
       <li>
        <code><var>deviceObj</var></code> の <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles">bubbles</a></code> 属性を <code>true</code> に初期化して、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-gattserverdisconnected" id="ref-for-eventdef-bluetoothdevice-gattserverdisconnected-3">gattserverdisconnected</a></code>  という名前の<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
        <p class="note" role="note"> このイベントは <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattserver" id="ref-for-bluetoothremotegattserver-14">BluetoothRemoteGATTServer</a></code> では開始<em>されません</em>。 </p>
      </ol>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.6.4" id="notification-events"><span class="secno">5.6.4. </span><span class="content">Notifications と Indications への応答</span><a class="self-link" href="#notification-events"></a></h4>
      <p>UA が Bluetooth <a data-link-type="dfn" href="#characteristic-value-notification" id="ref-for-characteristic-value-notification-1">Characteristic Value Notification</a> または <a data-link-type="dfn" href="#characteristic-value-indications" id="ref-for-characteristic-value-indications-1">Indication</a> を受信した時、以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
       <li>
         Characteristic のアクティブな notification コンテキストセット( <a data-link-type="dfn" href="#active-notification-context-set" id="ref-for-active-notification-context-set-5">active notification context set</a> )の中にある各 <var>bluetoothGlobal</var> に対して、以下のサブステップを実行するために、<var>bluetoothGlobal</var> のスクリプト設定オブジェクトのイベントループに<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
        <ol>
         <li> <var>characteristicObject</var> を、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-14">Characteristic</a> を表している <var>bluetoothGlobal</var> をルートとする <a data-link-type="dfn" href="#bluetooth-tree" id="ref-for-bluetooth-tree-4">Bluetooth tree</a> にある  <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattcharacteristic" id="ref-for-bluetoothremotegattcharacteristic-21">BluetoothRemoteGATTCharacteristic</a></code> にセットします。
         <li> <code><var>characteristicObject</var>.service.device.gatt.<code class="idl"><a data-link-type="idl" href="#dom-bluetoothremotegattserver-connected" id="ref-for-dom-bluetoothremotegattserver-connected-14">connected</a></code></code> が <code>false</code> の場合、以下のサブステップを中止します。
         <li> <code><var>characteristicObject</var>.value</code> を、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-15">Characteristic</a> の新しい値を保持する新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> のラッパーである、新しい <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> にセットします。
         <li><var>characteristicObject</var> で bubbles 属性を <code>true</code> に初期化して <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged" id="ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-3">characteristicvaluechanged</a></code> という名前の<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
        </ol>
      </ol>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.6.5" id="service-change-events"><span class="secno">5.6.5. </span><span class="content">Service Changes への応答</span><a class="self-link" href="#service-change-events"></a></h4>
      <p>
        Bluetooth <a data-link-type="dfn" href="#attribute-caching" id="ref-for-attribute-caching-1">Attribute Caching</a> では、クライアントが <a data-link-type="dfn" href="#service" id="ref-for-service-10">Service</a>、<a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-16">Characteristic</a>、<a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-9">Descriptor</a> に加えられた変更を追跡することが可能です。ウェブページで公開する目的でエンティティを検索する前に、UA は Service Changed characteristic からの Indication を（存在すれば）購読しなければなりません。UA が  <a data-link-type="dfn" href="#service-changed" id="ref-for-service-changed-2">Service Changed</a>  characteristic の Indication を受信した場合、以下のステップを実行しなければなりません。：</p>
      <ol class="algorithm">
       <li> <var>removedEntities</var> を、Indication 前に UA が発見していた Service Changed characteristic により Indicate された範囲内のエンティティのリストとします。
       <li> <a data-link-type="dfn" href="#primary-service-discovery" id="ref-for-primary-service-discovery-1">Primary Service Discovery</a>、<a data-link-type="dfn" href="#relationship-discovery" id="ref-for-relationship-discovery-1">Relationship Discovery</a>、<a data-link-type="dfn" href="#characteristic-discovery" id="ref-for-characteristic-discovery-1">Characteristic Discovery</a>、<a data-link-type="dfn" href="#characteristic-descriptor-discovery" id="ref-for-characteristic-descriptor-discovery-2">Characteristic Descriptor Discovery</a> プロシージャを使用して、Service Changed characteristic で indicate される範囲内の entity を再検索します。発見の結果が、以下で開始されるイベントに影響を与えないことが分かる場合は、UA は、indicate された範囲の全てまたは一部の検索をスキップできます。
       <li> <var>addedEntities</var> を、前のステップで発見された entity のリストとします。
       <li> 同じ定義を持つ entity が( Characteristic と Descriptor の値を無視して）<var>removedEntities</var> と <var>addedEntities</var> の両方に現れた場合、その entity を両方から削除します。
       <li> <var>changedServices</var> を <a data-link-type="dfn" href="#service" id="ref-for-service-11">Service</a> の集合(初期値は空)とします。
       <li><a data-link-type="dfn" href="#same-attribute" id="ref-for-same-attribute-5">同一</a> <a data-link-type="dfn" href="#service" id="ref-for-service-12">Service</a> が <var>removedEntities</var> と <var>addedEntities</var> の両方に現れた場合、その service を両方から削除し、<var>changedServices</var> に追加します。
       <li> <var>removedEntities</var> と <var>addedEntities</var> の各 <a data-link-type="dfn" href="#characteristic" id="ref-for-characteristic-17">Characteristic</a> と <a data-link-type="dfn" href="#descriptor" id="ref-for-descriptor-10">Descriptor</a> について、オリジナルリストから削除し、その親 <a data-link-type="dfn" href="#service" id="ref-for-service-13">Service</a> を <var>changedServices</var> に追加します。<span class="note" role="note">これ以降では、<var>removedEntities</var> と <var>addedEntities</var> は <a data-link-type="dfn" href="#service" id="ref-for-service-14">Service</a> 群しか含んでいません。</span>
       <li id="only-notify-for-requested-services"><a class="self-link" href="#only-notify-for-requested-services"></a>
        <var>addedEntities</var> 内の <a data-link-type="dfn" href="#service" id="ref-for-service-15">Service</a> が、これまでおこなった <code>getPrimaryService</code>、<code>getPrimaryServices</code>、<code>getIncludedService</code>、<code>getIncludedServices</code> 呼び出しから返されていない場合、service が呼び出し時点で存在していれば、UA は <var>addedEntities</var> からこの <a data-link-type="dfn" href="#service" id="ref-for-service-16">Service</a> を削除できます。
       <li> <var>changedDevices</var> を <var>removedEntities</var>、<var>addedEntities</var>、<var>changedServices</var> にある任意の <a data-link-type="dfn" href="#service" id="ref-for-service-18">Service</a> を含む <a data-link-type="dfn" href="#bluetooth-device" id="ref-for-bluetooth-device-17">Bluetooth device</a> のセットとします。
       <li><var>changedDevices</var> に接続された各 <code class="idl"><a data-link-type="idl" href="#bluetoothdevice" id="ref-for-bluetoothdevice-42">BluetoothDevice</a></code> <var>deviceObj</var> に対して、以下のステップを実行するために、<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#global-object">global object</a> が責任を持つイベントループ( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a> )に <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">タスクをキューイング</a>します。：
        <ol>
         <li>
           <var>removedEntities</var> の各 <a data-link-type="dfn" href="#service" id="ref-for-service-18">Service</a> <var>service</var> に対して：
          <ol>
           <li> <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-representeddevice-slot" id="ref-for-dom-bluetoothdevice-representeddevice-slot-12">[[representedDevice]]</a></code></code> の残りの <a data-link-type="dfn" href="#service" id="ref-for-service-19">Service</a> が、<var>service</var> として同一 UUID を持たない場合、UUID を <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-8">[[unfilteredUuids]]</a></code></code> から削除します。
           <li> Service の UUID が <code><var>deviceObj</var>@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-15">[[allowedServices]]</a></code></code> にある場合、<a data-link-type="dfn" href="#service" id="ref-for-service-20">Service</a> を表す <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-24">BluetoothRemoteGATTService</a></code> で <code>bubbles</code> 属性を <code>true</code> に初期化して、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-serviceremoved" id="ref-for-eventdef-bluetoothremotegattservice-serviceremoved-1">serviceremoved</a></code> という名前の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
           <li> この<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-25">BluetoothRemoteGATTService</a></code> を <a data-link-type="dfn" href="#bluetooth-tree" id="ref-for-bluetooth-tree-5">Bluetooth tree</a> から削除します。
          </ol>
         <li> <var>addedEntities</var> の 各 <a data-link-type="dfn" href="#service" id="ref-for-service-21">Service</a> に対して、Service の UUID を <code>deviceObj@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-unfiltereduuids-slot" id="ref-for-dom-bluetoothdevice-unfiltereduuids-slot-9">[[unfilteredUuids]]</a></code></code> に追加します。
              Service の UUID が <code>deviceObj@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-16">[[allowedServices]]</a></code></code> にある場合、この <a data-link-type="dfn" href="#service" id="ref-for-service-22">Service</a> を表す <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-26">BluetoothRemoteGATTService</a></code> を <a data-link-type="dfn" href="#bluetooth-tree" id="ref-for-bluetooth-tree-6">Bluetooth tree</a> に追加し、<code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-27">BluetoothRemoteGATTService</a></code> で <code>bubbles</code> 属性を <code>true</code> に初期化して、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-serviceadded" id="ref-for-eventdef-bluetoothremotegattservice-serviceadded-2">serviceadded</a></code> という名前の <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
         <li> <var>changedServices</var> にある各 <a data-link-type="dfn" href="#service" id="ref-for-service-23">Service</a> に対して、Service の UUID が <code>deviceObj@<code class="idl"><a data-link-type="idl" href="#dom-bluetoothdevice-allowedservices-slot" id="ref-for-dom-bluetoothdevice-allowedservices-slot-17">[[allowedServices]]</a></code></code> にある場合、<a data-link-type="dfn" href="#service" id="ref-for-service-24">Service</a> を表す <code class="idl"><a data-link-type="idl" href="#bluetoothremotegattservice" id="ref-for-bluetoothremotegattservice-28">BluetoothRemoteGATTService</a></code> で <code>bubbles</code> 属性を <code>true</code> に初期化して、<code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-servicechanged" id="ref-for-eventdef-bluetoothremotegattservice-servicechanged-1">servicechanged</a></code> という名前の<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">イベントを開始</a>します。
        </ol>
      </ol>
     </section>
     <section>
      <h4 class="heading settled" data-level="5.6.6" id="idl-event-handlers"><span class="secno">5.6.6. </span><span class="content">IDL イベントハンドラ</span><a class="self-link" href="#idl-event-handlers"></a></h4>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute">NoInterfaceObject</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="characteristiceventhandlers">CharacteristicEventHandlers</dfn> {
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-characteristiceventhandlers-oncharacteristicvaluechanged" id="ref-for-dom-characteristiceventhandlers-oncharacteristicvaluechanged-1">oncharacteristicvaluechanged</a>;
};
</pre>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="CharacteristicEventHandlers" data-dfn-type="attribute" data-export="" id="dom-characteristiceventhandlers-oncharacteristicvaluechanged">oncharacteristicvaluechanged</dfn> は <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged" id="ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-4">characteristicvaluechanged</a></code> イベントタイプ用のイベントハンドラIDL属性( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">Event handler IDL attribute</a> )です。</p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute">NoInterfaceObject</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="bluetoothdeviceeventhandlers">BluetoothDeviceEventHandlers</dfn> {
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-bluetoothdeviceeventhandlers-ongattserverdisconnected" id="ref-for-dom-bluetoothdeviceeventhandlers-ongattserverdisconnected-1">ongattserverdisconnected</a>;
};
</pre>
       <p> <dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothDeviceEventHandlers" data-dfn-type="attribute" data-export="" id="dom-bluetoothdeviceeventhandlers-ongattserverdisconnected">ongattserverdisconnected</dfn> は <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothdevice-gattserverdisconnected" id="ref-for-eventdef-bluetoothdevice-gattserverdisconnected-4">gattserverdisconnected</a></code> イベントタイプ用のイベントハンドラIDL属性( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">Event handler IDL attribute</a> )です。 </p>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute">NoInterfaceObject</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="serviceeventhandlers">ServiceEventHandlers</dfn> {
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-serviceeventhandlers-onserviceadded" id="ref-for-dom-serviceeventhandlers-onserviceadded-1">onserviceadded</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-serviceeventhandlers-onservicechanged" id="ref-for-dom-serviceeventhandlers-onservicechanged-1">onservicechanged</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-serviceeventhandlers-onserviceremoved" id="ref-for-dom-serviceeventhandlers-onserviceremoved-1">onserviceremoved</a>;
};
</pre>
     <p> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceEventHandlers" data-dfn-type="attribute" data-export="" id="dom-serviceeventhandlers-onserviceadded">onserviceadded</dfn> は <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-serviceadded" id="ref-for-eventdef-bluetoothremotegattservice-serviceadded-3">serviceadded</a></code> イベントタイプ用のイベントハンドラIDL属性( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">Event handler IDL attribute</a> )です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceEventHandlers" data-dfn-type="attribute" data-export="" id="dom-serviceeventhandlers-onservicechanged">onservicechanged</dfn> は <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-servicechanged" id="ref-for-eventdef-bluetoothremotegattservice-servicechanged-2">servicechanged</a></code> イベントタイプ用のイベントハンドラIDL属性( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">Event handler IDL attribute</a> )です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceEventHandlers" data-dfn-type="attribute" data-export="" id="dom-serviceeventhandlers-onserviceremoved">onserviceremoved</dfn> は <code class="idl"><a data-link-type="idl" href="#eventdef-bluetoothremotegattservice-serviceremoved" id="ref-for-eventdef-bluetoothremotegattservice-serviceremoved-2">serviceremoved</a></code> イベントタイプ用のイベントハンドラIDL属性( <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">Event handler IDL attribute</a> )です。</p>
     </section>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.7" id="error-handling"><span class="secno">5.7. </span><span class="content">エラーハンドリング</span><a class="self-link" href="#error-handling"></a></h3>
     <p class="note" role="note">本セクションでは、主に、システムエラーから Javascript エラー名へのマッピングを定義し、UA がいくつかのオペレーションをリトライできるようにします。リトライのロジックならびに可能性があるエラーの区別は、オペレーティングシステムに大きく制約を受けます。従って、この要件が現実を反映していない所は、ブラウザのバグではなく<a href="https://github.com/WebBluetoothCG/web-bluetooth/issues">仕様バグ</a>である可能性が高いです。</p>
     <p>UA が <a data-link-type="dfn" href="#gatt-procedure" id="ref-for-gatt-procedure-3">GATT procedure</a> を用いてアルゴリズムでステップを実行したり、<a data-link-type="dfn" href="#bluetooth-cache" id="ref-for-bluetooth-cache-7">Bluetooth cache</a> への問合せを処理したり(ここでは、この二つを「ステップ」と呼びます）、GATT procedure が <code><a data-link-type="dfn" href="#error-response" id="ref-for-error-response-1">Error Response</a></code> を返す場合、UA は以下のステップを実行しなければなりません。：</p>
     <ol class="algorithm">
      <li> <a data-link-type="dfn" href="#procedure-timeouts" id="ref-for-procedure-timeouts-1">procedure が タイムアウト</a>する、または ATT Bearer ( <a data-link-type="dfn" href="#profile-fundamentals" id="ref-for-profile-fundamentals-1">Profile Fundamentals</a> で記載) が存在しない、または何らかの理由で終了した場合、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#networkerror">NetworkError</a></code> を返し、以下のステップを終了します。
      <li>
       <code>Error Code</code> によっては、以下の措置を行ってください。：
       <dl class="switch">
        <dt><code>Invalid Handle</code>
        <dt><code>Invalid PDU</code>
        <dt><code>Invalid Offset</code>
        <dt><code>Attribute Not Found</code>
        <dt><code>Unsupported Group Type</code>
        <dd> これらのエラーコードは、プロトコルレイヤーで予想外の何かが発生したことを示しています。UA またはデバイスバグに可能性がありそうです。<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> を返します。
        <dt><code>Invalid Attribute Value Length</code>
        <dd> <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidmodificationerror">InvalidModificationError</a></code> を返します。
        <dt><code>Attribute Not Long</code>
        <dd>
         <p>"Long" サブプロシジャを使用していないのにこのエラーコードを受信した場合は、デバイスのバグの可能性があります。このステップから <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> を返します。</p>
         <p> そうでない場合、"Long" サブプロシジャを使用しないでリトライします。書き込まれた値の長さからこれが不可能な場合、このステップから <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidmodificationerror">InvalidModificationError</a></code>  を返します。</p>
        <dt><code>Insufficient Authentication</code>
        <dt><code>Insufficient Encryption</code>
        <dt><code>Insufficient Encryption Key Size</code>
        <dd> UA は、接続のセキュリティレベルを上げる必要があります。この試みが失敗する、または UA がこれより高度なセキュリティを提供していない場合は、このステップから <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> を返します。そうでない場合、新しく高度なセキュリティレベルで本ステップをリトライします。
        <dt><code>Insufficient Authorization</code>
        <dd> <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror">SecurityError</a></code> を返します。
        <dt><code>Application Error</code>
        <dd> GATT procedure が Write である場合、このステップから <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidmodificationerror">InvalidModificationError</a></code> を返します。そうでない場合、このステップから <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> を返します。
        <dt><code>Read Not Permitted</code>
        <dt><code>Write Not Permitted</code>
        <dt><code>Request Not Supported</code>
        <dt><code>Prepare Queue Full</code>
        <dt><code>Insufficient Resources</code>
        <dt><code>Unlikely Error</code>
        <dt>Anything else
        <dd> <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a></code> を返します。
       </dl>
     </ol>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="uuids"><span class="secno">6. </span><span class="content">UUIDs</span><a class="self-link" href="#uuids"></a></h2>
<pre class="idl highlight def"><span class="kt">typedef</span> <span class="kt">DOMString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-uuid">UUID</dfn>;</pre>
    <p><a data-link-type="dfn" href="#uuid" id="ref-for-uuid-4">UUID</a> 文字列は128ビットの UUID <a data-link-type="biblio" href="#biblio-rfc4122">[RFC4122]</a> を表現します。<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="valid-uuid">有効な UUID</dfn> は次の正規表現とマッチする文字列です。
    the <a data-link-type="biblio" href="#biblio-ecmascript">[ECMAScript]</a> regexp <code>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/</code>
    つまり、<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-1">有効な UUID</a> は小文字で、Bluetooth標準で定義されている16ビット/32ビットの短縮版は使用しません。本仕様書の関数と属性から返却されるUUID全ては、<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-2">有効な UUID</a> でなければなりません。
      本仕様書の関数に、<a data-link-type="dfn" href="#uuid" id="ref-for-uuid-5">UUID</a> または <a data-link-type="dfn" href="#uuid" id="ref-for-uuid-6">UUID</a> 属性を含む辞書を型とする引数があり、<a data-link-type="dfn" href="#uuid" id="ref-for-uuid-7">UUID</a> スロットに渡される引数が<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-3">有効な UUID</a> でない場合、関数は <code>TypeError</code> とともに <a data-link-type="dfn" href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">promise を reject して</a>返し、他のステップを中止しなければなりません。</p>
    <p class="note" role="note">本標準では、16ビットまたは32ビットの Bluetooth <a data-link-type="dfn" href="#uuid-alias" id="ref-for-uuid-alias-1">UUID エイリアス</a> を128ビット形式にマップする <code>BluetoothUUID.<a data-link-type="functionish" href="#dom-bluetoothuuid-canonicaluuid" id="ref-for-dom-bluetoothuuid-canonicaluuid-1">canonicalUUID(<var>alias</var>)</a></code> 関数を提供しています。</p>
    <p class="note" role="note">Bluetoothデバイス は、比較前に（<a data-link-type="dfn" href="#attribute-type" id="ref-for-attribute-type-1">属性タイプ</a>に記載されたように）16ビットまたは32ビットの UUID を 128ビットの UUID に変換する必要がありますが、全てのデバイスがそうしているわけではありません。このようなデバイスと相互運用するため、UA が (16-, 32-, または 128-ビット)形式のデバイスから UUID を受信した場合、その UUID の他のエイリアスを同一形式でデバイスに送り返さなければなりません。</p>
    <section>
     <h3 class="heading settled" data-level="6.1" id="standardized-uuids"><span class="secno">6.1. </span><span class="content">標準化された UUID</span><a class="self-link" href="#standardized-uuids"></a></h3>
     <p>Bluetooth SIG は、UUID の <a data-link-type="biblio" href="#biblio-bluetooth-assigned">[BLUETOOTH-ASSIGNED]</a>  に services、characteristics、descriptors および他のエンティティを識別するレジストリーを保持しています。本セクションでは、スクリプトがこれらの UUID を名前で検索する方法を提供し、各アプリケーションで複製を作らなくても済むようにします。</p>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv idl-code" data-dfn-type="interface" data-export="" id="bluetoothuuid">BluetoothUUID<a class="self-link" href="#bluetoothuuid"></a></dfn> {
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-9">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-11">getService</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <dfn class="nv idl-code" data-dfn-for="BluetoothUUID/getService(name)" data-dfn-type="argument" data-export="" id="dom-bluetoothuuid-getservice-name-name">name<a class="self-link" href="#dom-bluetoothuuid-getservice-name-name"></a></dfn>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-10">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-getcharacteristic" id="ref-for-dom-bluetoothuuid-getcharacteristic-3">getCharacteristic</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <dfn class="nv idl-code" data-dfn-for="BluetoothUUID/getCharacteristic(name)" data-dfn-type="argument" data-export="" id="dom-bluetoothuuid-getcharacteristic-name-name">name<a class="self-link" href="#dom-bluetoothuuid-getcharacteristic-name-name"></a></dfn>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-11">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-getdescriptor" id="ref-for-dom-bluetoothuuid-getdescriptor-3">getDescriptor</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <dfn class="nv idl-code" data-dfn-for="BluetoothUUID/getDescriptor(name)" data-dfn-type="argument" data-export="" id="dom-bluetoothuuid-getdescriptor-name-name">name<a class="self-link" href="#dom-bluetoothuuid-getdescriptor-name-name"></a></dfn>);

  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid" id="ref-for-typedefdef-uuid-12">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-canonicaluuid" id="ref-for-dom-bluetoothuuid-canonicaluuid-2">canonicalUUID</a>([<a class="nv idl-code" data-link-type="extended-attribute">EnforceRange</a>] <span class="kt">unsigned</span> <span class="kt">long</span> <dfn class="nv idl-code" data-dfn-for="BluetoothUUID/canonicalUUID(alias)" data-dfn-type="argument" data-export="" id="dom-bluetoothuuid-canonicaluuid-alias-alias">alias<a class="self-link" href="#dom-bluetoothuuid-canonicaluuid-alias-alias"></a></dfn>);
};

<span class="kt">typedef</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv idl-code" data-link-type="typedef" href="#typedefdef-bluetoothserviceuuid" id="ref-for-typedefdef-bluetoothserviceuuid-9">BluetoothServiceUUID</a>;
<span class="kt">typedef</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv idl-code" data-link-type="typedef" href="#typedefdef-bluetoothcharacteristicuuid" id="ref-for-typedefdef-bluetoothcharacteristicuuid-3">BluetoothCharacteristicUUID</a>;
<span class="kt">typedef</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv idl-code" data-link-type="typedef" href="#typedefdef-bluetoothdescriptoruuid" id="ref-for-typedefdef-bluetoothdescriptoruuid-3">BluetoothDescriptorUUID</a>;
</pre>
     <p>静的な <code>BluetoothUUID.<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothUUID" data-dfn-type="method" data-export="" id="dom-bluetoothuuid-canonicaluuid">canonicalUUID(<var>alias</var>)</dfn></code> メソッドは、呼び出されると、16ビットまたは32ビット UUID エイリアスで<a data-link-type="dfn" href="#the-128-bit-uuid-represented" id="ref-for-the-128-bit-uuid-represented-1">表現された128ビットのUUID</a>を返さなければなりません。</p>
     <p class="note" role="note">このアルゴリズムは"<code>00000000-0000-1000-8000-00805f9b34fb</code>"の上位32ビットをエイリアスのビットで置換するよう構成されています。例えば <code>canonicalUUID(0xDEADBEEF)</code> であれば <code>"deadbeef-0000-1000-8000-00805f9b34fb"</code> を返します。 </p>
     <div class="note" role="note">
      <p> <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</dfn> は16ビットまたは32ビット UUID エイリアス、つまり<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-4">有効なUUID</a>、<a data-link-type="biblio" href="#biblio-bluetooth-assigned-services">[BLUETOOTH-ASSIGNED-SERVICES]</a>の中で定義された名前を表しています。言い換えれば <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-10">BluetoothUUID.getService()</a></code> で例外を発生させない値です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-bluetoothcharacteristicuuid">BluetoothCharacteristicUUID</dfn> は16ビットまたは32ビット UUID エイリアス、つまり<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-5">有効な UUID </a>、<a data-link-type="biblio" href="#biblio-bluetooth-assigned-characteristics">[BLUETOOTH-ASSIGNED-CHARACTERISTICS]</a> の中で定義された名前を表しています。言い換えれば  <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getcharacteristic" id="ref-for-dom-bluetoothuuid-getcharacteristic-4">BluetoothUUID.getCharacteristic()</a></code> で例外を発生させない値です。</p>
      <p> <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-bluetoothdescriptoruuid">BluetoothDescriptorUUID</dfn> は16ビットまたは32ビット UUID エイリアス、つまり<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-6">有効な UUID</a>、<a data-link-type="biblio" href="#biblio-bluetooth-assigned-descriptors">[BLUETOOTH-ASSIGNED-DESCRIPTORS]</a> の中で定義された名前を表しています。言い換えれば <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getdescriptor" id="ref-for-dom-bluetoothuuid-getdescriptor-4">BluetoothUUID.getDescriptor()</a></code> で例外を発生させない値です。</p>
     </div>
      <p> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="resolveuuidname">ResolveUUIDName</dfn>(<var>name</var>, <var>assigned numbers table</var>, <var>prefix</var>) を実行するためには、UA は以下のステップを実行しなければなりません：</p>
     <ol class="algorithm">
      <li><var>name</var> が <code>unsigned long</code> の場合、<code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-canonicaluuid" id="ref-for-dom-bluetoothuuid-canonicaluuid-3">BluetoothUUID.canonicalUUID</a></code>(name) を返し、以下のステップを中止します。
      <li><var>name</var> が<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-7">有効な UUID</a> の場合、<var>name</var> を返し、以下のステップを中止します。
      <li><code><var>prefix</var> + "." + <var>name</var></code> が <var>指定された番号テーブル</var> に現れた場合、<var>エイリアス</var>を指定された番号にして <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-canonicaluuid" id="ref-for-dom-bluetoothuuid-canonicaluuid-4">BluetoothUUID.canonicalUUID</a></code>(<var>alias</var>) を返します。
      <li> それ以外の場合は <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#syntaxerror">SyntaxError</a></code> をスローします。
     </ol>
     <p> 静的な <code>BluetoothUUID.<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothUUID" data-dfn-type="method" data-export="" id="dom-bluetoothuuid-getservice">getService(<var>name</var>)</dfn></code> メソッドは、呼び出されると、<a data-link-type="dfn" href="#resolveuuidname" id="ref-for-resolveuuidname-1">ResolveUUIDName</a>(<code><var>name</var></code>, <a data-link-type="biblio" href="#biblio-bluetooth-assigned-services">[BLUETOOTH-ASSIGNED-SERVICES]</a>, "org.bluetooth.service") を返さなければいけません。 </p>
     <p> 静的な <code>BluetoothUUID.<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothUUID" data-dfn-type="method" data-export="" id="dom-bluetoothuuid-getcharacteristic">getCharacteristic(<var>name</var>)</dfn></code> メソッドは、呼び出されると、<a data-link-type="dfn" href="#resolveuuidname" id="ref-for-resolveuuidname-2">ResolveUUIDName</a>(<code><var>name</var></code>, <a data-link-type="biblio" href="#biblio-bluetooth-assigned-characteristics">[BLUETOOTH-ASSIGNED-CHARACTERISTICS]</a>, "org.bluetooth.characteristic") を返さなければいけません。 </p>
      <p> 静的な <code>BluetoothUUID.<dfn class="dfn-paneled idl-code" data-dfn-for="BluetoothUUID" data-dfn-type="method" data-export="" id="dom-bluetoothuuid-getdescriptor">getDescriptor(<var>name</var>)</dfn></code> メソッドは、呼び出されると、<a data-link-type="dfn" href="#resolveuuidname" id="ref-for-resolveuuidname-3">ResolveUUIDName</a>(<code><var>name</var></code>, <a data-link-type="biblio" href="#biblio-bluetooth-assigned-descriptors">[BLUETOOTH-ASSIGNED-DESCRIPTORS]</a>, "org.bluetooth.descriptor") を返さなければいけません。 </p>
     <div class="example" id="example-d5112950">
      <a class="self-link" href="#example-d5112950"></a>
      <p> <code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-13">BluetoothUUID.getService</a></code>("<a data-link-type="idl" href="https://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.cycling_power.xml#">cycling_power</a>")</code> returns <code>"00001818-0000-1000-8000-00805f9b34fb"</code>. </p>
      <p> <code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-14">BluetoothUUID.getService</a></code>("00001801-0000-1000-8000-00805f9b34fb")</code> returns <code>"00001801-0000-1000-8000-00805f9b34fb"</code>. </p>
      <p> <code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-15">BluetoothUUID.getService</a></code>("unknown-service")</code> throws a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#syntaxerror">SyntaxError</a></code>. </p>
      <p> <code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getcharacteristic" id="ref-for-dom-bluetoothuuid-getcharacteristic-5">BluetoothUUID.getCharacteristic</a></code>("<code class="idl"><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.ieee_11073-20601_regulatory_certification_data_list.xml#">ieee_11073-20601_regulatory_certification_data_list</a></code>")</code> returns <code>"00002a2a-0000-1000-8000-00805f9b34fb"</code>. </p>
      <p> <code><code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getdescriptor" id="ref-for-dom-bluetoothuuid-getdescriptor-5">BluetoothUUID.getDescriptor</a></code>("<code class="idl"><a data-link-type="idl" href="https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorViewer.aspx?u=org.bluetooth.descriptor.gatt.characteristic_presentation_format.xml#">gatt.characteristic_presentation_format</a></code>")</code> returns <code>"00002904-0000-1000-8000-00805f9b34fb"</code>. </p>
     </div>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="the-gatt-blacklist"><span class="secno">7. </span><span class="content">GATTブラックリスト</span><a class="self-link" href="#the-gatt-blacklist"></a></h2>
    <p>本仕様は、ウェブサイトがアクセス可能な GATT 属性 の集合を制限するために <a href="https://github.com/WebBluetoothCG/registries">https://github.com/WebBluetoothCG/registries</a> にあるブラックリストファイルに依存しています。</p>
    <p>URLにある<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="parsing-the-blacklist">ブラックリストをパース</dfn> した結果は、以下のアルゴリズムにより生成される、<a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-8">有効な UUID</a> からトークンまたはエラーへのマップです： </p>
    <ol class="algorithm">
     <li><var>URL</var>を取得し、そのコンテンツをボディとし、UTF-8 としてデコードします。
     <li><var>lines</var> は <code>'\n'</code> で分割された内容とします。
     <li><var>result</var> を空のマップにします。
     <li>
       <var>lines</var> の各 <var>line</var>に対して、以下のサブステップを実行します：
      <ol>
       <li><var>line</var> が空行か、先頭文字が <code>'#'</code> の場合、次の行に進みます。
       <li><var>line</var> が <a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-9">有効な UUID</a> の場合、<var>uuid</var> をその UUID とし、<var>token</var> を "<code>exclude</code>" にします。
       <li><var>line</var> が <a data-link-type="dfn" href="#valid-uuid" id="ref-for-valid-uuid-10">有効なUUID</a>、スペース(U+0020)、そして "<code>exclude-reads</code>" または "<code>exclude-writes</code>" のいずれかのトークンからなる場合、<var>uuid</var> をその UUID とし、<var>token</var> をそのトークンにします。
       <li> そうでない場合は、エラーを返し、以下のステップを中止します。
       <li> <var>uuid</var> がすでに <var>result</var> の中にある場合、エラーを返し、以下のステップを中止します。
       <li> <var>uuid</var> から <var>token</var> へのマッピングを <var>result</var> に追加します。
      </ol>
     <li><var>result</var> を返します。
    </ol>
    <p> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="gatt-blacklist">GATT blacklist</dfn> は <a href="https://github.com/WebBluetoothCG/registries/blob/master/gatt_blacklist.txt">https://github.com/WebBluetoothCG/registries/blob/master/gatt_blacklist.txt</a> にある <a data-link-type="dfn" href="#parsing-the-blacklist" id="ref-for-parsing-the-blacklist-1">ブラックリストをパース</a> した結果です。
    UA は定期的にブラックリストを再読み込みすべきですが、頻度は規定されていません。</p>
    <p><a data-link-type="dfn" href="#gatt-blacklist" id="ref-for-gatt-blacklist-1">GATT blacklist</a> の値がエラーか、UUIDが <a data-link-type="dfn" href="#gatt-blacklist" id="ref-for-gatt-blacklist-2">GATT blacklist</a> で "<code>exclude</code>" にマップされる場合、<a data-link-type="dfn" href="#uuid" id="ref-for-uuid-8">UUID</a> は <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="blacklisted" data-noexport="" id="blacklisted">ブラックリストに加えられます。<span class="dfn-panel" data-deco=""><b><a href="#blacklisted">#blacklisted</a></b><b>Referenced in:</b><span><a href="#ref-for-blacklisted-1">3. Device Discovery</a> <a href="#ref-for-blacklisted-2">(2)</a></span><span><a href="#ref-for-blacklisted-3">5.1.2. Navigating the Bluetooth Hierarchy</a></span></span></dfn> </p>
    <p><a data-link-type="dfn" href="#gatt-blacklist" id="ref-for-gatt-blacklist-3">GATT blacklist</a> の値がエラーか、UUIDが  <a data-link-type="dfn" href="#gatt-blacklist" id="ref-for-gatt-blacklist-4">GATT blacklist</a> で "<code>exclude</code>" または "<code>exclude-reads</code>" にマップされる場合、<a data-link-type="dfn" href="#uuid" id="ref-for-uuid-9">UUID</a> は <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="blacklisted for reads" data-noexport="" id="blacklisted-for-reads">読み出し用ブラックリストに加えられます。<span class="dfn-panel" data-deco=""><b><a href="#blacklisted-for-reads">#blacklisted-for-reads</a></b><b>Referenced in:</b><span><a href="#ref-for-blacklisted-for-reads-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-blacklisted-for-reads-2">(2)</a></span><span><a href="#ref-for-blacklisted-for-reads-3">5.5. BluetoothRemoteGATTDescriptor</a></span></span></dfn> </p>
   <p><a data-link-type="dfn" href="#gatt-blacklist" id="ref-for-gatt-blacklist-5">GATT blacklist</a> の値がエラーか、UUIDが <a data-link-type="dfn" href="#gatt-blacklist" id="ref-for-gatt-blacklist-5">GATT blacklist</a> で "<code>exclude</code>" または "<code>exclude-writes</code>" にマップされる場合、<a data-link-type="dfn" href="#uuid" id="ref-for-uuid-10">UUID</a> は <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="blacklisted for writes" data-noexport="" id="blacklisted-for-writes">書き込み用ブラックリストに加えられます。<span class="dfn-panel" data-deco=""><b><a href="#blacklisted-for-writes">#blacklisted-for-writes</a></b><b>Referenced in:</b><span><a href="#ref-for-blacklisted-for-writes-1">5.4. BluetoothRemoteGATTCharacteristic</a></span><span><a href="#ref-for-blacklisted-for-writes-2">5.5. BluetoothRemoteGATTDescriptor</a></span></span></dfn></p>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="navigator-extensions"><span class="secno">8. </span><span class="content">ナビゲーションインターフェースの拡張</span><a class="self-link" href="#navigator-extensions"></a></h2>
<pre class="idl highlight def"><span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetooth" id="ref-for-bluetooth-13">Bluetooth</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Bluetooth" id="dom-navigator-bluetooth">bluetooth</dfn>;
};
</pre>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="terminology"><span class="secno">9. </span><span class="content">用語と規則</span><a class="self-link" href="#terminology"></a></h2>
    <p>本仕様書は、規約と他の仕様書からの用語をいくつか使用します。本セクションでは、これらと主要な定義へのリンクをリストアップします。</p>
    <p><a href="https://streams.spec.whatwg.org/#conventions">Streams仕様書</a>に刺激を受け、本仕様書では、オブジェクトの<a href="http://ecma-international.org/ecma-262/6.0/#sec-object-internal-methods-and-internal-slots">内部スロット</a>を参照するため、「内部スロットxの [[y]]」という代わりに[[[ x@[[y]] ]]] という表記を使用します。 </p>
    <p>本仕様書で用いるアルゴリズムが、この仕様書または別の仕様書で定義される名前を用いる場合、その名前は初期値で解決され、現在の実行環境で名前に加えられたいかなる変更も無視しなければなりません。
    例えば、<code class="idl"><a data-link-type="idl" href="#dom-bluetooth-requestdevice" id="ref-for-dom-bluetooth-requestdevice-6">requestDevice()</a></code> アルゴリズムが、<code><code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-array.prototype.map">Array.prototype.map</a></code>.call(<var>filter</var>.services, <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-16">BluetoothUUID.getService</a></code>)</code> を呼び出す場合、パラメータとアルゴリズムは <a href="#standardized-uuids">§6.1 Standardized UUIDs</a> 内の <code class="idl"><a data-link-type="idl" href="#dom-bluetoothuuid-getservice" id="ref-for-dom-bluetoothuuid-getservice-17">BluetoothUUID.getService</a></code> で <code>callbackfn</code> パラメータとして定義された、<code><var>filter</var>.services</code> を使って <a data-link-type="biblio" href="#biblio-ecmascript">[ECMAScript]</a> で定義された <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-array.prototype.map">Array.prototype.map</a></code> アルゴリズムに適用されなければなりません。これは<code>window</code>, <code>Array</code>, <code>Array.prototype</code>, <code>Array.prototype.map</code>, <code>Function</code>, <code>Function.prototype</code>, <code>BluetoothUUID</code>, <code>BluetoothUUID.getService</code> またはその他のオブジェクトに加えられた修正とは関係ありません。</p>
    <p></p>
    <p>本仕様書では、WebIDLの <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FfrozenArray">FrozenArray</a></code> と同様の読み出し専用タイプを使用しています。</p>
    <ul>
     <li><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="read-only-arraybuffer">読み取り専用 ArrayBuffer</dfn> には <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> の値とインターフェースがあります。このコンテンツへの書き込みまたは転送を試みようとすることを除き、<code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a></code> のコンテンツへ書き込もうとした時と同じ影響があります。
       <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a></code> でラッピングされた <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-typedarray-constructors">TypedArray</a></code> と <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a></code> にもこれは適用されます。
    </ul>
     <dl>
       <dt><a data-link-type="biblio" href="#biblio-bluetooth42">[BLUETOOTH42]</a>
       <dd>
         <ol>
           <li value="1">
             Architecture &amp; Terminology Overview
             <ol type="A">
               <li value="1">
                 General Description
                 <ol>
                   <li value="2">Overview of Bluetooth Low Energy Operation
                     (defines <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="advertising event|advertising events" data-noexport="" id="advertising-event">advertising events</dfn>)
                 </ol>
               <li value="4">
                 Communication Topology and Operation
                 <ol>
                   <li value="2">
                     Operational Procedures and Modes
                     <ol>
                       <li value="1">
                         BR/EDR Procedures
                         <ol>
                           <li value="1">
                             Inquiry (Discovering) Procedure
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="extended-inquiry-response">Extended Inquiry Response</dfn>
                             </ol>
                         </ol>
                     </ol>
                 </ol>
             </ol>
           <li value="2">
             Core System Package [BR/EDR Controller volume]
             <ol type="A">
               <li value="5">
                 Host Controller Interface Functional Specification
                 <ol>
                   <li value="7">
                     HCI Commands and Events
                     <ol>
                       <li value="4">
                         Informational Parameters
                         <ol>
                           <li value="6"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="read-bd_addr-command">Read BD_ADDR Command</dfn>
                         </ol>
                       <li value="5">
                         Status Parameters
                         <ol>
                           <li value="4"> Read <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="RSSI|Received Signal Strength" data-noexport="" id="rssi"><abbr title="Received Signal Strength Indication">RSSI</abbr></dfn> Command
                         </ol>
                     </ol>
                 </ol>
             </ol>
           <li value="3">
             Core System Package [Host volume]
             <ol type="A">
               <li value="2">
                 Service Discovery Protocol (SDP) Specification
                 <ol>
                   <li value="2">
                     Overview
                     <ol>
                       <li value="5">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="searching-for-services">Searching for Services</dfn>
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="uuid">UUID</dfn> (defines <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="uuid-alias">UUID alias</dfn>es and
                             the algorithm to compute <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="the-128-bit-uuid-represented">the 128-bit UUID represented</dfn> by a UUID alias)
                         </ol>
                     </ol>
                 </ol>
               <li value="3">
                 Generic Access Profile
                 <ol>
                   <li value="2">
                     Profile Overview
                     <ol>
                       <li value="2">
                         Profile Roles
                         <ol>
                           <li value="2">
                             Roles when Operating over an LE Physical Transport
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="broadcaster">Broadcaster</dfn> Role
                               <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="observer">Observer</dfn> Role
                               <li value="3"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="peripheral">Peripheral</dfn> Role
                               <li value="4"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="central">Central</dfn> Role
                             </ol>
                         </ol>
                     </ol>
                   <li value="3">
                     User Interface Aspects
                     <ol>
                       <li value="2">
                         Representation of Bluetooth Parameters
                         <ol>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="bluetooth-device-name">Bluetooth Device Name</dfn> (the user-friendly name)
                         </ol>
                     </ol>
                   <li value="6">
                     Idle Mode Procedures — BR/EDR Physical Transport
                     <ol>
                       <li value="4"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="device-discovery-procedure">Device Discovery Procedure</dfn>
                     </ol>
                   <li value="9">
                     Operational Modes and Procedures — LE Physical Transport
                     <ol>
                       <li value="1">
                         Broadcast Mode and Observation Procedure
                         <ol>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="observation-procedure">Observation Procedure</dfn>
                         </ol>
                       <li value="2">
                         Discovery Modes and Procedures
                         <ol>
                           <li value="6"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="general-discovery-procedure">General Discovery Procedure</dfn>
                           <li value="7"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="name-discovery-procedure">Name Discovery Procedure</dfn>
                         </ol>
                       <li value="3"><dfn data-dfn-type="dfn" data-noexport="" id="connection-modes-and-procedures">Connection Modes and Procedures<a class="self-link" href="#connection-modes-and-procedures"></a></dfn>
                     </ol>
                   <li value="10">
                     Security Aspects — LE Physical Transport
                     <ol>
                       <li value="7"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="privacy-feature">Privacy Feature</dfn>
                       <li value="8">
                         Random Device Address
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="static-address">Static Address</dfn>
                           <li value="2">
                             <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="private-address">Private address</dfn>
                             <ol>
                               <li value="3"> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="resolvable-private-address-resolution-procedure">Resolvable Private Address Resolution Procedure</dfn>
                             </ol>
                         </ol>
                     </ol>
                   <li value="11"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="advertising-data">Advertising Data</dfn> and Scan Response Data Format
                     (defines <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="ad-structure">AD structure</dfn>)
                   <li value="15">
                     Bluetooth Device Requirements
                     <ol>
                       <li value="1">
                         Bluetooth Device Address (defines <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="bd_addr">BD_ADDR</dfn>)
                         <ol>
                           <li value="1">
                             Bluetooth Device Address Types
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="public-bluetooth-address">Public Bluetooth Address</dfn>
                             </ol>
                         </ol>
                     </ol>
                 </ol>
               <li value="6">
                 Attribute Protocol (ATT)
                 <ol>
                   <li value="3">
                     Protocol Requirements
                     <ol>
                       <li value="2">
                         Basic Concepts
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="attribute-type">Attribute Type</dfn>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="attribute-handle">Attribute Handle</dfn>
                           <li value="9"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="long-attribute-values">Long Attribute Values</dfn>
                         </ol>
                       <li value="4">
                         Attribute Protocol Pdus
                         <ol>
                           <li value="1">
                             Error Handling
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="error-response">Error Response</dfn>
                             </ol>
                         </ol>
                     </ol>
                 </ol>
               <li value="7">
                 <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="Generic Attribute Profile|GATT" data-noexport="" id="generic-attribute-profile">Generic Attribute Profile</dfn> (GATT)
                 <ol>
                   <li value="2">
                     Profile Overview
                     <ol>
                       <li value="2">Configurations and Roles
                         (defines <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="gatt-client">GATT Client</dfn> and <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="gatt-server">GATT Server</dfn>)
                       <li value="4"> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="profile-fundamentals">Profile Fundamentals</dfn>,
                         defines the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="att-bearer">ATT Bearer</dfn>
                       <li value="5">
                         Attribute Protocol
                         <ol>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="attribute-caching">Attribute Caching</dfn>
                         </ol>
                       <li value="6">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="gatt-profile-hierarchy">GATT Profile Hierarchy</dfn>
                         <ol>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="service">Service</dfn>
                           <li value="3"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="included-service">Included Service</dfn>s
                           <li value="4"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic">Characteristic</dfn>
                         </ol>
                     </ol>
                   <li value="3">
                     Service Interoperability Requirements
                     <ol>
                       <li value="3">
                         Characteristic Definition
                         <ol>
                           <li value="1">
                             Characteristic Declaration
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-properties">Characteristic Properties</dfn>
                             </ol>
                           <li value="3">
                             Characteristic <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="descriptor">Descriptor</dfn> Declarations
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-extended-properties">Characteristic Extended Properties</dfn>
                               <li value="3"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="client-characteristic-configuration">Client Characteristic Configuration</dfn>
                             </ol>
                         </ol>
                     </ol>
                   <li value="4">
                     GATT Feature Requirements — defines the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="GATT procedure|GATT procedures" data-noexport="" id="gatt-procedure">GATT procedures</dfn>.
                     <ol>
                       <li value="4">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="primary-service-discovery">Primary Service Discovery</dfn>
                         <ol>
                           <li value="1"><dfn data-dfn-type="dfn" data-noexport="" id="discover-all-primary-services">Discover All Primary Services<a class="self-link" href="#discover-all-primary-services"></a></dfn>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="discover-primary-service-by-service-uuid">Discover Primary Service by Service UUID</dfn>
                         </ol>
                       <li value="5">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="relationship-discovery">Relationship Discovery</dfn>
                         <ol>
                           <li value="1"><dfn data-dfn-type="dfn" data-noexport="" id="find-included-services">Find Included Services<a class="self-link" href="#find-included-services"></a></dfn>
                         </ol>
                       <li value="6">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-discovery">Characteristic Discovery</dfn>
                         <ol>
                           <li value="1"><dfn data-dfn-type="dfn" data-noexport="" id="discover-all-characteristics-of-a-service">Discover All Characteristics of a Service<a class="self-link" href="#discover-all-characteristics-of-a-service"></a></dfn>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="discover-characteristics-by-uuid">Discover Characteristics by UUID</dfn>
                         </ol>
                       <li value="7">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-descriptor-discovery">Characteristic Descriptor Discovery</dfn>
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="discover-all-characteristic-descriptors">Discover All Characteristic Descriptors</dfn>
                         </ol>
                       <li value="8"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-value-read">Characteristic Value Read</dfn>
                       <li value="9"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-value-write">Characteristic Value Write</dfn>
                       <li value="10"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-value-notification">Characteristic Value Notification</dfn>
                       <li value="11"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-value-indications">Characteristic Value Indications</dfn>
                       <li value="12">
                         <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="characteristic-descriptors">Characteristic Descriptors</dfn>
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="read-characteristic-descriptors">Read Characteristic Descriptors</dfn>
                           <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="read-long-characteristic-descriptors">Read Long Characteristic Descriptors</dfn>
                           <li value="3"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="write-characteristic-descriptors">Write Characteristic Descriptors</dfn>
                           <li value="4"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="write-long-characteristic-descriptors">Write Long Characteristic Descriptors</dfn>
                         </ol>
                       <li value="14"><dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="procedure times out" data-noexport="" id="procedure-timeouts">Procedure Timeouts</dfn>
                     </ol>
                   <li value="6">
                     <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="gap-interoperability-requirements">GAP Interoperability Requirements</dfn>
                     <ol>
                       <li value="1">
                         BR/EDR GAP Interoperability Requirements
                         <ol>
                           <li value="1">Connection Establishment
                         </ol>
                       <li value="2">
                         LE GAP Interoperability Requirements
                         <ol>
                           <li value="1">Connection Establishment
                         </ol>
                     </ol>
                   <li value="7">
                     Defined Generic Attribute Profile Service
                     <ol>
                       <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="service-changed">Service Changed</dfn>
                     </ol>
                 </ol>
               <li value="8">
                 Security Manager Specification
                 <ol>
                   <li value="2">
                     Security Manager
                     <ol>
                       <li value="4">
                         Security in Bluetooth Low Energy
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="definition-of-keys-and-values">Definition of Keys and Values</dfn>,
                             defines the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="Identity Resolving Key|IRK" data-noexport="" id="identity-resolving-key">Identity Resolving Key</dfn> (<abbr title="Identity Resolving Key">IRK</abbr>)
                         </ol>
                     </ol>
                 </ol>
             </ol>
           <li value="6">
             Core System Package [Low Energy Controller volume]
             <ol type="A">
               <li value="2">
                 Link Layer Specification
                 <ol>
                   <li value="1">
                     General Description
                     <ol>
                       <li value="3">
                         Device Address
                         <ol>
                           <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="public-device-address">Public Device Address</dfn>
                           <li value="2">
                             Random Device Address
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="static-device-address">Static Device Address</dfn>
                             </ol>
                         </ol>
                     </ol>
                   <li value="4">
                     Air Interface Protocol
                     <ol>
                       <li value="4">
                         Non-Connected States
                         <ol>
                           <li value="3">
                             Scanning State
                             <ol>
                               <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="passive-scanning">Passive Scanning</dfn>
                             </ol>
                         </ol>
                     </ol>
                 </ol>
             </ol>
         </ol>
       <dt><a data-link-type="biblio" href="#biblio-bluetooth-supplement6">[BLUETOOTH-SUPPLEMENT6]</a>
       <dd>
         <ol type="A">
           <li value="1">
             Data Types Specification
             <ol>
               <li value="1">
                 Data Types Definitions and Formats
                 <ol>
                   <li value="1"><dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="Service UUIDs" data-noexport="" id="service-uuid-data-type">Service UUID Data Type</dfn>
                   <li value="2"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="local-name-data-type">Local Name Data Type</dfn>
                   <li value="3"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="flags-data-type">Flags Data Type</dfn>
                   <li value="4"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="manufacturer-specific-data">Manufacturer Specific Data</dfn>
                   <li value="5"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="tx-power-level">TX Power Level</dfn>
                   <li value="11"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="service-data">Service Data</dfn>
                   <li value="12"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="appearance">Appearance</dfn>
                 </ol>
             </ol>
         </ol>
     </dl>
   </section>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> 規格適合性</span><a class="self-link" href="#conformance"></a></h2>
   <p>規格適合性の要件は、記述的な主張とRFC 2119 の用語の組み合わせで表明されています。本ドキュメントの標準部分にあるキーワード “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, そして “OPTIONAL” は、RFC 2119 に述べられているように解釈されるものです。しかしながら、読みやすさのために、本仕様書ではこれらのキーワード全てが大文字で現れるとは限りません。</p>
  <p>本仕様書の本文全ては規定です。ただし、参考(non-normative)、例(examples)、注記(notes)と明示されたセクションを除きます。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p>本仕様書の例は、「例えば(for example)」という表現で導入されるか、このように <code>class="example"</code> を使って標準的なテキストから分離されています。：</p>
   <div class="example" id="example-ae2b6bc0"><a class="self-link" href="#example-ae2b6bc0"></a> This is an example of an informative example. </div>
   <p>参考注記は、「注記(Note)」という表現で導入されるか、このように <code>class="note"</code> を使って標準的なテキストから分離されています。： </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
    <li><a href="#dom-bluetoothremotegattserver-activealgorithms-slot">[[activeAlgorithms]]</a><span>, in §5.2</span>
    <li><a href="#active-notification-context-set">active notification context set</a><span>, in §5.4</span>
    <li><a href="#ad-structure">AD structure</a><span>, in §9</span>
    <li><a href="#eventdef-bluetoothdevice-advertisementreceived">advertisementreceived</a><span>, in §5.6.2</span>
    <li><a href="#advertising-data">Advertising Data</a><span>, in §9</span>
    <li><a href="#advertising-event">advertising event</a><span>, in §9</span>
    <li><a href="#advertising-event">advertising events</a><span>, in §9</span>
    <li><a href="#dictdef-allowedbluetoothdevice">AllowedBluetoothDevice</a><span>, in §3.1</span>
    <li><a href="#dom-bluetoothpermissiondata-alloweddevices">allowedDevices</a><span>, in §3.1</span>
    <li><a href="#dom-bluetoothdevice-allowedservices-slot">[[allowedServices]]</a><span>, in §4.2</span>
    <li><a href="#dom-allowedbluetoothdevice-allowedservices">allowedServices</a><span>, in §3.1</span>
    <li><a href="#appearance">Appearance</a><span>, in §9</span>
    <li>
      appearance
      <ul>
        <li><a href="#dom-bluetoothadvertisingeventinit-appearance">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-appearance">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#att-bearer">ATT Bearer</a><span>, in §9</span>
    <li><a href="#attribute">Attribute</a><span>, in §5.1</span>
    <li><a href="#attribute-caching">Attribute Caching</a><span>, in §9</span>
    <li><a href="#attribute-handle">Attribute Handle</a><span>, in §9</span>
    <li><a href="#dom-bluetooth-attributeinstancemap-slot">[[attributeInstanceMap]]</a><span>, in §3</span>
    <li><a href="#attribute-type">Attribute Type</a><span>, in §9</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-authenticatedsignedwrites">authenticatedSignedWrites</a><span>, in §5.4.1</span>
    <li><a href="#bd_addr">BD_ADDR</a><span>, in §9</span>
    <li><a href="#blacklisted">blacklisted</a><span>, in §7</span>
    <li><a href="#blacklisted-for-reads">blacklisted for reads</a><span>, in §7</span>
    <li><a href="#blacklisted-for-writes">blacklisted for writes</a><span>, in §7</span>
    <li><a href="#bluetooth">Bluetooth</a><span>, in §3</span>
    <li><a href="#dom-navigator-bluetooth">bluetooth</a><span>, in §8</span>
    <li><a href="#dom-permissionname-bluetooth">"bluetooth"</a><span>, in §3.1</span>
    <li><a href="#bluetoothadvertisingevent">BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
    <li><a href="#dictdef-bluetoothadvertisingeventinit">BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
    <li><a href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent">BluetoothAdvertisingEvent(type, init)</a><span>, in §4.2.1</span>
    <li><a href="#bluetooth-cache">Bluetooth cache</a><span>, in §5.1</span>
    <li><a href="#bluetoothcharacteristicproperties">BluetoothCharacteristicProperties</a><span>, in §5.4.1</span>
    <li><a href="#typedefdef-bluetoothcharacteristicuuid">BluetoothCharacteristicUUID</a><span>, in §6.1</span>
    <li><a href="#typedefdef-bluetoothdescriptoruuid">BluetoothDescriptorUUID</a><span>, in §6.1</span>
    <li><a href="#bluetoothdevice">BluetoothDevice</a><span>, in §4</span>
    <li><a href="#bluetooth-device">Bluetooth device</a><span>, in §4.1</span>
    <li><a href="#bluetoothdeviceeventhandlers">BluetoothDeviceEventHandlers</a><span>, in §5.6.6</span>
    <li><a href="#bluetooth-device-name">Bluetooth Device Name</a><span>, in §9</span>
    <li><a href="#bluetoothmanufacturerdatamap">BluetoothManufacturerDataMap</a><span>, in §4.2.1</span>
    <li><a href="#dictdef-bluetoothpermissiondata">BluetoothPermissionData</a><span>, in §3.1</span>
    <li><a href="#dictdef-bluetoothpermissiondescriptor">BluetoothPermissionDescriptor</a><span>, in §3.1</span>
    <li><a href="#bluetoothpermissionresult">BluetoothPermissionResult</a><span>, in §3.1</span>
    <li><a href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a><span>, in §5</span>
    <li><a href="#bluetoothremotegattdescriptor">BluetoothRemoteGATTDescriptor</a><span>, in §5</span>
    <li><a href="#bluetoothremotegattserver">BluetoothRemoteGATTServer</a><span>, in §5</span>
    <li><a href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a><span>, in §5</span>
    <li><a href="#dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</a><span>, in §3</span>
    <li><a href="#bluetoothservicedatamap">BluetoothServiceDataMap</a><span>, in §4.2.1</span>
    <li><a href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a><span>, in §6.1</span>
    <li><a href="#bluetooth-tree">Bluetooth Tree</a><span>, in §5.6</span>
    <li><a href="#bluetoothuuid">BluetoothUUID</a><span>, in §6.1</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-broadcast">broadcast</a><span>, in §5.4.1</span>
    <li><a href="#broadcaster">Broadcaster</a><span>, in §9</span>
    <li><a href="#dom-bluetoothdevice-cachedallowedservices-slot">[[cachedAllowedServices]]</a><span>, in §4.2</span>
    <li><a href="#dom-bluetoothdevice-cachedunfiltereduuids-slot">[[cachedUnfilteredUuids]]</a><span>, in §4.2</span>
    <li><a href="#dom-bluetoothuuid-canonicaluuid">canonicalUUID(alias)</a><span>, in §6.1</span>
    <li><a href="#central">Central</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattdescriptor-characteristic">characteristic</a><span>, in §5.5</span>
    <li><a href="#characteristic">Characteristic</a><span>, in §9</span>
    <li><a href="#characteristic-descriptor-discovery">Characteristic Descriptor Discovery</a><span>, in §9</span>
    <li><a href="#characteristic-descriptors">Characteristic Descriptors</a><span>, in §9</span>
    <li><a href="#characteristic-discovery">Characteristic Discovery</a><span>, in §9</span>
    <li><a href="#characteristiceventhandlers">CharacteristicEventHandlers</a><span>, in §5.6.6</span>
    <li><a href="#characteristic-extended-properties">Characteristic Extended Properties</a><span>, in §9</span>
    <li><a href="#characteristic-properties">Characteristic Properties</a><span>, in §9</span>
    <li><a href="#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged">characteristicvaluechanged</a><span>, in §5.6.2</span>
    <li><a href="#characteristic-value-indications">Characteristic Value Indications</a><span>, in §9</span>
    <li><a href="#characteristic-value-notification">Characteristic Value Notification</a><span>, in §9</span>
    <li><a href="#characteristic-value-read">Characteristic Value Read</a><span>, in §9</span>
    <li><a href="#characteristic-value-write">Characteristic Value Write</a><span>, in §9</span>
    <li><a href="#client-characteristic-configuration">Client Characteristic Configuration</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattserver-connect">connect()</a><span>, in §5.2</span>
    <li><a href="#dom-bluetoothremotegattserver-connected">connected</a><span>, in §5.2</span>
    <li><a href="#connection-checking-wrapper">connection-checking wrapper</a><span>, in §5.2</span>
    <li><a href="#connection-modes-and-procedures">Connection Modes and Procedures</a><span>, in §9</span>
    <li><a href="#dom-bluetoothdevice-context-slot">[[context]]</a><span>, in §4.2</span>
    <li><a href="#create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic">create a BluetoothCharacteristicProperties instance from the Characteristic</a><span>, in §5.4.1</span>
    <li><a href="#create-a-bluetoothremotegattcharacteristic-representing">create a BluetoothRemoteGATTCharacteristic representing</a><span>, in §5.4</span>
    <li><a href="#create-a-bluetoothremotegattdescriptor-representing">create a BluetoothRemoteGATTDescriptor representing</a><span>, in §5.5</span>
    <li><a href="#create-a-bluetoothremotegattservice-representing">create a BluetoothRemoteGATTService representing</a><span>, in §5.3</span>
    <li>
      [[data]]
      <ul>
        <li><a href="#dom-bluetoothmanufacturerdatamap-data-slot">attribute for BluetoothManufacturerDataMap</a><span>, in §4.2.1.1</span>
        <li><a href="#dom-bluetoothservicedatamap-data-slot">attribute for BluetoothServiceDataMap</a><span>, in §4.2.1.2</span>
      </ul>
    <li><a href="#definition-of-keys-and-values">Definition of Keys and Values</a><span>, in §9</span>
    <li><a href="#descriptor">Descriptor</a><span>, in §9</span>
    <li><a href="#dom-allowedbluetoothdevice-device-slot">[[device]]</a><span>, in §3.1</span>
    <li>
      device
      <ul>
        <li><a href="#dom-bluetoothadvertisingeventinit-device">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-device">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothremotegattserver-device">attribute for BluetoothRemoteGATTServer</a><span>, in §5.2</span>
        <li><a href="#dom-bluetoothremotegattservice-device">attribute for BluetoothRemoteGATTService</a><span>, in §5.3</span>
      </ul>
    <li><a href="#device-discovery-procedure">Device Discovery Procedure</a><span>, in §9</span>
    <li>
      deviceId
      <ul>
        <li><a href="#dom-bluetoothpermissiondescriptor-deviceid">dict-member for BluetoothPermissionDescriptor</a><span>, in §3.1</span>
        <li><a href="#dom-allowedbluetoothdevice-deviceid">dict-member for AllowedBluetoothDevice</a><span>, in §3.1</span>
      </ul>
    <li><a href="#dom-bluetooth-deviceinstancemap-slot">[[deviceInstanceMap]]</a><span>, in §3</span>
    <li><a href="#dom-bluetoothpermissionresult-devices">devices</a><span>, in §3.1</span>
    <li><a href="#dom-bluetoothremotegattserver-disconnect">disconnect()</a><span>, in §5.2</span>
    <li><a href="#discover-all-characteristic-descriptors">Discover All Characteristic Descriptors</a><span>, in §9</span>
    <li><a href="#discover-all-characteristics-of-a-service">Discover All Characteristics of a Service</a><span>, in §9</span>
    <li><a href="#discover-all-primary-services">Discover All Primary Services</a><span>, in §9</span>
    <li><a href="#discover-characteristics-by-uuid">Discover Characteristics by UUID</a><span>, in §9</span>
    <li><a href="#discover-primary-service-by-service-uuid">Discover Primary Service by Service UUID</a><span>, in §9</span>
    <li><a href="#error-response">Error Response</a><span>, in §9</span>
    <li><a href="#extended-inquiry-response">Extended Inquiry Response</a><span>, in §9</span>
    <li><a href="#dom-bluetoothdevice-filtereduuids-slot">[[filteredUuids]]</a><span>, in §4.2</span>
    <li>
      filters
      <ul>
        <li><a href="#dom-requestdeviceoptions-filters">dict-member for RequestDeviceOptions</a><span>, in §3</span>
        <li><a href="#dom-bluetoothpermissiondescriptor-filters">dict-member for BluetoothPermissionDescriptor</a><span>, in §3.1</span>
      </ul>
    <li><a href="#find-included-services">Find Included Services</a><span>, in §9</span>
    <li><a href="#fire-an-advertisementreceived-event">fire an advertisementreceived event</a><span>, in §4.2.1</span>
    <li><a href="#flags-data-type">Flags Data Type</a><span>, in §9</span>
    <li><a href="#gap-interoperability-requirements">GAP Interoperability Requirements</a><span>, in §9</span>
    <li><a href="#generic-attribute-profile">GATT</a><span>, in §9</span>
    <li><a href="#dom-bluetoothdevice-gatt">gatt</a><span>, in §4.2</span>
    <li><a href="#gatt-blacklist">GATT blacklist</a><span>, in §7</span>
    <li><a href="#gatt-client">GATT Client</a><span>, in §9</span>
    <li><a href="#gatt-procedure">GATT procedure</a><span>, in §9</span>
    <li><a href="#gatt-procedure">GATT procedures</a><span>, in §9</span>
    <li><a href="#gatt-profile-hierarchy">GATT Profile Hierarchy</a><span>, in §9</span>
    <li><a href="#gatt-server">GATT Server</a><span>, in §9</span>
    <li><a href="#eventdef-bluetoothdevice-gattserverdisconnected">gattserverdisconnected</a><span>, in §5.6.2</span>
    <li><a href="#general-discovery-procedure">General Discovery Procedure</a><span>, in §9</span>
    <li><a href="#generic-attribute-profile">Generic Attribute Profile</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattservice-getcharacteristic">getCharacteristic(characteristic)</a><span>, in §5.3</span>
    <li><a href="#dom-bluetoothuuid-getcharacteristic">getCharacteristic(name)</a><span>, in §6.1</span>
    <li><a href="#dom-bluetoothremotegattservice-getcharacteristics">getCharacteristics(characteristic)</a><span>, in §5.3</span>
    <li><a href="#dom-bluetoothremotegattcharacteristic-getdescriptor">getDescriptor(descriptor)</a><span>, in §5.4</span>
    <li><a href="#dom-bluetoothuuid-getdescriptor">getDescriptor(name)</a><span>, in §6.1</span>
    <li><a href="#dom-bluetoothremotegattcharacteristic-getdescriptors">getDescriptors(descriptor)</a><span>, in §5.4</span>
    <li><a href="#getgattchildren">GetGATTChildren</a><span>, in §5.1.2</span>
    <li><a href="#dom-bluetoothremotegattservice-getincludedservice">getIncludedService(service)</a><span>, in §5.3</span>
    <li><a href="#dom-bluetoothremotegattservice-getincludedservices">getIncludedServices(service)</a><span>, in §5.3</span>
    <li><a href="#dom-bluetoothremotegattserver-getprimaryservices">getPrimaryServices()</a><span>, in §5.2</span>
    <li><a href="#dom-bluetoothremotegattserver-getprimaryservice">getPrimaryService(service)</a><span>, in §5.2</span>
    <li><a href="#dom-bluetoothremotegattserver-getprimaryservices">getPrimaryServices(service)</a><span>, in §5.2</span>
    <li><a href="#dom-bluetoothuuid-getservice">getService(name)</a><span>, in §6.1</span>
    <li><a href="#get-the-bluetoothdevice-representing">get the BluetoothDevice representing</a><span>, in §4.2</span>
    <li><a href="#dom-bluetoothdevice-id">id</a><span>, in §4.2</span>
    <li><a href="#identity-resolving-key">Identity Resolving Key</a><span>, in §9</span>
    <li><a href="#included-service">Included Service</a><span>, in §9</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-indicate">indicate</a><span>, in §5.4.1</span>
    <li><a href="#identity-resolving-key">IRK</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattservice-isprimary">isPrimary</a><span>, in §5.3</span>
    <li><a href="#local-name-data-type">Local Name Data Type</a><span>, in §9</span>
    <li><a href="#long-attribute-values">Long Attribute Values</a><span>, in §9</span>
    <li>
      manufacturerData
      <ul>
        <li><a href="#dom-bluetoothadvertisingeventinit-manufacturerdata">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-manufacturerdata">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#manufacturer-specific-data">Manufacturer Specific Data</a><span>, in §9</span>
    <li><a href="#matches-a-filter">match a filter</a><span>, in §3</span>
    <li><a href="#matches-a-filter">matches a filter</a><span>, in §3</span>
    <li><a href="#matches-a-filter">matches any filter</a><span>, in §3</span>
    <li>
      name
      <ul>
        <li><a href="#dom-bluetoothrequestdevicefilter-name">dict-member for BluetoothRequestDeviceFilter</a><span>, in §3</span>
        <li><a href="#dom-bluetoothdevice-name">attribute for BluetoothDevice</a><span>, in §4.2</span>
        <li><a href="#dom-bluetoothadvertisingeventinit-name">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-name">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#name-discovery-procedure">Name Discovery Procedure</a><span>, in §9</span>
    <li><a href="#dom-bluetoothrequestdevicefilter-nameprefix">namePrefix</a><span>, in §3</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-notify">notify</a><span>, in §5.4.1</span>
    <li><a href="#observation-procedure">Observation Procedure</a><span>, in §9</span>
    <li><a href="#observer">Observer</a><span>, in §9</span>
    <li><a href="#dom-characteristiceventhandlers-oncharacteristicvaluechanged">oncharacteristicvaluechanged</a><span>, in §5.6.6</span>
    <li><a href="#dom-bluetoothdeviceeventhandlers-ongattserverdisconnected">ongattserverdisconnected</a><span>, in §5.6.6</span>
    <li><a href="#dom-serviceeventhandlers-onserviceadded">onserviceadded</a><span>, in §5.6.6</span>
    <li><a href="#dom-serviceeventhandlers-onservicechanged">onservicechanged</a><span>, in §5.6.6</span>
    <li><a href="#dom-serviceeventhandlers-onserviceremoved">onserviceremoved</a><span>, in §5.6.6</span>
    <li>
      optionalServices
      <ul>
        <li><a href="#dom-requestdeviceoptions-optionalservices">dict-member for RequestDeviceOptions</a><span>, in §3</span>
        <li><a href="#dom-bluetoothpermissiondescriptor-optionalservices">dict-member for BluetoothPermissionDescriptor</a><span>, in §3.1</span>
      </ul>
    <li><a href="#parsing-the-blacklist">parsing the blacklist</a><span>, in §7</span>
    <li><a href="#passive-scanning">Passive Scanning</a><span>, in §9</span>
    <li><a href="#peripheral">Peripheral</a><span>, in §9</span>
    <li><a href="#populate-the-bluetooth-cache">populate the Bluetooth cache</a><span>, in §5.1.1</span>
    <li><a href="#primary-service-discovery">Primary Service Discovery</a><span>, in §9</span>
    <li><a href="#privacy-feature">Privacy Feature</a><span>, in §9</span>
    <li><a href="#private-address">Private address</a><span>, in §9</span>
    <li><a href="#procedure-timeouts">Procedure Timeouts</a><span>, in §9</span>
    <li><a href="#procedure-timeouts">procedure times out</a><span>, in §9</span>
    <li><a href="#profile-fundamentals">Profile Fundamentals</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattcharacteristic-properties">properties</a><span>, in §5.4</span>
    <li><a href="#public-bluetooth-address">Public Bluetooth Address</a><span>, in §9</span>
    <li><a href="#public-device-address">Public Device Address</a><span>, in §9</span>
    <li><a href="#query-the-bluetooth-cache">query the Bluetooth cache</a><span>, in §5.1.1</span>
    <li><a href="#query-the-bluetooth-permission">query the "bluetooth" permission</a><span>, in §3.1</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-read">read</a><span>, in §5.4.1</span>
    <li><a href="#read-bd_addr-command">Read BD_ADDR Command</a><span>, in §9</span>
    <li><a href="#read-characteristic-descriptors">Read Characteristic Descriptors</a><span>, in §9</span>
    <li><a href="#read-long-characteristic-descriptors">Read Long Characteristic Descriptors</a><span>, in §9</span>
    <li><a href="#read-only-arraybuffer">read only ArrayBuffer</a><span>, in §9</span>
    <li>
      readValue()
      <ul>
        <li><a href="#dom-bluetoothremotegattcharacteristic-readvalue">method for BluetoothRemoteGATTCharacteristic</a><span>, in §5.4</span>
        <li><a href="#dom-bluetoothremotegattdescriptor-readvalue">method for BluetoothRemoteGATTDescriptor</a><span>, in §5.5</span>
      </ul>
    <li><a href="#rssi">Received Signal Strength</a><span>, in §9</span>
    <li><a href="#dom-bluetooth-referringdevice">referringDevice</a><span>, in §3</span>
    <li><a href="#dom-bluetooth-referringdevice-slot">[[referringDevice]]</a><span>, in §3</span>
    <li><a href="#relationship-discovery">Relationship Discovery</a><span>, in §9</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-reliablewrite">reliableWrite</a><span>, in §5.4.1</span>
    <li><a href="#dom-bluetoothdevice-representeddevice-slot">[[representedDevice]]</a><span>, in §4.2</span>
    <li><a href="#request-bluetooth-devices">request Bluetooth devices</a><span>, in §3</span>
    <li><a href="#dom-bluetooth-requestdevice">requestDevice(options)</a><span>, in §3</span>
    <li><a href="#dictdef-requestdeviceoptions">RequestDeviceOptions</a><span>, in §3</span>
    <li><a href="#resolvable-private-address-resolution-procedure">Resolvable Private Address Resolution Procedure</a><span>, in §9</span>
    <li><a href="#resolveuuidname">ResolveUUIDName</a><span>, in §6.1</span>
    <li><a href="#revoke-bluetooth-access">revoke Bluetooth access</a><span>, in §3.1</span>
    <li><a href="#rssi">RSSI</a><span>, in §9</span>
    <li>
      rssi
      <ul>
        <li><a href="#dom-bluetoothadvertisingeventinit-rssi">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-rssi">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#same-attribute">same attribute</a><span>, in §5.1.3</span>
    <li><a href="#same-bluetooth-device">same Bluetooth device</a><span>, in §4.1</span>
    <li><a href="#same-bluetooth-device">same device</a><span>, in §4.1</span>
    <li><a href="#scan-for-devices">scan for devices</a><span>, in §3</span>
    <li><a href="#searching-for-services">Searching for Services</a><span>, in §9</span>
    <li><a href="#service">Service</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattcharacteristic-service">service</a><span>, in §5.4</span>
    <li><a href="#eventdef-bluetoothremotegattservice-serviceadded">serviceadded</a><span>, in §5.6.2</span>
    <li><a href="#service-changed">Service Changed</a><span>, in §9</span>
    <li><a href="#eventdef-bluetoothremotegattservice-servicechanged">servicechanged</a><span>, in §5.6.2</span>
    <li>
      serviceData
      <ul>
        <li><a href="#dom-bluetoothadvertisingeventinit-servicedata">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-servicedata">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#service-data">Service Data</a><span>, in §9</span>
    <li><a href="#serviceeventhandlers">ServiceEventHandlers</a><span>, in §5.6.6</span>
    <li><a href="#eventdef-bluetoothremotegattservice-serviceremoved">serviceremoved</a><span>, in §5.6.2</span>
    <li><a href="#dom-bluetoothrequestdevicefilter-services">services</a><span>, in §3</span>
    <li><a href="#service-uuid-data-type">Service UUID Data Type</a><span>, in §9</span>
    <li><a href="#service-uuid-data-type">Service UUIDs</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattcharacteristic-startnotifications">startNotifications()</a><span>, in §5.4</span>
    <li><a href="#static-address">Static Address</a><span>, in §9</span>
    <li><a href="#static-device-address">Static Device Address</a><span>, in §9</span>
    <li><a href="#dom-bluetoothremotegattcharacteristic-stopnotifications">stopNotifications()</a><span>, in §5.4</span>
    <li><a href="#supported-physical-transports">supported physical transports</a><span>, in §4.1</span>
    <li><a href="#the-128-bit-uuid-represented">the 128-bit UUID represented</a><span>, in §9</span>
    <li>
      txPower
      <ul>
        <li><a href="#dom-bluetoothadvertisingeventinit-txpower">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-txpower">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#tx-power-level">TX Power Level</a><span>, in §9</span>
    <li><a href="#dom-bluetoothdevice-unfiltereduuids-slot">[[unfilteredUuids]]</a><span>, in §4.2</span>
    <li><a href="#dom-bluetoothdevice-unwatchadvertisements">unwatchAdvertisements()</a><span>, in §4.2</span>
    <li>
      uuid
      <ul>
        <li><a href="#dom-bluetoothremotegattservice-uuid">attribute for BluetoothRemoteGATTService</a><span>, in §5.3</span>
        <li><a href="#dom-bluetoothremotegattcharacteristic-uuid">attribute for BluetoothRemoteGATTCharacteristic</a><span>, in §5.4</span>
        <li><a href="#dom-bluetoothremotegattdescriptor-uuid">attribute for BluetoothRemoteGATTDescriptor</a><span>, in §5.5</span>
      </ul>
    <li>
      UUID
      <ul>
        <li><a href="#typedefdef-uuid">(typedef)</a><span>, in §6</span>
        <li><a href="#uuid">definition of</a><span>, in §9</span>
      </ul>
    <li><a href="#uuid-alias">UUID alias</a><span>, in §9</span>
    <li>
      uuids
      <ul>
        <li><a href="#dom-bluetoothdevice-uuids">attribute for BluetoothDevice</a><span>, in §4.2</span>
        <li><a href="#dom-bluetoothadvertisingeventinit-uuids">dict-member for BluetoothAdvertisingEventInit</a><span>, in §4.2.1</span>
        <li><a href="#dom-bluetoothadvertisingevent-uuids">attribute for BluetoothAdvertisingEvent</a><span>, in §4.2.1</span>
      </ul>
    <li><a href="#valid-uuid">valid UUID</a><span>, in §6</span>
    <li>
      value
      <ul>
        <li><a href="#dom-bluetoothremotegattcharacteristic-value">attribute for BluetoothRemoteGATTCharacteristic</a><span>, in §5.4</span>
        <li><a href="#dom-bluetoothremotegattdescriptor-value">attribute for BluetoothRemoteGATTDescriptor</a><span>, in §5.5</span>
      </ul>
    <li><a href="#dom-bluetoothdevice-watchadvertisements">watchAdvertisements()</a><span>, in §4.2</span>
    <li><a href="#dom-bluetoothdevice-watchingadvertisements">watchingAdvertisements</a><span>, in §4.2</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-writableauxiliaries">writableAuxiliaries</a><span>, in §5.4.1</span>
    <li><a href="#dom-bluetoothcharacteristicproperties-write">write</a><span>, in §5.4.1</span>
    <li><a href="#write-characteristic-descriptors">Write Characteristic Descriptors</a><span>, in §9</span>
    <li><a href="#write-long-characteristic-descriptors">Write Long Characteristic Descriptors</a><span>, in §9</span>
    <li>
      writeValue(value)
      <ul>
        <li><a href="#dom-bluetoothremotegattcharacteristic-writevalue">method for BluetoothRemoteGATTCharacteristic</a><span>, in §5.4</span>
        <li><a href="#dom-bluetoothremotegattdescriptor-writevalue">method for BluetoothRemoteGATTDescriptor</a><span>, in §5.5</span>
      </ul>
    <li><a href="#dom-bluetoothcharacteristicproperties-writewithoutresponse">writeWithoutResponse</a><span>, in §5.4.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
    <li>
      <a data-link-type="biblio">[BLUETOOTH-ASSIGNED]</a> defines the following terms:
      <ul>
        <li><a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.body_sensor_location.xml#">org.bluetooth.characteristic.body_sensor_location</a>
        <li><a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.gap.appearance.xml#">org.bluetooth.characteristic.gap.appearance</a>
        <li><a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_control_point.xml#">org.bluetooth.characteristic.heart_rate_control_point</a>
        <li><a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml#">org.bluetooth.characteristic.heart_rate_measurement</a>
        <li><a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.ieee_11073-20601_regulatory_certification_data_list.xml#">org.bluetooth.characteristic.ieee_11073-20601_regulatory_certification_data_list</a>
        <li><a href="https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorViewer.aspx?u=org.bluetooth.descriptor.gatt.characteristic_presentation_format.xml#">org.bluetooth.descriptor.gatt.characteristic_presentation_format</a>
        <li><a href="https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorViewer.aspx?u=org.bluetooth.descriptor.gatt.client_characteristic_configuration.xml#">org.bluetooth.descriptor.gatt.client_characteristic_configuration</a>
        <li><a href="https://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.cycling_power.xml#">org.bluetooth.service.cycling_power</a>
        <li><a href="https://developer.bluetooth.org/gatt/services/Pages/ServiceViewer.aspx?u=org.bluetooth.service.heart_rate.xml#">org.bluetooth.service.heart_rate</a>
        <li><a href="https://www.bluetooth.org/en-us/specification/assigned-numbers/generic-access-profile#">shortened local name</a>
      </ul>
    <li>
      <a data-link-type="biblio">[ECMAScript]</a> defines the following terms:
      <ul>
        <li><a href="https://tc39.github.io/ecma262/#sec-array-objects">Array</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-array.prototype.map">Array.prototype.map</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-arraybuffer-constructor">ArrayBuffer</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-dataview-constructor">DataView</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-promise-objects">Promise</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-set-objects">Set</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-typedarray-constructors">TypedArray</a>
        <li><a href="https://tc39.github.io/ecma262/#current-realm">current realm</a>
        <li><a href="https://tc39.github.io/ecma262/#sec-code-realms">realm</a>
      </ul>
    <li>
      <a data-link-type="biblio">[WebIDL-1]</a> defines the following terms:
      <ul>
        <li><a href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">a copy of the bytes held</a>
        <li><a href="https://heycam.github.io/webidl/#es-platform-objects">global object associated with</a>
      </ul>
    <li>
      <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
      <ul>
        <li><a href="https://dom.spec.whatwg.org/#event">Event</a>
        <li><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a>
        <li><a href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
        <li><a href="https://dom.spec.whatwg.org/#dom-event-bubbles">bubbles</a>
        <li><a href="https://dom.spec.whatwg.org/#concept-tree-child">children</a>
        <li><a href="https://dom.spec.whatwg.org/#context-object">context object</a>
        <li><a href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a>
        <li><a href="https://dom.spec.whatwg.org/#dom-event-istrusted">isTrusted</a>
        <li><a href="https://dom.spec.whatwg.org/#concept-tree-participate">participate in a tree</a>
      </ul>
    <li>
      <a data-link-type="biblio">[WHATWG-ENCODING]</a> defines the following terms:
      <ul>
        <li><a href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom">utf-8 decode without bom</a>
        <li><a href="https://encoding.spec.whatwg.org/#utf-8-encode">utf-8 encode</a>
      </ul>
    <li>
      <a data-link-type="biblio">[HTML]</a> defines the following terms:
      <ul>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a>
        <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">event handler idl attribute</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a>
        <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>
        <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#initialise-the-document-object">initialising a new document object</a>
        <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#navigate">navigate</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint">perform a microtask checkpoint</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a>
        <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">responsible event loop</a>
        <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#triggered-by-user-activation">triggered by user activation</a>
      </ul>
    <li>
      <a data-link-type="biblio">[permissions]</a> defines the following terms:
      <ul>
        <li><a href="https://w3c.github.io/permissions/#dom-permissionstate-denied">"denied"</a>
        <li><a href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor">PermissionDescriptor</a>
        <li><a href="https://w3c.github.io/permissions/#permissionstatus">PermissionStatus</a>
        <li><a href="https://w3c.github.io/permissions/#allowed-in-non-secure-contexts">allowed in non-secure contexts</a>
        <li><a href="https://w3c.github.io/permissions/#extra-permission-data">extra permission data</a>
        <li><a href="https://w3c.github.io/permissions/#extra-permission-data-type">extra permission data type</a>
        <li><a href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name">name</a>
        <li><a href="https://w3c.github.io/permissions/#permission-descriptor-type">permission descriptor type</a>
        <li><a href="https://w3c.github.io/permissions/#permission-query-algorithm">permission query algorithm</a>
        <li><a href="https://w3c.github.io/permissions/#permission-request-algorithm">permission request algorithm</a>
        <li><a href="https://w3c.github.io/permissions/#permission-result-type">permission result type</a>
        <li><a href="https://w3c.github.io/permissions/#permission-revocation-algorithm">permission revocation algorithm</a>
        <li><a href="https://w3c.github.io/permissions/#permission-state">permission state</a>
        <li><a href="https://w3c.github.io/permissions/#powerful-feature">powerful feature</a>
        <li><a href="https://w3c.github.io/permissions/#prompt-the-user-to-choose">prompt the user to choose</a>
        <li><a href="https://w3c.github.io/permissions/#dom-permissions-query">query()</a>
        <li><a href="https://w3c.github.io/permissions/#dom-permissions-request">request()</a>
        <li><a href="https://w3c.github.io/permissions/#dom-permissionstatus-state">state</a>
      </ul>
    <li>
      <a data-link-type="biblio">[promises-guide]</a> defines the following terms:
      <ul>
        <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#a-new-promise">a new promise</a>
        <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#a-promise-rejected-with">a promise rejected with</a>
        <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#reject-promise">reject</a>
        <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#resolve-promise">resolve</a>
        <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#transforming-by">transforming</a>
        <li><a href="https://www.w3.org/2001/tag/doc/promises-guide/#waiting-for-all">waiting for all</a>
      </ul>
    <li>
      <a data-link-type="biblio">[secure-contexts]</a> defines the following terms:
      <ul>
        <li><a href="https://w3c.github.io/webappsec-secure-contexts/#non-secure-context">non-secure context</a>
        <li><a href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>
      </ul>
    <li>
      <a data-link-type="biblio">[WebIDL-1]</a> defines the following terms:
      <ul>
        <li><a href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a>
        <li><a href="https://heycam.github.io/webidl/#dfn-DOMException">DOMException</a>
        <li><a href="https://heycam.github.io/webidl/#dom-FrozenArray">FrozenArray</a>
        <li><a href="https://heycam.github.io/webidl/#invalidmodificationerror">InvalidModificationError</a>
        <li><a href="https://heycam.github.io/webidl/#invalidstateerror">InvalidStateError</a>
        <li><a href="https://heycam.github.io/webidl/#networkerror">NetworkError</a>
        <li><a href="https://heycam.github.io/webidl/#notfounderror">NotFoundError</a>
        <li><a href="https://heycam.github.io/webidl/#notsupportederror">NotSupportedError</a>
        <li><a href="https://heycam.github.io/webidl/#securityerror">SecurityError</a>
        <li><a href="https://heycam.github.io/webidl/#syntaxerror">SyntaxError</a>
        <li><a href="https://heycam.github.io/webidl/#unknownerror">UnknownError</a>
        <li><a href="https://heycam.github.io/webidl/#dfn-map-entries">map entries</a>
        <li><a href="https://heycam.github.io/webidl/#dom-unsignedshort">unsigned short</a>
      </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
    <dt id="biblio-bluetooth-assigned">[BLUETOOTH-ASSIGNED]
    <dd><a href="https://www.bluetooth.org/en-us/specification/assigned-numbers">Assigned Numbers</a>. Living Standard. URL: <a href="https://www.bluetooth.org/en-us/specification/assigned-numbers">https://www.bluetooth.org/en-us/specification/assigned-numbers</a>
    <dt id="biblio-bluetooth-assigned-characteristics">[BLUETOOTH-ASSIGNED-CHARACTERISTICS]
    <dd><a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicsHome.aspx">Bluetooth GATT Specifications > Characteristics</a>. Living Standard. URL: <a href="https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicsHome.aspx">https://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicsHome.aspx</a>
    <dt id="biblio-bluetooth-assigned-descriptors">[BLUETOOTH-ASSIGNED-DESCRIPTORS]
    <dd><a href="https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorsHomePage.aspx">Bluetooth GATT Specifications > Descriptors</a>. Living Standard. URL: <a href="https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorsHomePage.aspx">https://developer.bluetooth.org/gatt/descriptors/Pages/DescriptorsHomePage.aspx</a>
    <dt id="biblio-bluetooth-assigned-services">[BLUETOOTH-ASSIGNED-SERVICES]
    <dd><a href="https://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx">Bluetooth GATT Specifications > Services</a>. Living Standard. URL: <a href="https://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx">https://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx</a>
    <dt id="biblio-bluetooth-supplement6">[BLUETOOTH-SUPPLEMENT6]
    <dd><a href="https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=302735">Supplement to the Bluetooth Core Specification Version 6</a>. 14 July 2015. URL: <a href="https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=302735">https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=302735</a>
    <dt id="biblio-bluetooth42">[BLUETOOTH42]
    <dd><a href="https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=286439">BLUETOOTH SPECIFICATION Version 4.2</a>. 2 December 2014. URL: <a href="https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=286439">https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=286439</a>
    <dt id="biblio-ecmascript">[ECMAScript]
    <dd><a href="https://tc39.github.io/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
    <dt id="biblio-html">[HTML]
    <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    <dt id="biblio-permissions">[PERMISSIONS]
    <dd>Mounir Lamouri; Marcos Caceres. <a href="https://w3c.github.io/permissions/">The Permissions API</a>. 7 April 2015. WD. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
    <dt id="biblio-promises-guide">[PROMISES-GUIDE]
    <dd>Domenic Denicola. <a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing Promise-Using Specifications</a>. 16 February 2016. Finding of the W3C TAG. URL: <a href="https://www.w3.org/2001/tag/doc/promises-guide">https://www.w3.org/2001/tag/doc/promises-guide</a>
    <dt id="biblio-rfc2119">[RFC2119]
    <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
    <dt id="biblio-rfc4122">[RFC4122]
    <dd>P. Leach; M. Mealling; R. Salz. <a href="https://tools.ietf.org/html/rfc4122">A Universally Unique IDentifier (UUID) URN Namespace</a>. July 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4122">https://tools.ietf.org/html/rfc4122</a>
    <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]
    <dd>Mike West. <a href="https://w3c.github.io/webappsec-secure-contexts/">Secure Contexts</a>. 19 July 2016. WD. URL: <a href="https://w3c.github.io/webappsec-secure-contexts/">https://w3c.github.io/webappsec-secure-contexts/</a>
    <dt id="biblio-webidl-1">[WebIDL-1]
    <dd>Cameron McCormack; Boris Zbarsky. <a href="https://heycam.github.io/webidl/">WebIDL Level 1</a>. 8 March 2016. CR. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    <dt id="biblio-whatwg-dom">[WHATWG-DOM]
    <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
    <dt id="biblio-whatwg-encoding">[WHATWG-ENCODING]
    <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/">Encoding Standard</a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
    <dt id="biblio-csp3">[CSP3]
    <dd>Mike West. <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy Level 3</a>. 21 June 2016. WD. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def"><span class="kt">dictionary</span> <a class="nv" href="#dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</a> {
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<BluetoothServiceUUID> " href="#dom-bluetoothrequestdevicefilter-services">services</a>;
  <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="dict-member" data-type="DOMString " href="#dom-bluetoothrequestdevicefilter-name">name</a>;
  <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="dict-member" data-type="DOMString " href="#dom-bluetoothrequestdevicefilter-nameprefix">namePrefix</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-requestdeviceoptions">RequestDeviceOptions</a> {
  <span class="kt">required</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</a>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<BluetoothRequestDeviceFilter> " href="#dom-requestdeviceoptions-filters">filters</a>;
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>> <a class="nv idl-code" data-default="None" data-link-type="dict-member" data-type="sequence<BluetoothServiceUUID> " href="#dom-requestdeviceoptions-optionalservices">optionalServices</a> = [];
};

<span class="kt">interface</span> <a class="nv" href="#bluetooth">Bluetooth</a> {
  [<a class="nv idl-code" data-link-type="extended-attribute">SecureContext</a>]
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice?" href="#dom-bluetooth-referringdevice">referringDevice</a>;
  [<a class="nv idl-code" data-link-type="extended-attribute">SecureContext</a>]
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetooth-requestdevice">requestDevice</a>(<a class="n" data-link-type="idl-name" href="#dictdef-requestdeviceoptions">RequestDeviceOptions</a> <a class="nv" href="#dom-bluetooth-requestdevice-options-options">options</a>);
};
<a class="n" data-link-type="idl-name" href="#bluetooth">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetooth">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#bluetoothdeviceeventhandlers">BluetoothDeviceEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetooth">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers">CharacteristicEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetooth">Bluetooth</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#serviceeventhandlers">ServiceEventHandlers</a>;

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-bluetoothpermissiondescriptor">BluetoothPermissionDescriptor</a> : <a class="n" data-link-type="idl-name" href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor">PermissionDescriptor</a> {
  <span class="kt">DOMString</span> <a class="nv" data-type="DOMString " href="#dom-bluetoothpermissiondescriptor-deviceid">deviceId</a>;
  // These match RequestDeviceOptions.
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#dictdef-bluetoothrequestdevicefilter">BluetoothRequestDeviceFilter</a>> <a class="nv" data-type="sequence<BluetoothRequestDeviceFilter> " href="#dom-bluetoothpermissiondescriptor-filters">filters</a>;
  <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>> <a class="nv" data-default="None" data-type="sequence<BluetoothServiceUUID> " href="#dom-bluetoothpermissiondescriptor-optionalservices">optionalServices</a> = [];
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-allowedbluetoothdevice">AllowedBluetoothDevice</a> {
  <span class="kt">required</span> <span class="kt">DOMString</span> <a class="nv" data-type="DOMString " href="#dom-allowedbluetoothdevice-deviceid">deviceId</a>;
  // An allowedServices of "all" means all services are allowed.
  <span class="kt">required</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a>>) <a class="nv" data-type="(DOMString or sequence<UUID>) " href="#dom-allowedbluetoothdevice-allowedservices">allowedServices</a>;
};
<span class="kt">dictionary</span> <a class="nv" href="#dictdef-bluetoothpermissiondata">BluetoothPermissionData</a> {
  <span class="kt">required</span> <span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#dictdef-allowedbluetoothdevice">AllowedBluetoothDevice</a>> <a class="nv" data-default="None" data-type="sequence<AllowedBluetoothDevice> " href="#dom-bluetoothpermissiondata-alloweddevices">allowedDevices</a> = [];
};

<span class="kt">interface</span> <a class="nv" href="#bluetoothpermissionresult">BluetoothPermissionResult</a> : <a class="n" data-link-type="idl-name" href="https://w3c.github.io/permissions/#permissionstatus">PermissionStatus</a> {
  <span class="kt">attribute</span> <span class="kt">FrozenArray</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a>> <a class="nv" data-type="FrozenArray<BluetoothDevice>" href="#dom-bluetoothpermissionresult-devices">devices</a>;
};

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothdevice">BluetoothDevice</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-bluetoothdevice-id">id</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString?" href="#dom-bluetoothdevice-name">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothremotegattserver">BluetoothRemoteGATTServer</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothRemoteGATTServer" href="#dom-bluetoothdevice-gatt">gatt</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">FrozenArray</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a>> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="FrozenArray<UUID>" href="#dom-bluetoothdevice-uuids">uuids</a>;

  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothdevice-watchadvertisements">watchAdvertisements</a>();
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothdevice-unwatchadvertisements">unwatchAdvertisements</a>();
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-bluetoothdevice-watchingadvertisements">watchingAdvertisements</a>;
};
<a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#bluetoothdeviceeventhandlers">BluetoothDeviceEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers">CharacteristicEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#serviceeventhandlers">ServiceEventHandlers</a>;

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothmanufacturerdatamap">BluetoothManufacturerDataMap</a> {
  <span class="kt">readonly</span> <span class="kt">maplike</span>&lt;<span class="kt">unsigned</span> <span class="kt">short</span>, <span class="kt">DataView</span>>;
};
<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothservicedatamap">BluetoothServiceDataMap</a> {
  <span class="kt">readonly</span> <span class="kt">maplike</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a>, <span class="kt">DataView</span>>;
};
[<a class="nv idl-code" data-link-type="constructor" href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent">Constructor</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent-type-init-type">type</a>, <a class="n" data-link-type="idl-name" href="#dictdef-bluetoothadvertisingeventinit">BluetoothAdvertisingEventInit</a> <a class="nv" href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent-type-init-init">init</a>)]
<span class="kt">interface</span> <a class="nv" href="#bluetoothadvertisingevent">BluetoothAdvertisingEvent</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice" href="#dom-bluetoothadvertisingevent-device">device</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">FrozenArray</span>&lt;<a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a>> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="FrozenArray<UUID>" href="#dom-bluetoothadvertisingevent-uuids">uuids</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString?" href="#dom-bluetoothadvertisingevent-name">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">unsigned</span> <span class="kt">short</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="unsigned short?" href="#dom-bluetoothadvertisingevent-appearance">appearance</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">byte</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="byte?" href="#dom-bluetoothadvertisingevent-txpower">txPower</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">byte</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="byte?" href="#dom-bluetoothadvertisingevent-rssi">rssi</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothmanufacturerdatamap">BluetoothManufacturerDataMap</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothManufacturerDataMap" href="#dom-bluetoothadvertisingevent-manufacturerdata">manufacturerData</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothservicedatamap">BluetoothServiceDataMap</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothServiceDataMap" href="#dom-bluetoothadvertisingevent-servicedata">serviceData</a>;
};
<span class="kt">dictionary</span> <a class="nv" href="#dictdef-bluetoothadvertisingeventinit">BluetoothAdvertisingEventInit</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <span class="kt">required</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <a class="nv" data-type="BluetoothDevice " href="#dom-bluetoothadvertisingeventinit-device">device</a>;
  <span class="kt">sequence</span>&lt;(<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>)> <a class="nv" data-type="sequence<(DOMString or unsigned long)> " href="#dom-bluetoothadvertisingeventinit-uuids">uuids</a>;
  <span class="kt">DOMString</span> <a class="nv" data-type="DOMString " href="#dom-bluetoothadvertisingeventinit-name">name</a>;
  <span class="kt">unsigned</span> <span class="kt">short</span> <a class="nv" data-type="unsigned short " href="#dom-bluetoothadvertisingeventinit-appearance">appearance</a>;
  <span class="kt">byte</span> <a class="nv" data-type="byte " href="#dom-bluetoothadvertisingeventinit-txpower">txPower</a>;
  <span class="kt">byte</span> <a class="nv" data-type="byte " href="#dom-bluetoothadvertisingeventinit-rssi">rssi</a>;
  <a class="n" data-link-type="idl-name" href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a> <a class="nv" data-type="Map " href="#dom-bluetoothadvertisingeventinit-manufacturerdata">manufacturerData</a>;
  <a class="n" data-link-type="idl-name" href="https://tc39.github.io/ecma262/#sec-map-constructor">Map</a> <a class="nv" data-type="Map " href="#dom-bluetoothadvertisingeventinit-servicedata">serviceData</a>;
};

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattserver">BluetoothRemoteGATTServer</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice" href="#dom-bluetoothremotegattserver-device">device</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-bluetoothremotegattserver-connected">connected</a>;
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattserver">BluetoothRemoteGATTServer</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-connect">connect</a>();
  <span class="kt">void</span> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-disconnect">disconnect</a>();
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-getprimaryservice">getPrimaryService</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a> <a class="nv" href="#dom-bluetoothremotegattserver-getprimaryservice-service-service">service</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattserver-getprimaryservices">getPrimaryServices</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a> <a class="nv" href="#dom-bluetoothremotegattserver-getprimaryservices-service-service">service</a>);
};

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothdevice">BluetoothDevice</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothDevice" href="#dom-bluetoothremotegattservice-device">device</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="UUID" href="#dom-bluetoothremotegattservice-uuid">uuid</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="boolean" href="#dom-bluetoothremotegattservice-isprimary">isPrimary</a>;
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getcharacteristic">getCharacteristic</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothcharacteristicuuid">BluetoothCharacteristicUUID</a> <a class="nv" href="#dom-bluetoothremotegattservice-getcharacteristic-characteristic-characteristic">characteristic</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getcharacteristics">getCharacteristics</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothcharacteristicuuid">BluetoothCharacteristicUUID</a> <a class="nv" href="#dom-bluetoothremotegattservice-getcharacteristics-characteristic-characteristic">characteristic</a>);
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getincludedservice">getIncludedService</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a> <a class="nv" href="#dom-bluetoothremotegattservice-getincludedservice-service-service">service</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattservice-getincludedservices">getIncludedServices</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a> <a class="nv" href="#dom-bluetoothremotegattservice-getincludedservices-service-service">service</a>);
};
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers">CharacteristicEventHandlers</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#serviceeventhandlers">ServiceEventHandlers</a>;

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothremotegattservice">BluetoothRemoteGATTService</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothRemoteGATTService" href="#dom-bluetoothremotegattcharacteristic-service">service</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="UUID" href="#dom-bluetoothremotegattcharacteristic-uuid">uuid</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothcharacteristicproperties">BluetoothCharacteristicProperties</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothCharacteristicProperties" href="#dom-bluetoothremotegattcharacteristic-properties">properties</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DataView</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DataView?" href="#dom-bluetoothremotegattcharacteristic-value">value</a>;
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattdescriptor">BluetoothRemoteGATTDescriptor</a>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-getdescriptor">getDescriptor</a>(<a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothdescriptoruuid">BluetoothDescriptorUUID</a> <a class="nv" href="#dom-bluetoothremotegattcharacteristic-getdescriptor-descriptor-descriptor">descriptor</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">sequence</span>&lt;<a class="n" data-link-type="idl-name" href="#bluetoothremotegattdescriptor">BluetoothRemoteGATTDescriptor</a>>>
    <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-getdescriptors">getDescriptors</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#typedefdef-bluetoothdescriptoruuid">BluetoothDescriptorUUID</a> <a class="nv" href="#dom-bluetoothremotegattcharacteristic-getdescriptors-descriptor-descriptor">descriptor</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">DataView</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-readvalue">readValue</a>();
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-writevalue">writeValue</a>(<a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a> <a class="nv" href="#dom-bluetoothremotegattcharacteristic-writevalue-value-value">value</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-startnotifications">startNotifications</a>();
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattcharacteristic-stopnotifications">stopNotifications</a>();
};
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>;
<a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="#characteristiceventhandlers">CharacteristicEventHandlers</a>;

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothcharacteristicproperties">BluetoothCharacteristicProperties</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-broadcast">broadcast</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-read">read</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-writewithoutresponse">writeWithoutResponse</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-write">write</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-notify">notify</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-indicate">indicate</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-authenticatedsignedwrites">authenticatedSignedWrites</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-reliablewrite">reliableWrite</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">boolean</span> <a class="nv" data-readonly="" data-type="boolean" href="#dom-bluetoothcharacteristicproperties-writableauxiliaries">writableAuxiliaries</a>;
};

<span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="#bluetoothremotegattdescriptor">BluetoothRemoteGATTDescriptor</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetoothremotegattcharacteristic">BluetoothRemoteGATTCharacteristic</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="BluetoothRemoteGATTCharacteristic" href="#dom-bluetoothremotegattdescriptor-characteristic">characteristic</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="UUID" href="#dom-bluetoothremotegattdescriptor-uuid">uuid</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DataView</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DataView?" href="#dom-bluetoothremotegattdescriptor-value">value</a>;
  <span class="kt">Promise</span>&lt;<span class="kt">DataView</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattdescriptor-readvalue">readValue</a>();
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothremotegattdescriptor-writevalue">writeValue</a>(<a class="n" data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource">BufferSource</a> <a class="nv" href="#dom-bluetoothremotegattdescriptor-writevalue-value-value">value</a>);
};

[<a class="nv idl-code" data-link-type="extended-attribute">NoInterfaceObject</a>]
<span class="kt">interface</span> <a class="nv" href="#characteristiceventhandlers">CharacteristicEventHandlers</a> {
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-characteristiceventhandlers-oncharacteristicvaluechanged">oncharacteristicvaluechanged</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute">NoInterfaceObject</a>]
<span class="kt">interface</span> <a class="nv" href="#bluetoothdeviceeventhandlers">BluetoothDeviceEventHandlers</a> {
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-bluetoothdeviceeventhandlers-ongattserverdisconnected">ongattserverdisconnected</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute">NoInterfaceObject</a>]
<span class="kt">interface</span> <a class="nv" href="#serviceeventhandlers">ServiceEventHandlers</a> {
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-serviceeventhandlers-onserviceadded">onserviceadded</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-serviceeventhandlers-onservicechanged">onservicechanged</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-serviceeventhandlers-onserviceremoved">onserviceremoved</a>;
};

<span class="kt">typedef</span> <span class="kt">DOMString</span> <a class="nv" href="#typedefdef-uuid">UUID</a>;
<span class="kt">interface</span> <a class="nv" href="#bluetoothuuid">BluetoothUUID</a> {
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-getservice">getService</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv" href="#dom-bluetoothuuid-getservice-name-name">name</a>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-getcharacteristic">getCharacteristic</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv" href="#dom-bluetoothuuid-getcharacteristic-name-name">name</a>);
  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-getdescriptor">getDescriptor</a>((<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv" href="#dom-bluetoothuuid-getdescriptor-name-name">name</a>);

  <span class="kt">static</span> <a class="n" data-link-type="idl-name" href="#typedefdef-uuid">UUID</a> <a class="nv idl-code" data-link-type="method" href="#dom-bluetoothuuid-canonicaluuid">canonicalUUID</a>([<a class="nv idl-code" data-link-type="extended-attribute">EnforceRange</a>] <span class="kt">unsigned</span> <span class="kt">long</span> <a class="nv" href="#dom-bluetoothuuid-canonicaluuid-alias-alias">alias</a>);
};

<span class="kt">typedef</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv idl-code" data-link-type="typedef" href="#typedefdef-bluetoothserviceuuid">BluetoothServiceUUID</a>;
<span class="kt">typedef</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv idl-code" data-link-type="typedef" href="#typedefdef-bluetoothcharacteristicuuid">BluetoothCharacteristicUUID</a>;
<span class="kt">typedef</span> (<span class="kt">DOMString</span> <span class="kt">or</span> <span class="kt">unsigned</span> <span class="kt">long</span>) <a class="nv idl-code" data-link-type="typedef" href="#typedefdef-bluetoothdescriptoruuid">BluetoothDescriptorUUID</a>;

<span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/webappapis.html#navigator">Navigator</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#bluetooth">Bluetooth</a> <a class="nv" data-readonly="" data-type="Bluetooth" href="#dom-navigator-bluetooth">bluetooth</a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue">TODO: Nail down the amount of time.<a href="#issue-2f91a41d"> ↵ </a></div>
   <div class="issue"> Both <a data-link-type="dfn" href="#passive-scanning">passive scanning</a> and
        the <a data-link-type="dfn" href="#privacy-feature">Privacy Feature</a> avoid leaking the unique, immutable device ID.
        We ought to require UAs to use either one,
        but none of the OS APIs appear to expose either.
        Bluetooth also makes it hard to use <a data-link-type="dfn" href="#passive-scanning">passive scanning</a> since
        it doesn’t require <a data-link-type="dfn" href="#central">Central</a> devices to support the <a data-link-type="dfn" href="#observation-procedure">Observation Procedure</a>. <a href="#issue-8dbebcdc"> ↵ </a></div>
   <div class="issue"> All forms of BR/EDR inquiry/discovery
        appear to leak the unique, immutable device address. <a href="#issue-86164f30"> ↵ </a></div>
   <div class="issue"> We need a way for a site to register to receive an event
    when an interesting device comes within range. <a href="#issue-e5c688d4"> ↵ </a></div>
   <div class="issue"> <a data-link-type="dfn" href="#characteristic-extended-properties">Characteristic Extended Properties</a> isn’t clear whether
                the extended properties are immutable for a given Characteristic.
                If they are, the UA should be allowed to cache them. <a href="#issue-f3b14ad2"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="dictdef-bluetoothrequestdevicefilter">
    <b><a href="#dictdef-bluetoothrequestdevicefilter">#dictdef-bluetoothrequestdevicefilter</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-bluetoothrequestdevicefilter-1">3. Device Discovery</a> <a href="#ref-for-dictdef-bluetoothrequestdevicefilter-2">(2)</a>
      <li><a href="#ref-for-dictdef-bluetoothrequestdevicefilter-3">3.1. Permission API Integration</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-requestdeviceoptions">
    <b><a href="#dictdef-requestdeviceoptions">#dictdef-requestdeviceoptions</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-requestdeviceoptions-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetooth">
    <b><a href="#bluetooth">#bluetooth</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetooth-1">2.1. Device access is powerful</a>
      <li><a href="#ref-for-bluetooth-2">3. Device Discovery</a> <a href="#ref-for-bluetooth-3">(2)</a> <a href="#ref-for-bluetooth-4">(3)</a> <a href="#ref-for-bluetooth-5">(4)</a> <a href="#ref-for-bluetooth-6">(5)</a> <a href="#ref-for-bluetooth-7">(6)</a>
      <li><a href="#ref-for-bluetooth-8">4.2. BluetoothDevice</a> <a href="#ref-for-bluetooth-9">(2)</a> <a href="#ref-for-bluetooth-10">(3)</a>
      <li><a href="#ref-for-bluetooth-11">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-bluetooth-12">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-bluetooth-13">8. Extensions to the Navigator Interface</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-requestdeviceoptions-filters">
    <b><a href="#dom-requestdeviceoptions-filters">#dom-requestdeviceoptions-filters</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-requestdeviceoptions-filters-1">3. Device Discovery</a> <a href="#ref-for-dom-requestdeviceoptions-filters-2">(2)</a>
      <li><a href="#ref-for-dom-requestdeviceoptions-filters-3">3.1. Permission API Integration</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothrequestdevicefilter-services">
    <b><a href="#dom-bluetoothrequestdevicefilter-services">#dom-bluetoothrequestdevicefilter-services</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothrequestdevicefilter-services-1">3. Device Discovery</a> <a href="#ref-for-dom-bluetoothrequestdevicefilter-services-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothrequestdevicefilter-name">
    <b><a href="#dom-bluetoothrequestdevicefilter-name">#dom-bluetoothrequestdevicefilter-name</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothrequestdevicefilter-name-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothrequestdevicefilter-nameprefix">
    <b><a href="#dom-bluetoothrequestdevicefilter-nameprefix">#dom-bluetoothrequestdevicefilter-nameprefix</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothrequestdevicefilter-nameprefix-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-requestdeviceoptions-optionalservices">
    <b><a href="#dom-requestdeviceoptions-optionalservices">#dom-requestdeviceoptions-optionalservices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-requestdeviceoptions-optionalservices-1">3. Device Discovery</a> <a href="#ref-for-dom-requestdeviceoptions-optionalservices-2">(2)</a> <a href="#ref-for-dom-requestdeviceoptions-optionalservices-3">(3)</a>
      <li><a href="#ref-for-dom-requestdeviceoptions-optionalservices-4">3.1. Permission API Integration</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetooth-deviceinstancemap-slot">
    <b><a href="#dom-bluetooth-deviceinstancemap-slot">#dom-bluetooth-deviceinstancemap-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetooth-deviceinstancemap-slot-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetooth-deviceinstancemap-slot-2">(2)</a> <a href="#ref-for-dom-bluetooth-deviceinstancemap-slot-3">(3)</a>
      <li><a href="#ref-for-dom-bluetooth-deviceinstancemap-slot-4">5.2. BluetoothRemoteGATTServer</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetooth-attributeinstancemap-slot">
    <b><a href="#dom-bluetooth-attributeinstancemap-slot">#dom-bluetooth-attributeinstancemap-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetooth-attributeinstancemap-slot-1">5.1.1. The Bluetooth cache</a> <a href="#ref-for-dom-bluetooth-attributeinstancemap-slot-2">(2)</a> <a href="#ref-for-dom-bluetooth-attributeinstancemap-slot-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetooth-referringdevice-slot">
    <b><a href="#dom-bluetooth-referringdevice-slot">#dom-bluetooth-referringdevice-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetooth-referringdevice-slot-1">3. Device Discovery</a> <a href="#ref-for-dom-bluetooth-referringdevice-slot-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetooth-referringdevice">
    <b><a href="#dom-bluetooth-referringdevice">#dom-bluetooth-referringdevice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetooth-referringdevice-1">3. Device Discovery</a> <a href="#ref-for-dom-bluetooth-referringdevice-2">(2)</a> <a href="#ref-for-dom-bluetooth-referringdevice-3">(3)</a>
      <li><a href="#ref-for-dom-bluetooth-referringdevice-4">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="matches-a-filter">
    <b><a href="#matches-a-filter">#matches-a-filter</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-matches-a-filter-1">3. Device Discovery</a> <a href="#ref-for-matches-a-filter-2">(2)</a> <a href="#ref-for-matches-a-filter-3">(3)</a>
      <li><a href="#ref-for-matches-a-filter-4">3.1. Permission API Integration</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetooth-requestdevice">
    <b><a href="#dom-bluetooth-requestdevice">#dom-bluetooth-requestdevice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetooth-requestdevice-1">1.1. Examples</a>
      <li><a href="#ref-for-dom-bluetooth-requestdevice-2">2.1. Device access is powerful</a>
      <li><a href="#ref-for-dom-bluetooth-requestdevice-3">3. Device Discovery</a> <a href="#ref-for-dom-bluetooth-requestdevice-4">(2)</a>
      <li><a href="#ref-for-dom-bluetooth-requestdevice-5">3.1. Permission API Integration</a>
      <li><a href="#ref-for-dom-bluetooth-requestdevice-6">9. Terminology and Conventions</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-bluetooth-devices">
    <b><a href="#request-bluetooth-devices">#request-bluetooth-devices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-request-bluetooth-devices-1">3. Device Discovery</a>
      <li><a href="#ref-for-request-bluetooth-devices-2">3.1. Permission API Integration</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="scan-for-devices">
    <b><a href="#scan-for-devices">#scan-for-devices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-scan-for-devices-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-permissionname-bluetooth">
    <b><a href="#dom-permissionname-bluetooth">#dom-permissionname-bluetooth</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-permissionname-bluetooth-1">3. Device Discovery</a> <a href="#ref-for-dom-permissionname-bluetooth-2">(2)</a>
      <li><a href="#ref-for-dom-permissionname-bluetooth-3">3.1. Permission API Integration</a> <a href="#ref-for-dom-permissionname-bluetooth-4">(2)</a> <a href="#ref-for-dom-permissionname-bluetooth-5">(3)</a>
      <li><a href="#ref-for-dom-permissionname-bluetooth-6">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-dom-permissionname-bluetooth-7">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-bluetoothpermissiondescriptor">
    <b><a href="#dictdef-bluetoothpermissiondescriptor">#dictdef-bluetoothpermissiondescriptor</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-bluetoothpermissiondescriptor-1">3.1. Permission API Integration</a> <a href="#ref-for-dictdef-bluetoothpermissiondescriptor-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothpermissiondescriptor-deviceid">
    <b><a href="#dom-bluetoothpermissiondescriptor-deviceid">#dom-bluetoothpermissiondescriptor-deviceid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothpermissiondescriptor-deviceid-1">3.1. Permission API Integration</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-allowedbluetoothdevice">
    <b><a href="#dictdef-allowedbluetoothdevice">#dictdef-allowedbluetoothdevice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-allowedbluetoothdevice-1">3.1. Permission API Integration</a> <a href="#ref-for-dictdef-allowedbluetoothdevice-2">(2)</a> <a href="#ref-for-dictdef-allowedbluetoothdevice-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-allowedbluetoothdevice-deviceid">
    <b><a href="#dom-allowedbluetoothdevice-deviceid">#dom-allowedbluetoothdevice-deviceid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-deviceid-1">3.1. Permission API Integration</a> <a href="#ref-for-dom-allowedbluetoothdevice-deviceid-2">(2)</a> <a href="#ref-for-dom-allowedbluetoothdevice-deviceid-3">(3)</a>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-deviceid-4">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-allowedbluetoothdevice-allowedservices">
    <b><a href="#dom-allowedbluetoothdevice-allowedservices">#dom-allowedbluetoothdevice-allowedservices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-allowedservices-1">3. Device Discovery</a>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-allowedservices-2">3.1. Permission API Integration</a>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-allowedservices-3">4.2. BluetoothDevice</a> <a href="#ref-for-dom-allowedbluetoothdevice-allowedservices-4">(2)</a>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-allowedservices-5">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-bluetoothpermissiondata">
    <b><a href="#dictdef-bluetoothpermissiondata">#dictdef-bluetoothpermissiondata</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-bluetoothpermissiondata-1">3.1. Permission API Integration</a> <a href="#ref-for-dictdef-bluetoothpermissiondata-2">(2)</a> <a href="#ref-for-dictdef-bluetoothpermissiondata-3">(3)</a>
      <li><a href="#ref-for-dictdef-bluetoothpermissiondata-4">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothpermissiondata-alloweddevices">
    <b><a href="#dom-bluetoothpermissiondata-alloweddevices">#dom-bluetoothpermissiondata-alloweddevices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothpermissiondata-alloweddevices-1">3. Device Discovery</a>
      <li><a href="#ref-for-dom-bluetoothpermissiondata-alloweddevices-2">3.1. Permission API Integration</a> <a href="#ref-for-dom-bluetoothpermissiondata-alloweddevices-3">(2)</a>
      <li><a href="#ref-for-dom-bluetoothpermissiondata-alloweddevices-4">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-dom-bluetoothpermissiondata-alloweddevices-5">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-allowedbluetoothdevice-device-slot">
    <b><a href="#dom-allowedbluetoothdevice-device-slot">#dom-allowedbluetoothdevice-device-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-device-slot-1">3.1. Permission API Integration</a> <a href="#ref-for-dom-allowedbluetoothdevice-device-slot-2">(2)</a> <a href="#ref-for-dom-allowedbluetoothdevice-device-slot-3">(3)</a> <a href="#ref-for-dom-allowedbluetoothdevice-device-slot-4">(4)</a>
      <li><a href="#ref-for-dom-allowedbluetoothdevice-device-slot-5">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothpermissionresult">
    <b><a href="#bluetoothpermissionresult">#bluetoothpermissionresult</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothpermissionresult-1">3.1. Permission API Integration</a> <a href="#ref-for-bluetoothpermissionresult-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothpermissionresult-devices">
    <b><a href="#dom-bluetoothpermissionresult-devices">#dom-bluetoothpermissionresult-devices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothpermissionresult-devices-1">3.1. Permission API Integration</a> <a href="#ref-for-dom-bluetoothpermissionresult-devices-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="revoke-bluetooth-access">
    <b><a href="#revoke-bluetooth-access">#revoke-bluetooth-access</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-revoke-bluetooth-access-1">2.1. Device access is powerful</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetooth-device">
    <b><a href="#bluetooth-device">#bluetooth-device</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetooth-device-1">3. Device Discovery</a> <a href="#ref-for-bluetooth-device-2">(2)</a> <a href="#ref-for-bluetooth-device-3">(3)</a> <a href="#ref-for-bluetooth-device-4">(4)</a> <a href="#ref-for-bluetooth-device-5">(5)</a> <a href="#ref-for-bluetooth-device-6">(6)</a> <a href="#ref-for-bluetooth-device-7">(7)</a> <a href="#ref-for-bluetooth-device-8">(8)</a> <a href="#ref-for-bluetooth-device-9">(9)</a>
      <li><a href="#ref-for-bluetooth-device-10">3.1. Permission API Integration</a>
      <li><a href="#ref-for-bluetooth-device-11">4.1. Global Bluetooth device properties</a>
      <li><a href="#ref-for-bluetooth-device-12">4.2. BluetoothDevice</a> <a href="#ref-for-bluetooth-device-13">(2)</a> <a href="#ref-for-bluetooth-device-14">(3)</a>
      <li><a href="#ref-for-bluetooth-device-15">4.2.1. Responding to Advertising Events</a>
      <li><a href="#ref-for-bluetooth-device-16">5.6.3. Responding to Disconnection</a>
      <li><a href="#ref-for-bluetooth-device-17">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="supported-physical-transports">
    <b><a href="#supported-physical-transports">#supported-physical-transports</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-supported-physical-transports-1">3. Device Discovery</a> <a href="#ref-for-supported-physical-transports-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="same-bluetooth-device">
    <b><a href="#same-bluetooth-device">#same-bluetooth-device</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-same-bluetooth-device-1">3.1. Permission API Integration</a>
      <li><a href="#ref-for-same-bluetooth-device-2">4.2. BluetoothDevice</a> <a href="#ref-for-same-bluetooth-device-3">(2)</a> <a href="#ref-for-same-bluetooth-device-4">(3)</a>
      <li><a href="#ref-for-same-bluetooth-device-5">4.2.1. Responding to Advertising Events</a>
      <li><a href="#ref-for-same-bluetooth-device-6">5.1.3. Identifying Services, Characteristics, and Descriptors</a> <a href="#ref-for-same-bluetooth-device-7">(2)</a>
      <li><a href="#ref-for-same-bluetooth-device-8">5.2. BluetoothRemoteGATTServer</a>
      <li><a href="#ref-for-same-bluetooth-device-9">5.6.3. Responding to Disconnection</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothdevice">
    <b><a href="#bluetoothdevice">#bluetoothdevice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothdevice-1">3. Device Discovery</a> <a href="#ref-for-bluetoothdevice-2">(2)</a> <a href="#ref-for-bluetoothdevice-3">(3)</a> <a href="#ref-for-bluetoothdevice-4">(4)</a> <a href="#ref-for-bluetoothdevice-5">(5)</a> <a href="#ref-for-bluetoothdevice-6">(6)</a>
      <li><a href="#ref-for-bluetoothdevice-7">3.1. Permission API Integration</a> <a href="#ref-for-bluetoothdevice-8">(2)</a> <a href="#ref-for-bluetoothdevice-9">(3)</a> <a href="#ref-for-bluetoothdevice-10">(4)</a>
      <li><a href="#ref-for-bluetoothdevice-11">4.2. BluetoothDevice</a> <a href="#ref-for-bluetoothdevice-12">(2)</a> <a href="#ref-for-bluetoothdevice-13">(3)</a> <a href="#ref-for-bluetoothdevice-14">(4)</a> <a href="#ref-for-bluetoothdevice-15">(5)</a> <a href="#ref-for-bluetoothdevice-16">(6)</a> <a href="#ref-for-bluetoothdevice-17">(7)</a> <a href="#ref-for-bluetoothdevice-18">(8)</a> <a href="#ref-for-bluetoothdevice-19">(9)</a> <a href="#ref-for-bluetoothdevice-20">(10)</a> <a href="#ref-for-bluetoothdevice-21">(11)</a> <a href="#ref-for-bluetoothdevice-22">(12)</a>
      <li><a href="#ref-for-bluetoothdevice-23">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-bluetoothdevice-24">(2)</a> <a href="#ref-for-bluetoothdevice-25">(3)</a> <a href="#ref-for-bluetoothdevice-26">(4)</a> <a href="#ref-for-bluetoothdevice-27">(5)</a> <a href="#ref-for-bluetoothdevice-28">(6)</a>
      <li><a href="#ref-for-bluetoothdevice-29">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-bluetoothdevice-30">5.1.2. Navigating the Bluetooth Hierarchy</a>
      <li><a href="#ref-for-bluetoothdevice-31">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-bluetoothdevice-32">(2)</a> <a href="#ref-for-bluetoothdevice-33">(3)</a>
      <li><a href="#ref-for-bluetoothdevice-34">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-bluetoothdevice-35">(2)</a>
      <li><a href="#ref-for-bluetoothdevice-36">5.6.1. Bluetooth Tree</a> <a href="#ref-for-bluetoothdevice-37">(2)</a> <a href="#ref-for-bluetoothdevice-38">(3)</a>
      <li><a href="#ref-for-bluetoothdevice-39">5.6.2. Event types</a> <a href="#ref-for-bluetoothdevice-40">(2)</a>
      <li><a href="#ref-for-bluetoothdevice-41">5.6.3. Responding to Disconnection</a>
      <li><a href="#ref-for-bluetoothdevice-42">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-id">
    <b><a href="#dom-bluetoothdevice-id">#dom-bluetoothdevice-id</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-id-1">3.1. Permission API Integration</a> <a href="#ref-for-dom-bluetoothdevice-id-2">(2)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-id-3">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-name">
    <b><a href="#dom-bluetoothdevice-name">#dom-bluetoothdevice-name</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-name-1">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-gatt">
    <b><a href="#dom-bluetoothdevice-gatt">#dom-bluetoothdevice-gatt</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-gatt-1">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-watchingadvertisements">
    <b><a href="#dom-bluetoothdevice-watchingadvertisements">#dom-bluetoothdevice-watchingadvertisements</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-2">(2)</a> <a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-3">(3)</a> <a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-4">(4)</a> <a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-5">(5)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-6">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-dom-bluetoothdevice-watchingadvertisements-7">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-context-slot">
    <b><a href="#dom-bluetoothdevice-context-slot">#dom-bluetoothdevice-context-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-context-slot-1">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-dom-bluetoothdevice-context-slot-2">5.1.1. The Bluetooth cache</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-representeddevice-slot">
    <b><a href="#dom-bluetoothdevice-representeddevice-slot">#dom-bluetoothdevice-representeddevice-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-1">3.1. Permission API Integration</a> <a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-2">(2)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-3">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-4">4.2.1. Responding to Advertising Events</a>
      <li><a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-5">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-6">(2)</a> <a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-7">(3)</a> <a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-8">(4)</a> <a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-9">(5)</a> <a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-10">(6)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-11">5.6.3. Responding to Disconnection</a>
      <li><a href="#ref-for-dom-bluetoothdevice-representeddevice-slot-12">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-allowedservices-slot">
    <b><a href="#dom-bluetoothdevice-allowedservices-slot">#dom-bluetoothdevice-allowedservices-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-1">3.1. Permission API Integration</a>
      <li><a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-2">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-3">(2)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-4">(3)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-5">(4)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-6">(5)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-7">(6)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-8">(7)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-9">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-10">(2)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-11">(3)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-12">(4)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-13">(5)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-14">(6)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-15">5.6.5. Responding to Service Changes</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-16">(2)</a> <a href="#ref-for-dom-bluetoothdevice-allowedservices-slot-17">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-unfiltereduuids-slot">
    <b><a href="#dom-bluetoothdevice-unfiltereduuids-slot">#dom-bluetoothdevice-unfiltereduuids-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-2">(2)</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-3">(3)</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-4">(4)</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-5">(5)</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-6">(6)</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-7">(7)</a>
      <li><a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-8">5.6.5. Responding to Service Changes</a> <a href="#ref-for-dom-bluetoothdevice-unfiltereduuids-slot-9">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-cachedallowedservices-slot">
    <b><a href="#dom-bluetoothdevice-cachedallowedservices-slot">#dom-bluetoothdevice-cachedallowedservices-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-cachedallowedservices-slot-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-cachedallowedservices-slot-2">(2)</a> <a href="#ref-for-dom-bluetoothdevice-cachedallowedservices-slot-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-cachedunfiltereduuids-slot">
    <b><a href="#dom-bluetoothdevice-cachedunfiltereduuids-slot">#dom-bluetoothdevice-cachedunfiltereduuids-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-cachedunfiltereduuids-slot-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-cachedunfiltereduuids-slot-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-filtereduuids-slot">
    <b><a href="#dom-bluetoothdevice-filtereduuids-slot">#dom-bluetoothdevice-filtereduuids-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-filtereduuids-slot-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-filtereduuids-slot-2">(2)</a> <a href="#ref-for-dom-bluetoothdevice-filtereduuids-slot-3">(3)</a> <a href="#ref-for-dom-bluetoothdevice-filtereduuids-slot-4">(4)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-the-bluetoothdevice-representing">
    <b><a href="#get-the-bluetoothdevice-representing">#get-the-bluetoothdevice-representing</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-get-the-bluetoothdevice-representing-1">3. Device Discovery</a> <a href="#ref-for-get-the-bluetoothdevice-representing-2">(2)</a>
      <li><a href="#ref-for-get-the-bluetoothdevice-representing-3">3.1. Permission API Integration</a>
      <li><a href="#ref-for-get-the-bluetoothdevice-representing-4">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-uuids">
    <b><a href="#dom-bluetoothdevice-uuids">#dom-bluetoothdevice-uuids</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-uuids-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-uuids-2">(2)</a> <a href="#ref-for-dom-bluetoothdevice-uuids-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-watchadvertisements">
    <b><a href="#dom-bluetoothdevice-watchadvertisements">#dom-bluetoothdevice-watchadvertisements</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-watchadvertisements-1">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdevice-unwatchadvertisements">
    <b><a href="#dom-bluetoothdevice-unwatchadvertisements">#dom-bluetoothdevice-unwatchadvertisements</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdevice-unwatchadvertisements-1">4.2. BluetoothDevice</a> <a href="#ref-for-dom-bluetoothdevice-unwatchadvertisements-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothadvertisingevent">
    <b><a href="#bluetoothadvertisingevent">#bluetoothadvertisingevent</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothadvertisingevent-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-bluetoothadvertisingevent-2">(2)</a> <a href="#ref-for-bluetoothadvertisingevent-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-bluetoothadvertisingeventinit">
    <b><a href="#dictdef-bluetoothadvertisingeventinit">#dictdef-bluetoothadvertisingeventinit</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dictdef-bluetoothadvertisingeventinit-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingeventinit-uuids">
    <b><a href="#dom-bluetoothadvertisingeventinit-uuids">#dom-bluetoothadvertisingeventinit-uuids</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingeventinit-uuids-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingeventinit-manufacturerdata">
    <b><a href="#dom-bluetoothadvertisingeventinit-manufacturerdata">#dom-bluetoothadvertisingeventinit-manufacturerdata</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingeventinit-manufacturerdata-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingeventinit-servicedata">
    <b><a href="#dom-bluetoothadvertisingeventinit-servicedata">#dom-bluetoothadvertisingeventinit-servicedata</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingeventinit-servicedata-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-device">
    <b><a href="#dom-bluetoothadvertisingevent-device">#dom-bluetoothadvertisingevent-device</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-device-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-dom-bluetoothadvertisingevent-device-2">(2)</a> <a href="#ref-for-dom-bluetoothadvertisingevent-device-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-uuids">
    <b><a href="#dom-bluetoothadvertisingevent-uuids">#dom-bluetoothadvertisingevent-uuids</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-uuids-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-name">
    <b><a href="#dom-bluetoothadvertisingevent-name">#dom-bluetoothadvertisingevent-name</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-name-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-appearance">
    <b><a href="#dom-bluetoothadvertisingevent-appearance">#dom-bluetoothadvertisingevent-appearance</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-appearance-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-txpower">
    <b><a href="#dom-bluetoothadvertisingevent-txpower">#dom-bluetoothadvertisingevent-txpower</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-txpower-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-rssi">
    <b><a href="#dom-bluetoothadvertisingevent-rssi">#dom-bluetoothadvertisingevent-rssi</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-rssi-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-manufacturerdata">
    <b><a href="#dom-bluetoothadvertisingevent-manufacturerdata">#dom-bluetoothadvertisingevent-manufacturerdata</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-manufacturerdata-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-servicedata">
    <b><a href="#dom-bluetoothadvertisingevent-servicedata">#dom-bluetoothadvertisingevent-servicedata</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-servicedata-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="fire-an-advertisementreceived-event">
    <b><a href="#fire-an-advertisementreceived-event">#fire-an-advertisementreceived-event</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-fire-an-advertisementreceived-event-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothadvertisingevent-bluetoothadvertisingevent">
    <b><a href="#dom-bluetoothadvertisingevent-bluetoothadvertisingevent">#dom-bluetoothadvertisingevent-bluetoothadvertisingevent</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothadvertisingevent-bluetoothadvertisingevent-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothmanufacturerdatamap">
    <b><a href="#bluetoothmanufacturerdatamap">#bluetoothmanufacturerdatamap</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothmanufacturerdatamap-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-bluetoothmanufacturerdatamap-2">(2)</a>
      <li><a href="#ref-for-bluetoothmanufacturerdatamap-3">4.2.1.1. BluetoothManufacturerDataMap</a> <a href="#ref-for-bluetoothmanufacturerdatamap-4">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothmanufacturerdatamap-data-slot">
    <b><a href="#dom-bluetoothmanufacturerdatamap-data-slot">#dom-bluetoothmanufacturerdatamap-data-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothmanufacturerdatamap-data-slot-1">4.2.1. Responding to Advertising Events</a>
      <li><a href="#ref-for-dom-bluetoothmanufacturerdatamap-data-slot-2">4.2.1.1. BluetoothManufacturerDataMap</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothservicedatamap">
    <b><a href="#bluetoothservicedatamap">#bluetoothservicedatamap</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothservicedatamap-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-bluetoothservicedatamap-2">(2)</a>
      <li><a href="#ref-for-bluetoothservicedatamap-3">4.2.1.2. BluetoothServiceDataMap</a> <a href="#ref-for-bluetoothservicedatamap-4">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothservicedatamap-data-slot">
    <b><a href="#dom-bluetoothservicedatamap-data-slot">#dom-bluetoothservicedatamap-data-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothservicedatamap-data-slot-1">4.2.1. Responding to Advertising Events</a>
      <li><a href="#ref-for-dom-bluetoothservicedatamap-data-slot-2">4.2.1.2. BluetoothServiceDataMap</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetooth-cache">
    <b><a href="#bluetooth-cache">#bluetooth-cache</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetooth-cache-1">3. Device Discovery</a> <a href="#ref-for-bluetooth-cache-2">(2)</a>
      <li><a href="#ref-for-bluetooth-cache-3">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-bluetooth-cache-4">5.1.1. The Bluetooth cache</a> <a href="#ref-for-bluetooth-cache-5">(2)</a> <a href="#ref-for-bluetooth-cache-6">(3)</a>
      <li><a href="#ref-for-bluetooth-cache-7">5.7. Error handling</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="populate-the-bluetooth-cache">
    <b><a href="#populate-the-bluetooth-cache">#populate-the-bluetooth-cache</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-populate-the-bluetooth-cache-1">3. Device Discovery</a> <a href="#ref-for-populate-the-bluetooth-cache-2">(2)</a>
      <li><a href="#ref-for-populate-the-bluetooth-cache-3">5.1.1. The Bluetooth cache</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="query-the-bluetooth-cache">
    <b><a href="#query-the-bluetooth-cache">#query-the-bluetooth-cache</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-query-the-bluetooth-cache-1">5.1.2. Navigating the Bluetooth Hierarchy</a>
      <li><a href="#ref-for-query-the-bluetooth-cache-2">5.1.3. Identifying Services, Characteristics, and Descriptors</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="getgattchildren">
    <b><a href="#getgattchildren">#getgattchildren</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-getgattchildren-1">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-getgattchildren-2">(2)</a>
      <li><a href="#ref-for-getgattchildren-3">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-getgattchildren-4">(2)</a> <a href="#ref-for-getgattchildren-5">(3)</a> <a href="#ref-for-getgattchildren-6">(4)</a>
      <li><a href="#ref-for-getgattchildren-7">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-getgattchildren-8">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="same-attribute">
    <b><a href="#same-attribute">#same-attribute</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-same-attribute-1">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-same-attribute-2">5.1.3. Identifying Services, Characteristics, and Descriptors</a> <a href="#ref-for-same-attribute-3">(2)</a> <a href="#ref-for-same-attribute-4">(3)</a>
      <li><a href="#ref-for-same-attribute-5">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothremotegattserver">
    <b><a href="#bluetoothremotegattserver">#bluetoothremotegattserver</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothremotegattserver-1">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-bluetoothremotegattserver-2">5.1. GATT Information Model</a> <a href="#ref-for-bluetoothremotegattserver-3">(2)</a>
      <li><a href="#ref-for-bluetoothremotegattserver-4">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-bluetoothremotegattserver-5">(2)</a> <a href="#ref-for-bluetoothremotegattserver-6">(3)</a> <a href="#ref-for-bluetoothremotegattserver-7">(4)</a> <a href="#ref-for-bluetoothremotegattserver-8">(5)</a> <a href="#ref-for-bluetoothremotegattserver-9">(6)</a> <a href="#ref-for-bluetoothremotegattserver-10">(7)</a> <a href="#ref-for-bluetoothremotegattserver-11">(8)</a> <a href="#ref-for-bluetoothremotegattserver-12">(9)</a> <a href="#ref-for-bluetoothremotegattserver-13">(10)</a>
      <li><a href="#ref-for-bluetoothremotegattserver-14">5.6.3. Responding to Disconnection</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-device">
    <b><a href="#dom-bluetoothremotegattserver-device">#dom-bluetoothremotegattserver-device</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-device-1">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-device-2">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothremotegattserver-device-3">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-connected">
    <b><a href="#dom-bluetoothremotegattserver-connected">#dom-bluetoothremotegattserver-connected</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-1">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-2">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-3">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-4">(2)</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-5">(3)</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-6">(4)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-7">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-8">(2)</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-9">(3)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-10">5.5. BluetoothRemoteGATTDescriptor</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-11">(2)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-12">5.6.3. Responding to Disconnection</a> <a href="#ref-for-dom-bluetoothremotegattserver-connected-13">(2)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connected-14">5.6.4. Responding to Notifications and Indications</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-activealgorithms-slot">
    <b><a href="#dom-bluetoothremotegattserver-activealgorithms-slot">#dom-bluetoothremotegattserver-activealgorithms-slot</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-1">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-2">(2)</a> <a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-3">(3)</a> <a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-4">(4)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-5">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-6">(2)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-7">5.5. BluetoothRemoteGATTDescriptor</a> <a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-8">(2)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-activealgorithms-slot-9">5.6.3. Responding to Disconnection</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-connect">
    <b><a href="#dom-bluetoothremotegattserver-connect">#dom-bluetoothremotegattserver-connect</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connect-1">1.1. Examples</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-connect-2">5.2. BluetoothRemoteGATTServer</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-disconnect">
    <b><a href="#dom-bluetoothremotegattserver-disconnect">#dom-bluetoothremotegattserver-disconnect</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-disconnect-1">3.1. Permission API Integration</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-disconnect-2">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothremotegattserver-disconnect-3">(2)</a> <a href="#ref-for-dom-bluetoothremotegattserver-disconnect-4">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="connection-checking-wrapper">
    <b><a href="#connection-checking-wrapper">#connection-checking-wrapper</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-connection-checking-wrapper-1">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-connection-checking-wrapper-2">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-connection-checking-wrapper-3">(2)</a>
      <li><a href="#ref-for-connection-checking-wrapper-4">5.5. BluetoothRemoteGATTDescriptor</a> <a href="#ref-for-connection-checking-wrapper-5">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-getprimaryservice">
    <b><a href="#dom-bluetoothremotegattserver-getprimaryservice">#dom-bluetoothremotegattserver-getprimaryservice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-getprimaryservice-1">1.1. Examples</a>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-getprimaryservice-2">5.2. BluetoothRemoteGATTServer</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattserver-getprimaryservices">
    <b><a href="#dom-bluetoothremotegattserver-getprimaryservices">#dom-bluetoothremotegattserver-getprimaryservices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattserver-getprimaryservices-1">5.2. BluetoothRemoteGATTServer</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothremotegattservice">
    <b><a href="#bluetoothremotegattservice">#bluetoothremotegattservice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothremotegattservice-1">3. Device Discovery</a>
      <li><a href="#ref-for-bluetoothremotegattservice-2">5.1. GATT Information Model</a>
      <li><a href="#ref-for-bluetoothremotegattservice-3">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-bluetoothremotegattservice-4">5.1.2. Navigating the Bluetooth Hierarchy</a>
      <li><a href="#ref-for-bluetoothremotegattservice-5">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-bluetoothremotegattservice-6">(2)</a>
      <li><a href="#ref-for-bluetoothremotegattservice-7">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-bluetoothremotegattservice-8">(2)</a> <a href="#ref-for-bluetoothremotegattservice-9">(3)</a> <a href="#ref-for-bluetoothremotegattservice-10">(4)</a> <a href="#ref-for-bluetoothremotegattservice-11">(5)</a> <a href="#ref-for-bluetoothremotegattservice-12">(6)</a> <a href="#ref-for-bluetoothremotegattservice-13">(7)</a> <a href="#ref-for-bluetoothremotegattservice-14">(8)</a> <a href="#ref-for-bluetoothremotegattservice-15">(9)</a>
      <li><a href="#ref-for-bluetoothremotegattservice-16">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-bluetoothremotegattservice-17">(2)</a>
      <li><a href="#ref-for-bluetoothremotegattservice-18">5.6.1. Bluetooth Tree</a> <a href="#ref-for-bluetoothremotegattservice-19">(2)</a> <a href="#ref-for-bluetoothremotegattservice-20">(3)</a>
      <li><a href="#ref-for-bluetoothremotegattservice-21">5.6.2. Event types</a> <a href="#ref-for-bluetoothremotegattservice-22">(2)</a> <a href="#ref-for-bluetoothremotegattservice-23">(3)</a>
      <li><a href="#ref-for-bluetoothremotegattservice-24">5.6.5. Responding to Service Changes</a> <a href="#ref-for-bluetoothremotegattservice-25">(2)</a> <a href="#ref-for-bluetoothremotegattservice-26">(3)</a> <a href="#ref-for-bluetoothremotegattservice-27">(4)</a> <a href="#ref-for-bluetoothremotegattservice-28">(5)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-device">
    <b><a href="#dom-bluetoothremotegattservice-device">#dom-bluetoothremotegattservice-device</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-device-1">5.1.2. Navigating the Bluetooth Hierarchy</a> <a href="#ref-for-dom-bluetoothremotegattservice-device-2">(2)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-device-3">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-uuid">
    <b><a href="#dom-bluetoothremotegattservice-uuid">#dom-bluetoothremotegattservice-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-uuid-1">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-isprimary">
    <b><a href="#dom-bluetoothremotegattservice-isprimary">#dom-bluetoothremotegattservice-isprimary</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-isprimary-1">5.1. GATT Information Model</a>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-isprimary-2">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-bluetoothremotegattservice-representing">
    <b><a href="#create-a-bluetoothremotegattservice-representing">#create-a-bluetoothremotegattservice-representing</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-a-bluetoothremotegattservice-representing-1">5.1.1. The Bluetooth cache</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-getcharacteristic">
    <b><a href="#dom-bluetoothremotegattservice-getcharacteristic">#dom-bluetoothremotegattservice-getcharacteristic</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getcharacteristic-1">1.1. Examples</a> <a href="#ref-for-dom-bluetoothremotegattservice-getcharacteristic-2">(2)</a> <a href="#ref-for-dom-bluetoothremotegattservice-getcharacteristic-3">(3)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getcharacteristic-4">5.1. GATT Information Model</a>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getcharacteristic-5">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-getcharacteristics">
    <b><a href="#dom-bluetoothremotegattservice-getcharacteristics">#dom-bluetoothremotegattservice-getcharacteristics</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getcharacteristics-1">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-getincludedservice">
    <b><a href="#dom-bluetoothremotegattservice-getincludedservice">#dom-bluetoothremotegattservice-getincludedservice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getincludedservice-1">5.1. GATT Information Model</a>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getincludedservice-2">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattservice-getincludedservices">
    <b><a href="#dom-bluetoothremotegattservice-getincludedservices">#dom-bluetoothremotegattservice-getincludedservices</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattservice-getincludedservices-1">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothremotegattcharacteristic">
    <b><a href="#bluetoothremotegattcharacteristic">#bluetoothremotegattcharacteristic</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-1">1.1. Examples</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-2">3. Device Discovery</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-3">5.1. GATT Information Model</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-4">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-5">5.1.2. Navigating the Bluetooth Hierarchy</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-6">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-bluetoothremotegattcharacteristic-7">(2)</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-8">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-bluetoothremotegattcharacteristic-9">(2)</a> <a href="#ref-for-bluetoothremotegattcharacteristic-10">(3)</a> <a href="#ref-for-bluetoothremotegattcharacteristic-11">(4)</a> <a href="#ref-for-bluetoothremotegattcharacteristic-12">(5)</a> <a href="#ref-for-bluetoothremotegattcharacteristic-13">(6)</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-14">5.4.1. BluetoothCharacteristicProperties</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-15">5.5. BluetoothRemoteGATTDescriptor</a> <a href="#ref-for-bluetoothremotegattcharacteristic-16">(2)</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-17">5.6.1. Bluetooth Tree</a> <a href="#ref-for-bluetoothremotegattcharacteristic-18">(2)</a> <a href="#ref-for-bluetoothremotegattcharacteristic-19">(3)</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-20">5.6.2. Event types</a>
      <li><a href="#ref-for-bluetoothremotegattcharacteristic-21">5.6.4. Responding to Notifications and Indications</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-service">
    <b><a href="#dom-bluetoothremotegattcharacteristic-service">#dom-bluetoothremotegattcharacteristic-service</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-service-1">5.1.2. Navigating the Bluetooth Hierarchy</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-service-2">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-uuid">
    <b><a href="#dom-bluetoothremotegattcharacteristic-uuid">#dom-bluetoothremotegattcharacteristic-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-uuid-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-properties">
    <b><a href="#dom-bluetoothremotegattcharacteristic-properties">#dom-bluetoothremotegattcharacteristic-properties</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-properties-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-value">
    <b><a href="#dom-bluetoothremotegattcharacteristic-value">#dom-bluetoothremotegattcharacteristic-value</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-value-1">1.1. Examples</a> <a href="#ref-for-dom-bluetoothremotegattcharacteristic-value-2">(2)</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-value-3">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-bluetoothremotegattcharacteristic-representing">
    <b><a href="#create-a-bluetoothremotegattcharacteristic-representing">#create-a-bluetoothremotegattcharacteristic-representing</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-a-bluetoothremotegattcharacteristic-representing-1">5.1.1. The Bluetooth cache</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-getdescriptor">
    <b><a href="#dom-bluetoothremotegattcharacteristic-getdescriptor">#dom-bluetoothremotegattcharacteristic-getdescriptor</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-getdescriptor-1">5.1. GATT Information Model</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-getdescriptor-2">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-getdescriptors">
    <b><a href="#dom-bluetoothremotegattcharacteristic-getdescriptors">#dom-bluetoothremotegattcharacteristic-getdescriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-getdescriptors-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-readvalue">
    <b><a href="#dom-bluetoothremotegattcharacteristic-readvalue">#dom-bluetoothremotegattcharacteristic-readvalue</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-readvalue-1">1.1. Examples</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-readvalue-2">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-readvalue-3">5.6.2. Event types</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-writevalue">
    <b><a href="#dom-bluetoothremotegattcharacteristic-writevalue">#dom-bluetoothremotegattcharacteristic-writevalue</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-writevalue-1">1.1. Examples</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-writevalue-2">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="active-notification-context-set">
    <b><a href="#active-notification-context-set">#active-notification-context-set</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-active-notification-context-set-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-active-notification-context-set-2">(2)</a> <a href="#ref-for-active-notification-context-set-3">(3)</a> <a href="#ref-for-active-notification-context-set-4">(4)</a>
      <li><a href="#ref-for-active-notification-context-set-5">5.6.4. Responding to Notifications and Indications</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-startnotifications">
    <b><a href="#dom-bluetoothremotegattcharacteristic-startnotifications">#dom-bluetoothremotegattcharacteristic-startnotifications</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-startnotifications-1">1.1. Examples</a>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-startnotifications-2">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattcharacteristic-stopnotifications">
    <b><a href="#dom-bluetoothremotegattcharacteristic-stopnotifications">#dom-bluetoothremotegattcharacteristic-stopnotifications</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattcharacteristic-stopnotifications-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothcharacteristicproperties">
    <b><a href="#bluetoothcharacteristicproperties">#bluetoothcharacteristicproperties</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothcharacteristicproperties-1">5.1. GATT Information Model</a>
      <li><a href="#ref-for-bluetoothcharacteristicproperties-2">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-bluetoothcharacteristicproperties-3">5.4.1. BluetoothCharacteristicProperties</a> <a href="#ref-for-bluetoothcharacteristicproperties-4">(2)</a> <a href="#ref-for-bluetoothcharacteristicproperties-5">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic">
    <b><a href="#create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic">#create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-a-bluetoothcharacteristicproperties-instance-from-the-characteristic-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothremotegattdescriptor">
    <b><a href="#bluetoothremotegattdescriptor">#bluetoothremotegattdescriptor</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothremotegattdescriptor-1">3. Device Discovery</a>
      <li><a href="#ref-for-bluetoothremotegattdescriptor-2">5.1. GATT Information Model</a>
      <li><a href="#ref-for-bluetoothremotegattdescriptor-3">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-bluetoothremotegattdescriptor-4">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-bluetoothremotegattdescriptor-5">(2)</a>
      <li><a href="#ref-for-bluetoothremotegattdescriptor-6">5.5. BluetoothRemoteGATTDescriptor</a> <a href="#ref-for-bluetoothremotegattdescriptor-7">(2)</a> <a href="#ref-for-bluetoothremotegattdescriptor-8">(3)</a> <a href="#ref-for-bluetoothremotegattdescriptor-9">(4)</a>
      <li><a href="#ref-for-bluetoothremotegattdescriptor-10">5.6.1. Bluetooth Tree</a> <a href="#ref-for-bluetoothremotegattdescriptor-11">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattdescriptor-characteristic">
    <b><a href="#dom-bluetoothremotegattdescriptor-characteristic">#dom-bluetoothremotegattdescriptor-characteristic</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattdescriptor-characteristic-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattdescriptor-uuid">
    <b><a href="#dom-bluetoothremotegattdescriptor-uuid">#dom-bluetoothremotegattdescriptor-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattdescriptor-uuid-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattdescriptor-value">
    <b><a href="#dom-bluetoothremotegattdescriptor-value">#dom-bluetoothremotegattdescriptor-value</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattdescriptor-value-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-bluetoothremotegattdescriptor-representing">
    <b><a href="#create-a-bluetoothremotegattdescriptor-representing">#create-a-bluetoothremotegattdescriptor-representing</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-create-a-bluetoothremotegattdescriptor-representing-1">5.1.1. The Bluetooth cache</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattdescriptor-readvalue">
    <b><a href="#dom-bluetoothremotegattdescriptor-readvalue">#dom-bluetoothremotegattdescriptor-readvalue</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattdescriptor-readvalue-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothremotegattdescriptor-writevalue">
    <b><a href="#dom-bluetoothremotegattdescriptor-writevalue">#dom-bluetoothremotegattdescriptor-writevalue</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothremotegattdescriptor-writevalue-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetooth-tree">
    <b><a href="#bluetooth-tree">#bluetooth-tree</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetooth-tree-1">5.6.1. Bluetooth Tree</a>
      <li><a href="#ref-for-bluetooth-tree-2">5.6.2. Event types</a> <a href="#ref-for-bluetooth-tree-3">(2)</a>
      <li><a href="#ref-for-bluetooth-tree-4">5.6.4. Responding to Notifications and Indications</a>
      <li><a href="#ref-for-bluetooth-tree-5">5.6.5. Responding to Service Changes</a> <a href="#ref-for-bluetooth-tree-6">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-bluetoothdevice-advertisementreceived">
    <b><a href="#eventdef-bluetoothdevice-advertisementreceived">#eventdef-bluetoothdevice-advertisementreceived</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-eventdef-bluetoothdevice-advertisementreceived-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-eventdef-bluetoothdevice-advertisementreceived-2">(2)</a> <a href="#ref-for-eventdef-bluetoothdevice-advertisementreceived-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged">
    <b><a href="#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged">#eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-1">1.1. Examples</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-2">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-3">5.6.4. Responding to Notifications and Indications</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattcharacteristic-characteristicvaluechanged-4">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-bluetoothdevice-gattserverdisconnected">
    <b><a href="#eventdef-bluetoothdevice-gattserverdisconnected">#eventdef-bluetoothdevice-gattserverdisconnected</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-eventdef-bluetoothdevice-gattserverdisconnected-1">3.1. Permission API Integration</a>
      <li><a href="#ref-for-eventdef-bluetoothdevice-gattserverdisconnected-2">5.2. BluetoothRemoteGATTServer</a>
      <li><a href="#ref-for-eventdef-bluetoothdevice-gattserverdisconnected-3">5.6.3. Responding to Disconnection</a>
      <li><a href="#ref-for-eventdef-bluetoothdevice-gattserverdisconnected-4">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-bluetoothremotegattservice-serviceadded">
    <b><a href="#eventdef-bluetoothremotegattservice-serviceadded">#eventdef-bluetoothremotegattservice-serviceadded</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-serviceadded-1">3. Device Discovery</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-serviceadded-2">5.6.5. Responding to Service Changes</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-serviceadded-3">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-bluetoothremotegattservice-servicechanged">
    <b><a href="#eventdef-bluetoothremotegattservice-servicechanged">#eventdef-bluetoothremotegattservice-servicechanged</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-servicechanged-1">5.6.5. Responding to Service Changes</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-servicechanged-2">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="eventdef-bluetoothremotegattservice-serviceremoved">
    <b><a href="#eventdef-bluetoothremotegattservice-serviceremoved">#eventdef-bluetoothremotegattservice-serviceremoved</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-serviceremoved-1">5.6.5. Responding to Service Changes</a>
      <li><a href="#ref-for-eventdef-bluetoothremotegattservice-serviceremoved-2">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristiceventhandlers">
    <b><a href="#characteristiceventhandlers">#characteristiceventhandlers</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristiceventhandlers-1">3. Device Discovery</a>
      <li><a href="#ref-for-characteristiceventhandlers-2">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-characteristiceventhandlers-3">5.3. BluetoothRemoteGATTService</a>
      <li><a href="#ref-for-characteristiceventhandlers-4">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-characteristiceventhandlers-oncharacteristicvaluechanged">
    <b><a href="#dom-characteristiceventhandlers-oncharacteristicvaluechanged">#dom-characteristiceventhandlers-oncharacteristicvaluechanged</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-characteristiceventhandlers-oncharacteristicvaluechanged-1">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetoothdeviceeventhandlers">
    <b><a href="#bluetoothdeviceeventhandlers">#bluetoothdeviceeventhandlers</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetoothdeviceeventhandlers-1">3. Device Discovery</a>
      <li><a href="#ref-for-bluetoothdeviceeventhandlers-2">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothdeviceeventhandlers-ongattserverdisconnected">
    <b><a href="#dom-bluetoothdeviceeventhandlers-ongattserverdisconnected">#dom-bluetoothdeviceeventhandlers-ongattserverdisconnected</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothdeviceeventhandlers-ongattserverdisconnected-1">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="serviceeventhandlers">
    <b><a href="#serviceeventhandlers">#serviceeventhandlers</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-serviceeventhandlers-1">3. Device Discovery</a>
      <li><a href="#ref-for-serviceeventhandlers-2">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-serviceeventhandlers-3">5.3. BluetoothRemoteGATTService</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-serviceeventhandlers-onserviceadded">
    <b><a href="#dom-serviceeventhandlers-onserviceadded">#dom-serviceeventhandlers-onserviceadded</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-serviceeventhandlers-onserviceadded-1">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-serviceeventhandlers-onservicechanged">
    <b><a href="#dom-serviceeventhandlers-onservicechanged">#dom-serviceeventhandlers-onservicechanged</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-serviceeventhandlers-onservicechanged-1">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-serviceeventhandlers-onserviceremoved">
    <b><a href="#dom-serviceeventhandlers-onserviceremoved">#dom-serviceeventhandlers-onserviceremoved</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-serviceeventhandlers-onserviceremoved-1">5.6.6. IDL event handlers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-uuid">
    <b><a href="#typedefdef-uuid">#typedefdef-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-typedefdef-uuid-1">3.1. Permission API Integration</a>
      <li><a href="#ref-for-typedefdef-uuid-2">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-typedefdef-uuid-3">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-typedefdef-uuid-4">(2)</a> <a href="#ref-for-typedefdef-uuid-5">(3)</a>
      <li><a href="#ref-for-typedefdef-uuid-6">5.3. BluetoothRemoteGATTService</a>
      <li><a href="#ref-for-typedefdef-uuid-7">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-typedefdef-uuid-8">5.5. BluetoothRemoteGATTDescriptor</a>
      <li><a href="#ref-for-typedefdef-uuid-9">6.1. Standardized UUIDs</a> <a href="#ref-for-typedefdef-uuid-10">(2)</a> <a href="#ref-for-typedefdef-uuid-11">(3)</a> <a href="#ref-for-typedefdef-uuid-12">(4)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="valid-uuid">
    <b><a href="#valid-uuid">#valid-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-valid-uuid-1">6. UUIDs</a> <a href="#ref-for-valid-uuid-2">(2)</a> <a href="#ref-for-valid-uuid-3">(3)</a>
      <li><a href="#ref-for-valid-uuid-4">6.1. Standardized UUIDs</a> <a href="#ref-for-valid-uuid-5">(2)</a> <a href="#ref-for-valid-uuid-6">(3)</a> <a href="#ref-for-valid-uuid-7">(4)</a>
      <li><a href="#ref-for-valid-uuid-8">7. The GATT Blacklist</a> <a href="#ref-for-valid-uuid-9">(2)</a> <a href="#ref-for-valid-uuid-10">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothuuid-canonicaluuid">
    <b><a href="#dom-bluetoothuuid-canonicaluuid">#dom-bluetoothuuid-canonicaluuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothuuid-canonicaluuid-1">6. UUIDs</a>
      <li><a href="#ref-for-dom-bluetoothuuid-canonicaluuid-2">6.1. Standardized UUIDs</a> <a href="#ref-for-dom-bluetoothuuid-canonicaluuid-3">(2)</a> <a href="#ref-for-dom-bluetoothuuid-canonicaluuid-4">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-bluetoothserviceuuid">
    <b><a href="#typedefdef-bluetoothserviceuuid">#typedefdef-bluetoothserviceuuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-typedefdef-bluetoothserviceuuid-1">3. Device Discovery</a> <a href="#ref-for-typedefdef-bluetoothserviceuuid-2">(2)</a> <a href="#ref-for-typedefdef-bluetoothserviceuuid-3">(3)</a>
      <li><a href="#ref-for-typedefdef-bluetoothserviceuuid-4">3.1. Permission API Integration</a>
      <li><a href="#ref-for-typedefdef-bluetoothserviceuuid-5">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-typedefdef-bluetoothserviceuuid-6">(2)</a>
      <li><a href="#ref-for-typedefdef-bluetoothserviceuuid-7">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-typedefdef-bluetoothserviceuuid-8">(2)</a>
      <li><a href="#ref-for-typedefdef-bluetoothserviceuuid-9">6.1. Standardized UUIDs</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-bluetoothcharacteristicuuid">
    <b><a href="#typedefdef-bluetoothcharacteristicuuid">#typedefdef-bluetoothcharacteristicuuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-typedefdef-bluetoothcharacteristicuuid-1">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-typedefdef-bluetoothcharacteristicuuid-2">(2)</a>
      <li><a href="#ref-for-typedefdef-bluetoothcharacteristicuuid-3">6.1. Standardized UUIDs</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-bluetoothdescriptoruuid">
    <b><a href="#typedefdef-bluetoothdescriptoruuid">#typedefdef-bluetoothdescriptoruuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-typedefdef-bluetoothdescriptoruuid-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-typedefdef-bluetoothdescriptoruuid-2">(2)</a>
      <li><a href="#ref-for-typedefdef-bluetoothdescriptoruuid-3">6.1. Standardized UUIDs</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="resolveuuidname">
    <b><a href="#resolveuuidname">#resolveuuidname</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-resolveuuidname-1">6.1. Standardized UUIDs</a> <a href="#ref-for-resolveuuidname-2">(2)</a> <a href="#ref-for-resolveuuidname-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothuuid-getservice">
    <b><a href="#dom-bluetoothuuid-getservice">#dom-bluetoothuuid-getservice</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothuuid-getservice-1">3. Device Discovery</a> <a href="#ref-for-dom-bluetoothuuid-getservice-2">(2)</a> <a href="#ref-for-dom-bluetoothuuid-getservice-3">(3)</a> <a href="#ref-for-dom-bluetoothuuid-getservice-4">(4)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getservice-5">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-dom-bluetoothuuid-getservice-6">(2)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getservice-7">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-dom-bluetoothuuid-getservice-8">(2)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getservice-9">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-dom-bluetoothuuid-getservice-10">(2)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getservice-11">6.1. Standardized UUIDs</a> <a href="#ref-for-dom-bluetoothuuid-getservice-12">(2)</a> <a href="#ref-for-dom-bluetoothuuid-getservice-13">(3)</a> <a href="#ref-for-dom-bluetoothuuid-getservice-14">(4)</a> <a href="#ref-for-dom-bluetoothuuid-getservice-15">(5)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getservice-16">9. Terminology and Conventions</a> <a href="#ref-for-dom-bluetoothuuid-getservice-17">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothuuid-getcharacteristic">
    <b><a href="#dom-bluetoothuuid-getcharacteristic">#dom-bluetoothuuid-getcharacteristic</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothuuid-getcharacteristic-1">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-dom-bluetoothuuid-getcharacteristic-2">(2)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getcharacteristic-3">6.1. Standardized UUIDs</a> <a href="#ref-for-dom-bluetoothuuid-getcharacteristic-4">(2)</a> <a href="#ref-for-dom-bluetoothuuid-getcharacteristic-5">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-bluetoothuuid-getdescriptor">
    <b><a href="#dom-bluetoothuuid-getdescriptor">#dom-bluetoothuuid-getdescriptor</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-bluetoothuuid-getdescriptor-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-dom-bluetoothuuid-getdescriptor-2">(2)</a>
      <li><a href="#ref-for-dom-bluetoothuuid-getdescriptor-3">6.1. Standardized UUIDs</a> <a href="#ref-for-dom-bluetoothuuid-getdescriptor-4">(2)</a> <a href="#ref-for-dom-bluetoothuuid-getdescriptor-5">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="parsing-the-blacklist">
    <b><a href="#parsing-the-blacklist">#parsing-the-blacklist</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-parsing-the-blacklist-1">7. The GATT Blacklist</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="gatt-blacklist">
    <b><a href="#gatt-blacklist">#gatt-blacklist</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-gatt-blacklist-1">7. The GATT Blacklist</a> <a href="#ref-for-gatt-blacklist-2">(2)</a> <a href="#ref-for-gatt-blacklist-3">(3)</a> <a href="#ref-for-gatt-blacklist-4">(4)</a> <a href="#ref-for-gatt-blacklist-5">(5)</a> <a href="#ref-for-gatt-blacklist-6">(6)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="blacklisted">
    <b><a href="#blacklisted">#blacklisted</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-blacklisted-1">3. Device Discovery</a> <a href="#ref-for-blacklisted-2">(2)</a>
      <li><a href="#ref-for-blacklisted-3">5.1.2. Navigating the Bluetooth Hierarchy</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="blacklisted-for-reads">
    <b><a href="#blacklisted-for-reads">#blacklisted-for-reads</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-blacklisted-for-reads-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-blacklisted-for-reads-2">(2)</a>
      <li><a href="#ref-for-blacklisted-for-reads-3">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="blacklisted-for-writes">
    <b><a href="#blacklisted-for-writes">#blacklisted-for-writes</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-blacklisted-for-writes-1">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-blacklisted-for-writes-2">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-navigator-bluetooth">
    <b><a href="#dom-navigator-bluetooth">#dom-navigator-bluetooth</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-dom-navigator-bluetooth-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-dom-navigator-bluetooth-2">(2)</a> <a href="#ref-for-dom-navigator-bluetooth-3">(3)</a> <a href="#ref-for-dom-navigator-bluetooth-4">(4)</a>
      <li><a href="#ref-for-dom-navigator-bluetooth-5">5.6.1. Bluetooth Tree</a> <a href="#ref-for-dom-navigator-bluetooth-6">(2)</a> <a href="#ref-for-dom-navigator-bluetooth-7">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="read-only-arraybuffer">
    <b><a href="#read-only-arraybuffer">#read-only-arraybuffer</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-read-only-arraybuffer-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-read-only-arraybuffer-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="advertising-event">
    <b><a href="#advertising-event">#advertising-event</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-advertising-event-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-advertising-event-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="extended-inquiry-response">
    <b><a href="#extended-inquiry-response">#extended-inquiry-response</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-extended-inquiry-response-1">3. Device Discovery</a> <a href="#ref-for-extended-inquiry-response-2">(2)</a>
      <li><a href="#ref-for-extended-inquiry-response-3">4.1. Global Bluetooth device properties</a> <a href="#ref-for-extended-inquiry-response-4">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="read-bd_addr-command">
    <b><a href="#read-bd_addr-command">#read-bd_addr-command</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-read-bd_addr-command-1">2.4. Bluetooth device identifiers</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="rssi">
    <b><a href="#rssi">#rssi</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-rssi-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="searching-for-services">
    <b><a href="#searching-for-services">#searching-for-services</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-searching-for-services-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="uuid">
    <b><a href="#uuid">#uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-uuid-1">3. Device Discovery</a>
      <li><a href="#ref-for-uuid-2">4.2.1. Responding to Advertising Events</a>
      <li><a href="#ref-for-uuid-3">5.1. GATT Information Model</a>
      <li><a href="#ref-for-uuid-4">6. UUIDs</a> <a href="#ref-for-uuid-5">(2)</a> <a href="#ref-for-uuid-6">(3)</a> <a href="#ref-for-uuid-7">(4)</a>
      <li><a href="#ref-for-uuid-8">7. The GATT Blacklist</a> <a href="#ref-for-uuid-9">(2)</a> <a href="#ref-for-uuid-10">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="uuid-alias">
    <b><a href="#uuid-alias">#uuid-alias</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-uuid-alias-1">6. UUIDs</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="the-128-bit-uuid-represented">
    <b><a href="#the-128-bit-uuid-represented">#the-128-bit-uuid-represented</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-the-128-bit-uuid-represented-1">6.1. Standardized UUIDs</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="broadcaster">
    <b><a href="#broadcaster">#broadcaster</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-broadcaster-1">1. Introduction</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="observer">
    <b><a href="#observer">#observer</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-observer-1">1. Introduction</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="peripheral">
    <b><a href="#peripheral">#peripheral</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-peripheral-1">1. Introduction</a> <a href="#ref-for-peripheral-2">(2)</a> <a href="#ref-for-peripheral-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="central">
    <b><a href="#central">#central</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-central-1">1. Introduction</a> <a href="#ref-for-central-2">(2)</a> <a href="#ref-for-central-3">(3)</a>
      <li><a href="#ref-for-central-4">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bluetooth-device-name">
    <b><a href="#bluetooth-device-name">#bluetooth-device-name</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bluetooth-device-name-1">2.4. Bluetooth device identifiers</a>
      <li><a href="#ref-for-bluetooth-device-name-2">3. Device Discovery</a> <a href="#ref-for-bluetooth-device-name-3">(2)</a> <a href="#ref-for-bluetooth-device-name-4">(3)</a> <a href="#ref-for-bluetooth-device-name-5">(4)</a> <a href="#ref-for-bluetooth-device-name-6">(5)</a>
      <li><a href="#ref-for-bluetooth-device-name-7">4.1. Global Bluetooth device properties</a> <a href="#ref-for-bluetooth-device-name-8">(2)</a>
      <li><a href="#ref-for-bluetooth-device-name-9">4.2. BluetoothDevice</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="device-discovery-procedure">
    <b><a href="#device-discovery-procedure">#device-discovery-procedure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-device-discovery-procedure-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="observation-procedure">
    <b><a href="#observation-procedure">#observation-procedure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-observation-procedure-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="general-discovery-procedure">
    <b><a href="#general-discovery-procedure">#general-discovery-procedure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-general-discovery-procedure-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="name-discovery-procedure">
    <b><a href="#name-discovery-procedure">#name-discovery-procedure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-name-discovery-procedure-1">3. Device Discovery</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="privacy-feature">
    <b><a href="#privacy-feature">#privacy-feature</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-privacy-feature-1">2.4.2. The UA’s Bluetooth address</a> <a href="#ref-for-privacy-feature-2">(2)</a> <a href="#ref-for-privacy-feature-3">(3)</a>
      <li><a href="#ref-for-privacy-feature-4">3. Device Discovery</a> <a href="#ref-for-privacy-feature-5">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="static-address">
    <b><a href="#static-address">#static-address</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-static-address-1">4.1. Global Bluetooth device properties</a> <a href="#ref-for-static-address-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="private-address">
    <b><a href="#private-address">#private-address</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-private-address-1">2.4. Bluetooth device identifiers</a>
      <li><a href="#ref-for-private-address-2">4.1. Global Bluetooth device properties</a> <a href="#ref-for-private-address-3">(2)</a> <a href="#ref-for-private-address-4">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="resolvable-private-address-resolution-procedure">
    <b><a href="#resolvable-private-address-resolution-procedure">#resolvable-private-address-resolution-procedure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-resolvable-private-address-resolution-procedure-1">2.4. Bluetooth device identifiers</a>
      <li><a href="#ref-for-resolvable-private-address-resolution-procedure-2">4.1. Global Bluetooth device properties</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="advertising-data">
    <b><a href="#advertising-data">#advertising-data</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-advertising-data-1">4.1. Global Bluetooth device properties</a> <a href="#ref-for-advertising-data-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="ad-structure">
    <b><a href="#ad-structure">#ad-structure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-ad-structure-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="bd_addr">
    <b><a href="#bd_addr">#bd_addr</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-bd_addr-1">2.4. Bluetooth device identifiers</a> <a href="#ref-for-bd_addr-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="public-bluetooth-address">
    <b><a href="#public-bluetooth-address">#public-bluetooth-address</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-public-bluetooth-address-1">4.1. Global Bluetooth device properties</a> <a href="#ref-for-public-bluetooth-address-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-type">
    <b><a href="#attribute-type">#attribute-type</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-attribute-type-1">6. UUIDs</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-handle">
    <b><a href="#attribute-handle">#attribute-handle</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-attribute-handle-1">5.1. GATT Information Model</a> <a href="#ref-for-attribute-handle-2">(2)</a> <a href="#ref-for-attribute-handle-3">(3)</a>
      <li><a href="#ref-for-attribute-handle-4">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-attribute-handle-5">5.1.3. Identifying Services, Characteristics, and Descriptors</a> <a href="#ref-for-attribute-handle-6">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="long-attribute-values">
    <b><a href="#long-attribute-values">#long-attribute-values</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-long-attribute-values-1">5.4. BluetoothRemoteGATTCharacteristic</a>
      <li><a href="#ref-for-long-attribute-values-2">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="error-response">
    <b><a href="#error-response">#error-response</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-error-response-1">5.7. Error handling</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="generic-attribute-profile">
    <b><a href="#generic-attribute-profile">#generic-attribute-profile</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-generic-attribute-profile-1">1. Introduction</a>
      <li><a href="#ref-for-generic-attribute-profile-2">2.3. Attacks on devices</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="gatt-client">
    <b><a href="#gatt-client">#gatt-client</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-gatt-client-1">5.1. GATT Information Model</a> <a href="#ref-for-gatt-client-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="gatt-server">
    <b><a href="#gatt-server">#gatt-server</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-gatt-server-1">1. Introduction</a> <a href="#ref-for-gatt-server-2">(2)</a>
      <li><a href="#ref-for-gatt-server-3">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-gatt-server-4">5.1. GATT Information Model</a> <a href="#ref-for-gatt-server-5">(2)</a>
      <li><a href="#ref-for-gatt-server-6">5.2. BluetoothRemoteGATTServer</a>
      <li><a href="#ref-for-gatt-server-7">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="profile-fundamentals">
    <b><a href="#profile-fundamentals">#profile-fundamentals</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-profile-fundamentals-1">5.7. Error handling</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="att-bearer">
    <b><a href="#att-bearer">#att-bearer</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-att-bearer-1">4.1. Global Bluetooth device properties</a> <a href="#ref-for-att-bearer-2">(2)</a>
      <li><a href="#ref-for-att-bearer-3">5.2. BluetoothRemoteGATTServer</a> <a href="#ref-for-att-bearer-4">(2)</a>
      <li><a href="#ref-for-att-bearer-5">5.6.3. Responding to Disconnection</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="attribute-caching">
    <b><a href="#attribute-caching">#attribute-caching</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-attribute-caching-1">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="gatt-profile-hierarchy">
    <b><a href="#gatt-profile-hierarchy">#gatt-profile-hierarchy</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-gatt-profile-hierarchy-1">5.1. GATT Information Model</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="service">
    <b><a href="#service">#service</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-service-1">1. Introduction</a>
      <li><a href="#ref-for-service-2">3. Device Discovery</a> <a href="#ref-for-service-3">(2)</a> <a href="#ref-for-service-4">(3)</a> <a href="#ref-for-service-5">(4)</a> <a href="#ref-for-service-6">(5)</a>
      <li><a href="#ref-for-service-7">5.1. GATT Information Model</a>
      <li><a href="#ref-for-service-8">5.3. BluetoothRemoteGATTService</a>
      <li><a href="#ref-for-service-9">5.6.1. Bluetooth Tree</a>
      <li><a href="#ref-for-service-10">5.6.5. Responding to Service Changes</a> <a href="#ref-for-service-11">(2)</a> <a href="#ref-for-service-12">(3)</a> <a href="#ref-for-service-13">(4)</a> <a href="#ref-for-service-14">(5)</a> <a href="#ref-for-service-15">(6)</a> <a href="#ref-for-service-16">(7)</a> <a href="#ref-for-service-17">(8)</a> <a href="#ref-for-service-18">(9)</a> <a href="#ref-for-service-19">(10)</a> <a href="#ref-for-service-20">(11)</a> <a href="#ref-for-service-21">(12)</a> <a href="#ref-for-service-22">(13)</a> <a href="#ref-for-service-23">(14)</a> <a href="#ref-for-service-24">(15)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="included-service">
    <b><a href="#included-service">#included-service</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-included-service-1">5.1. GATT Information Model</a>
      <li><a href="#ref-for-included-service-2">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-included-service-3">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic">
    <b><a href="#characteristic">#characteristic</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-1">1. Introduction</a>
      <li><a href="#ref-for-characteristic-2">2.3. Attacks on devices</a>
      <li><a href="#ref-for-characteristic-3">5.1. GATT Information Model</a> <a href="#ref-for-characteristic-4">(2)</a>
      <li><a href="#ref-for-characteristic-5">5.3. BluetoothRemoteGATTService</a> <a href="#ref-for-characteristic-6">(2)</a>
      <li><a href="#ref-for-characteristic-7">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-characteristic-8">(2)</a> <a href="#ref-for-characteristic-9">(3)</a> <a href="#ref-for-characteristic-10">(4)</a> <a href="#ref-for-characteristic-11">(5)</a> <a href="#ref-for-characteristic-12">(6)</a>
      <li><a href="#ref-for-characteristic-13">5.5. BluetoothRemoteGATTDescriptor</a>
      <li><a href="#ref-for-characteristic-14">5.6.4. Responding to Notifications and Indications</a> <a href="#ref-for-characteristic-15">(2)</a>
      <li><a href="#ref-for-characteristic-16">5.6.5. Responding to Service Changes</a> <a href="#ref-for-characteristic-17">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-properties">
    <b><a href="#characteristic-properties">#characteristic-properties</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-properties-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-characteristic-properties-2">(2)</a> <a href="#ref-for-characteristic-properties-3">(3)</a> <a href="#ref-for-characteristic-properties-4">(4)</a>
      <li><a href="#ref-for-characteristic-properties-5">5.4.1. BluetoothCharacteristicProperties</a> <a href="#ref-for-characteristic-properties-6">(2)</a> <a href="#ref-for-characteristic-properties-7">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="descriptor">
    <b><a href="#descriptor">#descriptor</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-descriptor-1">1. Introduction</a>
      <li><a href="#ref-for-descriptor-2">2.3. Attacks on devices</a>
      <li><a href="#ref-for-descriptor-3">5.1. GATT Information Model</a>
      <li><a href="#ref-for-descriptor-4">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-descriptor-5">(2)</a>
      <li><a href="#ref-for-descriptor-6">5.5. BluetoothRemoteGATTDescriptor</a> <a href="#ref-for-descriptor-7">(2)</a> <a href="#ref-for-descriptor-8">(3)</a>
      <li><a href="#ref-for-descriptor-9">5.6.5. Responding to Service Changes</a> <a href="#ref-for-descriptor-10">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-extended-properties">
    <b><a href="#characteristic-extended-properties">#characteristic-extended-properties</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-extended-properties-1">5.4.1. BluetoothCharacteristicProperties</a> <a href="#ref-for-characteristic-extended-properties-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="client-characteristic-configuration">
    <b><a href="#client-characteristic-configuration">#client-characteristic-configuration</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-client-characteristic-configuration-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-client-characteristic-configuration-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="gatt-procedure">
    <b><a href="#gatt-procedure">#gatt-procedure</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-gatt-procedure-1">5.1. GATT Information Model</a>
      <li><a href="#ref-for-gatt-procedure-2">5.1.1. The Bluetooth cache</a>
      <li><a href="#ref-for-gatt-procedure-3">5.7. Error handling</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="primary-service-discovery">
    <b><a href="#primary-service-discovery">#primary-service-discovery</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-primary-service-discovery-1">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="discover-primary-service-by-service-uuid">
    <b><a href="#discover-primary-service-by-service-uuid">#discover-primary-service-by-service-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-discover-primary-service-by-service-uuid-1">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="relationship-discovery">
    <b><a href="#relationship-discovery">#relationship-discovery</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-relationship-discovery-1">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-discovery">
    <b><a href="#characteristic-discovery">#characteristic-discovery</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-discovery-1">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="discover-characteristics-by-uuid">
    <b><a href="#discover-characteristics-by-uuid">#discover-characteristics-by-uuid</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-discover-characteristics-by-uuid-1">5.1.1. The Bluetooth cache</a> <a href="#ref-for-discover-characteristics-by-uuid-2">(2)</a>
      <li><a href="#ref-for-discover-characteristics-by-uuid-3">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-descriptor-discovery">
    <b><a href="#characteristic-descriptor-discovery">#characteristic-descriptor-discovery</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-descriptor-discovery-1">5.4.1. BluetoothCharacteristicProperties</a>
      <li><a href="#ref-for-characteristic-descriptor-discovery-2">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="discover-all-characteristic-descriptors">
    <b><a href="#discover-all-characteristic-descriptors">#discover-all-characteristic-descriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-discover-all-characteristic-descriptors-1">5.6.1. Bluetooth Tree</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-value-read">
    <b><a href="#characteristic-value-read">#characteristic-value-read</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-value-read-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-value-write">
    <b><a href="#characteristic-value-write">#characteristic-value-write</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-value-write-1">5.4. BluetoothRemoteGATTCharacteristic</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-value-notification">
    <b><a href="#characteristic-value-notification">#characteristic-value-notification</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-value-notification-1">5.6.4. Responding to Notifications and Indications</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-value-indications">
    <b><a href="#characteristic-value-indications">#characteristic-value-indications</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-value-indications-1">5.6.4. Responding to Notifications and Indications</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="characteristic-descriptors">
    <b><a href="#characteristic-descriptors">#characteristic-descriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-characteristic-descriptors-1">5.4. BluetoothRemoteGATTCharacteristic</a> <a href="#ref-for-characteristic-descriptors-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="read-characteristic-descriptors">
    <b><a href="#read-characteristic-descriptors">#read-characteristic-descriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-read-characteristic-descriptors-1">5.4.1. BluetoothCharacteristicProperties</a>
      <li><a href="#ref-for-read-characteristic-descriptors-2">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="read-long-characteristic-descriptors">
    <b><a href="#read-long-characteristic-descriptors">#read-long-characteristic-descriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-read-long-characteristic-descriptors-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="write-characteristic-descriptors">
    <b><a href="#write-characteristic-descriptors">#write-characteristic-descriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-write-characteristic-descriptors-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="write-long-characteristic-descriptors">
    <b><a href="#write-long-characteristic-descriptors">#write-long-characteristic-descriptors</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-write-long-characteristic-descriptors-1">5.5. BluetoothRemoteGATTDescriptor</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="procedure-timeouts">
    <b><a href="#procedure-timeouts">#procedure-timeouts</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-procedure-timeouts-1">5.7. Error handling</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="gap-interoperability-requirements">
    <b><a href="#gap-interoperability-requirements">#gap-interoperability-requirements</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-gap-interoperability-requirements-1">4.1. Global Bluetooth device properties</a>
      <li><a href="#ref-for-gap-interoperability-requirements-2">5.2. BluetoothRemoteGATTServer</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="service-changed">
    <b><a href="#service-changed">#service-changed</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-service-changed-1">5.6.2. Event types</a>
      <li><a href="#ref-for-service-changed-2">5.6.5. Responding to Service Changes</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="definition-of-keys-and-values">
    <b><a href="#definition-of-keys-and-values">#definition-of-keys-and-values</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-definition-of-keys-and-values-1">2.3. Attacks on devices</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="identity-resolving-key">
    <b><a href="#identity-resolving-key">#identity-resolving-key</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-identity-resolving-key-1">2.4. Bluetooth device identifiers</a> <a href="#ref-for-identity-resolving-key-2">(2)</a>
      <li><a href="#ref-for-identity-resolving-key-3">4.1. Global Bluetooth device properties</a> <a href="#ref-for-identity-resolving-key-4">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="public-device-address">
    <b><a href="#public-device-address">#public-device-address</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-public-device-address-1">2.4. Bluetooth device identifiers</a> <a href="#ref-for-public-device-address-2">(2)</a> <a href="#ref-for-public-device-address-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="static-device-address">
    <b><a href="#static-device-address">#static-device-address</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-static-device-address-1">2.4. Bluetooth device identifiers</a> <a href="#ref-for-static-device-address-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="passive-scanning">
    <b><a href="#passive-scanning">#passive-scanning</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-passive-scanning-1">3. Device Discovery</a> <a href="#ref-for-passive-scanning-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="service-uuid-data-type">
    <b><a href="#service-uuid-data-type">#service-uuid-data-type</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-service-uuid-data-type-1">3. Device Discovery</a>
      <li><a href="#ref-for-service-uuid-data-type-2">4.1. Global Bluetooth device properties</a>
      <li><a href="#ref-for-service-uuid-data-type-3">4.2. BluetoothDevice</a>
      <li><a href="#ref-for-service-uuid-data-type-4">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-service-uuid-data-type-5">(2)</a> <a href="#ref-for-service-uuid-data-type-6">(3)</a> <a href="#ref-for-service-uuid-data-type-7">(4)</a> <a href="#ref-for-service-uuid-data-type-8">(5)</a> <a href="#ref-for-service-uuid-data-type-9">(6)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="local-name-data-type">
    <b><a href="#local-name-data-type">#local-name-data-type</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-local-name-data-type-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-local-name-data-type-2">(2)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="flags-data-type">
    <b><a href="#flags-data-type">#flags-data-type</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-flags-data-type-1">4.1. Global Bluetooth device properties</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="manufacturer-specific-data">
    <b><a href="#manufacturer-specific-data">#manufacturer-specific-data</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-manufacturer-specific-data-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="tx-power-level">
    <b><a href="#tx-power-level">#tx-power-level</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-tx-power-level-1">4.2.1. Responding to Advertising Events</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="service-data">
    <b><a href="#service-data">#service-data</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-service-data-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-service-data-2">(2)</a> <a href="#ref-for-service-data-3">(3)</a>
    </ul>
  </aside>
  <aside class="dfn-panel" data-for="appearance">
    <b><a href="#appearance">#appearance</a></b><b>Referenced in:</b>
    <ul>
      <li><a href="#ref-for-appearance-1">4.2.1. Responding to Advertising Events</a> <a href="#ref-for-appearance-2">(2)</a>
    </ul>
  </aside>
  <script>/* script-dfn-panel */

  document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
      if(el.tagName == "A") {
        // Clicking on a link in a <dfn> shouldn't summon the panel
        hitALink = true;
      }
      if(el.classList.contains("dfn-paneled")) {
        target = "dfn";
        break;
      }
      if(el.classList.contains("dfn-panel")) {
        target = "dfn-panel";
        break;
      }
      el = el.parentElement;
    }
    if(target != "dfn-panel") {
      // Turn off any currently "on" or "activated" panels.
      queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
        el.classList.remove("on");
        el.classList.remove("activated");
      });
    }
    if(target == "dfn" && !hitALink) {
      // open the panel
      var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
      if(dfnPanel) {
        console.log(dfnPanel);
        dfnPanel.classList.add("on");
        var rect = el.getBoundingClientRect();
        dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
        dfnPanel.style.top = window.scrollY + rect.top + "px";
        var panelRect = dfnPanel.getBoundingClientRect();
        var panelWidth = panelRect.right - panelRect.left;
        if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
          // Reposition, because the panel is overflowing
          dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
        }
      } else {
        console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
      }
    } else if(target == "dfn-panel") {
      // Switch it to "activated" state, which pins it.
      el.classList.add("activated");
      el.style.left = null;
      el.style.top = null;
    }

  });
  </script>
  <a href="https://tkybpp.github.io/web-bluetooth-jp/">
		<img src="https://ga-beacon.appspot.com/UA-81839949-1/tkybpp.github.io/web-bluetooth-jp/"/>
  </a>
